<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<style>
  body{
    color: #fff;
  }
</style>
<body>
  <div>
    <span>
      iframe传值:
      <span id="message">无数据</span>
    </span>
  </div>
  <div>
    <button id="openDialogButton"> 打开弹窗 </button>
    <button id="closeDialogButton"  onclick="closeDialog()"> 关闭弹窗 </button>
  </div>
  <script>
    const message = document.getElementById("message")
    const closeDialogButton = document.getElementById("closeDialogButton")
    const openDialogButton = document.getElementById("openDialogButton")
    openDialogButton.onclick = ()=>{
      let params = {
        eventName:"打开弹窗",
        data:{
          title:"打开弹窗"
        }
      }
      top.postMessage(JSON.stringify(params), "*");
    }
    // closeDialogButton.onclick = close
    function closeDialog(){
      let params = {
          eventName:"关闭弹窗",
          data:{
            title:"关闭弹窗"
          }
        }
        top.postMessage(JSON.stringify(params), "*");
    }
    
    window.addEventListener("message", (event) => {
      message.innerHTML = event.data
      console.log(`message->`, event)
      var obj = event.data //这里的obj 等于发送消息传过来的params
    })

    function copyText()
    {
      document.getElementById("field2").value=document.getElementById("field1").value;
    }
  </script>
</body>

</html>