var _=Object.defineProperty;var y=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,q=Object.prototype.propertyIsEnumerable;var C=(i,e,o)=>e in i?_(i,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[e]=o,f=(i,e)=>{for(var o in e||(e={}))$.call(e,o)&&C(i,o,e[o]);if(y)for(var o of y(e))q.call(e,o)&&C(i,o,e[o]);return i};import{S}from"./index.esm.min-0a61ff36.js";import{a1 as j,e as k,a4 as v,a5 as O}from"./index-55ccac47.js";import{an as B}from"./index-4e626338.js";import{u as I}from"./useChartDataFetch.hook-495a5af9.js";import{i as M}from"./axios-ba46900f.js";import{u as R,i as w,a as z,b as F,c as G,d as L,f as P}from"./echarts-676dbcd6.js";import{l as T}from"./lodash-f91682a1.js";import{u as H}from"./useAddEvent.kooks-e46e3810.js";import{d as J,r as K,g as N,o as Q,s as U,u as x}from"./vue-65382a1b.js";import"./vueRepl-a238c739.js";import"./elementPlus-07602b2b.js";import"./vuema-115cb50e.js";import"./xgplayerVue-c27b6911.js";import"./http-0d114cdb.js";import"./axios-e76ab20a.js";import"./useEvent.hook-afeb4a8c.js";const fe=J({__name:"index",props:{themeSetting:{type:Object,required:!0},themeColor:{type:Object,required:!0},chartConfig:{type:Object,required:!0}},setup(i){const e=i,{rootConfig:o,getEvents:V}=H(e.chartConfig,v);R([w,z,F,G,L,P]),K(["series"]);const A=N(()=>{let r=T.cloneDeep(e.chartConfig.option);return E(B(e.chartConfig.data),r),j(r,e.themeSetting,O)});function E(r,s){let{valueAxis:m,classAxis:g,colorAxis:p,typeList:D}=e.chartConfig.dataMapping,n=[],d=r.map(t=>t[g[0].column||p[0].column]);m.length>1?m.forEach((t,l,c)=>{let a=f({},h(s.series,l));a.name=t.name,a.data=r.map(u=>u[t.column]),n.push(a)}):m.length==1&&(g[0]&&p[0]?(D.forEach((t,l)=>{let c=f({},h(s.series,l));c.name=t.name,c.data=[],n.push(c)}),r.forEach((t,l,c)=>{if(g[0]&&p[0]){let a=n.find(u=>u.name==t[p[0].column]);a?a.data.push(t[m[0].column]):(a=f({},h(s.series,n.length)),a.name=t[p[0].column],a.data=[t[m[0].column]],n.push(a))}})):m.forEach((t,l,c)=>{let a=f({},h(s.series,l));a.name=t.name,a.data=r.map(u=>u[t.column]),n.push(a)})),s.yAxis.type=="category"?s.yAxis.data=d:s.xAxis.type=="category"&&(s.xAxis.data=d),s.series=n}function h(r,s){return r[s]?r[s]:k}const{vChartRef:b}=I(e.chartConfig,o.requestGlobalConfig,r=>{console.log(r)});return(r,s)=>(Q(),U(x(S),{ref_key:"vChartRef",ref:b,theme:i.themeColor,option:A.value,"manual-update":x(M)(),"update-options":{replaceMerge:["series"]},autoresize:""},null,8,["theme","option","manual-update"]))}});export{fe as default};
