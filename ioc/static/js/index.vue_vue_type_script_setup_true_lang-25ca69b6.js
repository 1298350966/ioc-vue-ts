import{g as l}from"./index-7dcd76df.js";import{c as a}from"./config-a9477480.js";import{d as u,g as d,r as g,A as y,$ as w,o as r,s as k,a3 as m,a5 as C,u as I,c as L,x as M}from"./vue-65382a1b.js";const E=u({__name:"index",props:{type:{},attrs:{},component:{},iframe:{}},emits:["message"],setup(c,{emit:o}){const n=c,i=d(()=>a[n.component.is]?a[n.component.is]:l(n.component.is));function f(e){o("message",e)}const s=g(null);function p(){s.value.contentWindow.postMessage(JSON.stringify(n.attrs),"*")}function t(e){console.log("window接受消息",e),o("message",e.data)}return y(()=>{window.addEventListener("message",t,!1)}),w(()=>{window.removeEventListener("message",t,!1)}),(e,h)=>e.type==="component"?(r(),k(C(I(i)),m({key:0},e.attrs,{onMessage:f,style:{width:"100%",height:"100%"}}),null,16)):e.type==="iframe"?(r(),L("iframe",m({key:1,ref_key:"IframeRefs",ref:s,class:"content"},e.iframe,{onLoad:p}),null,16)):M("",!0)}});export{E as _};
