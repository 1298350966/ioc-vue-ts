import{S as ue}from"./index.esm.min-0a61ff36.js";import"./echarts-4dc1ebe1.js";import{p as ve,q as de,S as he,s as fe,v as ce,w as me,x as G,G as $,y as ge,z as pe,R as X,Z as J,C as ye,A as we,B as K,D as Pe,E as Q,F as Se,u as Ce,a as be,c as Ie}from"./echarts-676dbcd6.js";import{ad as ee,p as Me,ap as Te}from"./index-55ccac47.js";import{al as Le}from"./index-4e626338.js";import{i as Ee}from"./axios-ba46900f.js";import{u as xe}from"./chartEditStore-8641b951.js";import{u as De}from"./useChartDataFetch.hook-495a5af9.js";import"./lodash-f91682a1.js";import{u as Ae}from"./useAddEvent.kooks-e46e3810.js";import{d as Oe,b as Re,f as te,o as Be,s as We,u as Ye}from"./vue-65382a1b.js";import"./vueRepl-a238c739.js";import"./elementPlus-07602b2b.js";import"./vuema-115cb50e.js";import"./xgplayerVue-c27b6911.js";import"./axios-e76ab20a.js";import"./plugin-68db7aa1.js";import"./http-0d114cdb.js";import"./useEvent.hook-afeb4a8c.js";ve({type:"series.liquidFill",optionUpdated:function(){var e=this.option;e.gridSize=Math.max(Math.floor(e.gridSize),4)},getInitialData:function(e,a){var u=de(e.data,{coordDimensions:["value"]}),c=new he(u,this);return c.initData(e.data),c},defaultOption:{color:["#294D99","#156ACF","#1598ED","#45BDFF"],center:["50%","50%"],radius:"50%",amplitude:"8%",waveLength:"80%",phase:"auto",period:"auto",direction:"right",shape:"circle",waveAnimation:!0,animationEasing:"linear",animationEasingUpdate:"linear",animationDuration:2e3,animationDurationUpdate:1e3,outline:{show:!0,borderDistance:8,itemStyle:{color:"none",borderColor:"#294D99",borderWidth:8,shadowBlur:20,shadowColor:"rgba(0, 0, 0, 0.25)"}},backgroundStyle:{color:"#E3F7FF"},itemStyle:{opacity:.95,shadowBlur:50,shadowColor:"rgba(0, 0, 0, 0.4)"},label:{show:!0,color:"#294D99",insideColor:"#fff",fontSize:50,fontWeight:"bold",align:"center",baseline:"middle",position:"inside"},emphasis:{itemStyle:{opacity:.8}}}});const ke=fe({type:"ec-liquid-fill",shape:{waveLength:0,radius:0,radiusY:0,cx:0,cy:0,waterLevel:0,amplitude:0,phase:0,inverse:!1},buildPath:function(e,a){a.radiusY==null&&(a.radiusY=a.radius);for(var u=Math.max(Math.ceil(2*a.radius/a.waveLength*4)*2,8);a.phase<-Math.PI*2;)a.phase+=Math.PI*2;for(;a.phase>0;)a.phase-=Math.PI*2;var c=a.phase/Math.PI/2*a.waveLength,v=a.cx-a.radius+c-a.radius*2;e.moveTo(v,a.waterLevel);for(var f=0,d=0;d<u;++d){var b=d%4,l=qe(d*a.waveLength/4,b,a.waveLength,a.amplitude);e.bezierCurveTo(l[0][0]+v,-l[0][1]+a.waterLevel,l[1][0]+v,-l[1][1]+a.waterLevel,l[2][0]+v,-l[2][1]+a.waterLevel),d===u-1&&(f=l[2][0])}a.inverse?(e.lineTo(f+v,a.cy-a.radiusY),e.lineTo(v,a.cy-a.radiusY),e.lineTo(v,a.waterLevel)):(e.lineTo(f+v,a.cy+a.radiusY),e.lineTo(v,a.cy+a.radiusY),e.lineTo(v,a.waterLevel)),e.closePath()}});function qe(e,a,u,c){return a===0?[[e+1/2*u/Math.PI/2,c/2],[e+1/2*u/Math.PI,c],[e+u/4,c]]:a===1?[[e+1/2*u/Math.PI/2*(Math.PI-2),c],[e+1/2*u/Math.PI/2*(Math.PI-1),c/2],[e+u/4,0]]:a===2?[[e+1/2*u/Math.PI/2,-c/2],[e+1/2*u/Math.PI,-c],[e+u/4,-c]]:[[e+1/2*u/Math.PI/2*(Math.PI-2),-c],[e+1/2*u/Math.PI/2*(Math.PI-1),-c/2],[e+u/4,0]]}var I=we;function ae(e){return e&&e.indexOf("path://")===0}ce({type:"liquidFill",render:function(e,a,u){var c=this,v=this.group;v.removeAll();var f=e.getData(),d=f.getItemModel(0),b=d.get("center"),l=d.get("radius"),Y=u.getWidth(),M=u.getHeight(),z=Math.min(Y,M),k=0,x=0,U=e.get("outline.show");U&&(k=e.get("outline.borderDistance"),x=I(e.get("outline.itemStyle.borderWidth"),z));var T=I(b[0],Y),L=I(b[1],M),E,D,A,P=!1,w=e.get("shape");if(w==="container"?(P=!0,E=[Y/2,M/2],D=[E[0]-x/2,E[1]-x/2],A=[I(k,Y),I(k,M)],l=[Math.max(D[0]-A[0],0),Math.max(D[1]-A[1],0)]):(E=I(l,z)/2,D=E-x/2,A=I(k,z),l=Math.max(D-A,0)),U){var re=j();re.style.lineWidth=x,v.add(j())}var ie=P?0:T-l,oe=P?0:L-l,O=null;v.add(ne());var F=this._data,_=[];f.diff(F).add(function(t){var r=H(t,!1),i=r.shape.waterLevel;r.shape.waterLevel=P?M/2:l,me(r,{shape:{waterLevel:i}},e),r.z2=2,N(t,r,null),v.add(r),f.setItemGraphicEl(t,r),_.push(r)}).update(function(t,r){for(var i=F.getItemGraphicEl(r),s=H(t,!1,i),n={},o=["amplitude","cx","cy","phase","radius","radiusY","waterLevel","waveLength"],m=0;m<o.length;++m){var h=o[m];s.shape.hasOwnProperty(h)&&(n[h]=s.shape[h])}for(var p={},g=["fill","opacity","shadowBlur","shadowColor"],m=0;m<g.length;++m){var h=g[m];s.style.hasOwnProperty(h)&&(p[h]=s.style[h])}P&&(n.radiusY=M/2),G(i,{shape:n,x:s.x,y:s.y},e),e.isUniversalTransitionEnabled&&e.isUniversalTransitionEnabled()?G(i,{style:p},e):i.useStyle(p);var y=i.getClipPath(),S=s.getClipPath();i.setClipPath(s.getClipPath()),i.shape.inverse=s.inverse,y&&S&&c._shape===w&&!ae(w)&&G(S,{shape:y.shape},e,{isFrom:!0}),N(t,i,i),v.add(i),f.setItemGraphicEl(t,i),_.push(i)}).remove(function(t){var r=F.getItemGraphicEl(t);v.remove(r)}).execute(),d.get("label.show")&&v.add(le(_)),this._shape=w,this._data=f;function R(t,r){if(w)if(ae(w)){var i=K(w.slice(7),{}),s=i.getBoundingRect(),n=s.width,o=s.height;n>o?(o=t*2/n*o,n=t*2):(n=t*2/o*n,o=t*2);var m=r?0:T-n/2,h=r?0:L-o/2;return i=K(w.slice(7),{},new Pe(m,h,n,o)),r&&(i.x=-n/2,i.y=-o/2),i}else if(P){var p=r?-t[0]:T-t[0],g=r?-t[1]:L-t[1];return Q("rect",p,g,t[0]*2,t[1]*2)}else{var p=r?-t:T-t,g=r?-t:L-t;return w==="pin"?g+=t:w==="arrow"&&(g-=t),Q(w,p,g,t*2,t*2)}return new Se({shape:{cx:r?0:T,cy:r?0:L,r:t}})}function j(){var t=R(E);return t.style.fill=null,t.setStyle(e.getModel("outline.itemStyle").getItemStyle()),t}function ne(){var t=R(l);t.setStyle(e.getModel("backgroundStyle").getItemStyle()),t.style.fill=null,t.z2=5;var r=R(l);r.setStyle(e.getModel("backgroundStyle").getItemStyle()),r.style.stroke=null;var i=new $;return i.add(t),i.add(r),i}function H(t,r,i){var s=P?l[0]:l,n=P?M/2:l,o=f.getItemModel(t),m=o.getModel("itemStyle"),h=o.get("phase"),p=I(o.get("amplitude"),n*2),g=I(o.get("waveLength"),s*2),y=f.get("value",t),S=n-y*n*2;h=i?i.shape.phase:h==="auto"?t*Math.PI/4:h;var C=m.getItemStyle();if(!C.fill){var B=e.get("color"),q=t%B.length;C.fill=B[q]}var se=s*2,W=new ke({shape:{waveLength:g,radius:s,radiusY:n,cx:se,cy:0,waterLevel:S,amplitude:p,phase:h,inverse:r},style:C,x:T,y:L});W.shape._waterLevel=S;var V=o.getModel("emphasis.itemStyle").getItemStyle();V.lineWidth=0,W.ensureState("emphasis").style=V,ge(W);var Z=R(l,!0);return Z.setStyle({fill:"white"}),W.setClipPath(Z),W}function N(t,r,i){var s=f.getItemModel(t),n=s.get("period"),o=s.get("direction"),m=f.get("value",t),h=s.get("phase");h=i?i.shape.phase:h==="auto"?t*Math.PI/4:h;var p=function(S){var C=f.count();return C===0?S:S*(.2+(C-t)/C*.8)},g=0;n==="auto"?g=p(5e3):g=typeof n=="function"?n(m,t):n;var y=0;o==="right"||o==null?y=Math.PI:o==="left"?y=-Math.PI:o==="none"?y=0:console.error("Illegal direction value for liquid fill."),o!=="none"&&s.get("waveAnimation")&&r.animate("shape",!0).when(0,{phase:h}).when(g/2,{phase:y+h}).when(g,{phase:y*2+h}).during(function(){O&&O.dirty(!0)}).start()}function le(t){var r=d.getModel("label");function i(){var C=e.getFormattedLabel(0,"normal"),B=f.get("value",0)*100,q=f.getName(0)||e.name;return isNaN(B)||(q=B.toFixed(0)+"%"),C==null?q:C}var s={z2:10,shape:{x:ie,y:oe,width:(P?l[0]:l)*2,height:(P?l[1]:l)*2},style:{fill:"transparent"},textConfig:{position:r.get("position")||"inside"},silent:!0},n={style:{text:i(),textAlign:r.get("align"),textVerticalAlign:r.get("baseline")}};Object.assign(n.style,pe(r));var o=new X(s),m=new X(s);m.disableLabelAnimation=!0,o.disableLabelAnimation=!0;var h=new J(n),p=new J(n);o.setTextContent(h),m.setTextContent(p);var g=r.get("insideColor");p.style.fill=g;var y=new $;y.add(o),y.add(m);var S=R(l,!0);return O=new ye({shape:{paths:t},x:T,y:L}),O.setClipPath(S),m.setClipPath(O),y}},dispose:function(){}});const it=Oe({__name:"index",props:{themeSetting:{type:Object,required:!0},themeColor:{type:Object,required:!0},chartConfig:{type:Object,required:!0}},setup(e){const a=e,{rootConfig:u,getEvents:c}=Ae(a.chartConfig,Te);Ce([be,Ie]),xe();const v=Re({value:{}});te(()=>u.editCanvasConfig.chartThemeColor,d=>{if(!Ee()){const b=ee[d]||ee[Me];a.chartConfig.option.series[0].backgroundStyle.color=b[2],a.chartConfig.option.series[0].color[0].colorStops=[{offset:0,color:b[0]},{offset:1,color:b[1]}]}v.value=a.chartConfig.option},{immediate:!0});const f=d=>(d=Le(d)?parseFloat(d):d,parseFloat(d.toFixed(2)));return te(()=>a.chartConfig.data,d=>{a.chartConfig.option.series[0].data=[f(d.value)],v.value=a.chartConfig.option},{immediate:!0,deep:!1}),De(a.chartConfig,u.requestGlobalConfig,d=>{v.value.series[0].data=[f(d)]}),(d,b)=>(Be(),We(Ye(ue),{theme:e.themeColor,option:v.value,autoresize:""},null,8,["theme","option"]))}});export{it as default};
