import{at as g,u as de,y as L,au as re,z as C,w as ie}from"./index-4e626338.js";/* empty css                */import"./el-tooltip-4ed993c7.js";/* empty css                  */import"./el-collapse-transition-4ed993c7.js";/* empty css                  *//* empty css                *//* empty css                 *//* empty css                 *//* empty css               *//* empty css                     *//* empty css                        *//* empty css                     *//* empty css                        */import{d as I,r as h,b as pe,f as me,o as s,s as x,w as l,a as t,h as O,a6 as R,a7 as S,c as y,F as T,q as A,u as e,x as Q,aI as _e,g as ce,a0 as k,y as $,z as N,l as W,G as fe,H as ve}from"./vue-65382a1b.js";import"./el-collapse-item-4ed993c7.js";import{_ as H}from"./SettingItem-0e9c370f.js";import{_ as B}from"./SettingItemBox-ce5066ee.js";/* empty css                        *//* empty css                  *//* empty css                   */import{i as be}from"./icon-24f36b03.js";/* empty css                                                                  *//* empty css                    *//* empty css                  *//* empty css                        */import"./chartEditStore-8641b951.js";import"./vuedraggable-26823587.js";import{u as Y}from"./useTargetData.hook-7e83673b.js";import{s as j,a as ge}from"./index.d-4993f78d.js";/* empty css                    */import{$ as ye,x as F,k as J,_ as Ve,Q as X,P as K,d as Z,ae as ee,ap as te,n as le,w as xe,ar as qe,C as De,p as ae,H as Re,J as Ee,o as ke,a3 as Ue,a2 as Ce}from"./elementPlus-07602b2b.js";import{_ as z}from"./xgplayerVue-c27b6911.js";/* empty css                  *//* empty css                 */import{_ as P}from"./EditorWorker.vue_vue_type_script_setup_true_lang-44860150.js";/* empty css                 *//* empty css                    *//* empty css                        *//* empty css                                                                    */import"./index-bf1882c4.js";const M=I({name:"RequestHeaderTable",__name:"index",props:{target:{type:Object,required:!0,default:()=>{}},editDisabled:{type:Boolean,required:!1,default:!1}},emits:["update"],setup(f,{emit:E}){const D=f;h(!1);const c={key:"",value:"",error:!1},d=pe({content:[]}),r=()=>{let i=0;if(d.content.forEach(o=>{o.key!==""&&o.value==""||o.key===""&&o.value!==""?o.error=!0:(i++,o.error=!1)}),i==d.content.length){const o={};d.content.forEach(n=>{n.key&&(o[n.key]=n.value)}),E("update",o)}},a=i=>{d.content.splice(i+1,0,{key:"",value:"",error:!1})},p=i=>{d.content.length!==1&&d.content.splice(i,1),r()};return me(()=>D.target,i=>{d.content=[];for(const o in i)d.content.push({key:o,value:i[o],error:!1});d.content.length||(d.content=[JSON.parse(JSON.stringify(c))])},{immediate:!0,deep:!0}),(i,o)=>{const n=ye,m=F,V=J,_=Ve;return s(),x(_,{style:{width:"100%"},data:d.content,class:"go-request-header-table-box",border:""},{default:l(()=>[t(n,{type:"index",width:"50"}),t(n,{prop:"key",label:"Key"},{default:l(v=>[t(m,{modelValue:v.row.key,"onUpdate:modelValue":q=>v.row.key=q,disabled:f.editDisabled,type:"text",onBlur:r},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),t(n,{prop:"value",label:"Value"},{default:l(v=>[t(m,{modelValue:v.row.value,"onUpdate:modelValue":q=>v.row.value=q,disabled:f.editDisabled,type:"text",onBlur:r},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),t(n,{prop:"date",label:"操作",width:"200px"},{default:l(v=>[O("div",null,[t(V,{class:"go-ml-2",type:"primary",disabled:f.editDisabled,onClick:q=>a(v.$index)},{default:l(()=>[R("+")]),_:2},1032,["disabled","onClick"]),t(V,{class:"go-ml-2",type:"danger",disabled:v.$index===0&&f.editDisabled,onClick:q=>p(v.$index)},{default:l(()=>[R(" - ")]),_:2},1032,["disabled","onClick"])])]),_:1}),t(n,{prop:"date",label:"结果",width:"200px"},{default:l(v=>[v.row.error?(s(),x(V,{key:0,class:"go-ml-2",text:"",type:"danger"},{default:l(()=>[R(" 格式错误 ")]),_:1})):(s(),x(V,{key:1,class:"go-ml-2",text:"",type:"primary"},{default:l(()=>[R(" 格式通过 ")]),_:1}))]),_:1})]),_:1},8,["data"])}}});const Oe=I({name:"RequestGlobalHeaderTable",__name:"index",props:{editDisabled:{type:Boolean,default:!0}},setup(f){const{chartEditStore:E}=Y(),{requestParams:D}=S(E.getRequestGlobalConfig),c=h(g.HEADER),d=[g.HEADER],r=a=>{c.value===g.HEADER&&(D.value[c.value]=a)};return(a,p)=>{const i=X,o=K;return s(),y("div",null,[t(o,{modelValue:c.value,"onUpdate:modelValue":p[0]||(p[0]=n=>c.value=n)},{default:l(()=>[(s(),y(T,null,A(d,n=>t(i,{key:n,name:n,label:n},{default:l(()=>[c.value===e(g).HEADER?(s(),x(e(M),{key:0,editDisabled:f.editDisabled,target:e(D)[c.value],onUpdate:r},null,8,["editDisabled","target"])):Q("",!0)]),_:2},1032,["name","label"])),64))]),_:1},8,["modelValue"])])}}}),Te=I({name:"RequestGlobalConfig",__name:"index",setup(f){_e(V=>({"58f131f9":m.value}));const{PencilIcon:E,ChevronDownOutlineIcon:D,ChevronUpOutlineIcon:c}=be.ionicons5,{chartEditStore:d}=Y(),{requestOriginUrl:r,requestInterval:a,requestIntervalUnit:p}=S(d.getRequestGlobalConfig),i=h(!0),o=de(),n=h(!1),m=ce(()=>o.getAppTheme);return(V,_)=>{const v=Z,q=F,w=ee,b=te,u=le,G=xe,oe=J,ne=qe,se=De,ue=ae;return s(),x(ue,{class:"n-card-shallow"},{default:l(()=>[t(v,{type:"info",bordered:!1,style:{"border-radius":"5px"}},{default:l(()=>[R(" 全局公共配置 ")]),_:1}),t(e(B),{name:"服务",itemRightStyle:{gridTemplateColumns:"5fr 2fr 1fr"}},{default:l(()=>[t(e(H),{name:"前置 URL"},{default:l(()=>[t(q,{modelValue:e(r),"onUpdate:modelValue":_[0]||(_[0]=U=>k(r)?r.value=U:null),modelModifiers:{trim:!0},disabled:i.value,placeholder:"例：http://127.0.0.1/"},null,8,["modelValue","disabled"])]),_:1}),t(e(H),{name:"更新间隔，为 0 只会初始化"},{default:l(()=>[t(u,null,{default:l(()=>[t(w,{class:"select-time-number",modelValue:e(a),"onUpdate:modelValue":_[1]||(_[1]=U=>k(a)?a.value=U:null),modelModifiers:{trim:!0},min:0,"show-button":!1,disabled:i.value,placeholder:"请输入数字"},null,8,["modelValue","disabled"]),t(b,{class:"select-time-options",modelValue:e(p),"onUpdate:modelValue":_[2]||(_[2]=U=>k(p)?p.value=U:null),options:e(j),disabled:i.value},null,8,["modelValue","options","disabled"])]),_:1})]),_:1}),$(t(oe,{type:"primary",ghost:"",onClick:_[3]||(_[3]=U=>i.value=!1)},{icon:l(()=>[t(G,null,{default:l(()=>[t(e(E))]),_:1})]),default:l(()=>[R(" 编辑配置 ")]),_:1},512),[[N,i.value]])]),_:1}),t(ne,null,{default:l(()=>[$(O("div",null,[t(e(Oe),{editDisabled:i.value},null,8,["editDisabled"])],512),[[N,n.value]])]),_:1}),n.value?(s(),y("div",{key:0,class:"kh-flex-center go-mt-3 down",onClick:_[4]||(_[4]=U=>n.value=!1)},[t(G,{size:"32"},{default:l(()=>[t(e(c))]),_:1})])):(s(),y("div",{key:1,class:"kh-flex-center go-mt-3 down",onClick:_[5]||(_[5]=U=>n.value=!0)},[t(se,{content:"展开",placement:"top"},{default:l(()=>[t(G,{size:"32"},{default:l(()=>[t(e(D))]),_:1})]),_:1})]))]),_:1})}}});const Ct=z(Te,[["__scopeId","data-v-f13d90a7"]]),we=f=>(fe("data-v-b93316eb"),f=f(),ve(),f),he={style:{top:"-8px",position:"relative",width:"80%"}},Se={class:"go-mt-3"},Be={key:0},Ie={key:1},Le=we(()=>O("span",null,"该接口没有 Body 体",-1)),Ae={key:0},$e=I({__name:"index",props:{targetDataRequest:Object},setup(f){const E=f,{requestHttpType:D,requestContentType:c,requestSQLContent:d,requestParams:r,requestParamsBodyType:a}=S(E.targetDataRequest),p=h(g.PARAMS),i=n=>{p.value!==g.BODY&&(r.value[p.value]=n)},o=n=>{p.value===g.BODY&&(a.value===C.FORM_DATA||a.value===C.X_WWW_FORM_URLENCODED)&&(r.value[g.BODY][a.value]=n)};return(n,m)=>{const V=X,_=K,v=Re,q=Ee,w=ae,b=Z;return s(),y("div",he,[t(_,{modelValue:e(c),"onUpdate:modelValue":m[0]||(m[0]=u=>k(c)?c.value=u:null),size:"small"},{default:l(()=>[t(V,{name:e(L).DEFAULT,label:"普通请求"},null,8,["name"]),t(V,{name:e(L).SQL,label:"SQL 请求"},null,8,["name"])]),_:1},8,["modelValue"]),$(O("div",null,[t(_,{animated:"",modelValue:p.value,"onUpdate:modelValue":m[1]||(m[1]=u=>p.value=u)},{default:l(()=>[(s(!0),y(T,null,A(e(g),u=>(s(),x(V,{key:u,name:u,label:u},null,8,["name","label"]))),128))]),_:1},8,["modelValue"]),O("div",Se,[p.value!==e(g).BODY?(s(),y("div",Be,[t(e(M),{target:e(r)[p.value],onUpdate:i},null,8,["target"])])):(s(),y("div",Ie,[t(q,{modelValue:e(a),"onUpdate:modelValue":m[2]||(m[2]=u=>k(a)?a.value=u:null),name:"radiogroup"},{default:l(()=>[(s(!0),y(T,null,A(e(re),u=>(s(),x(v,{key:u,label:u},{default:l(()=>[R(W(u),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"]),e(a)===e(C).NONE?(s(),x(w,{key:0,shadow:"never",class:"go-mt-3 go-pb-3"},{default:l(()=>[Le]),_:1})):e(a)===e(C).FORM_DATA||e(a)===e(C).X_WWW_FORM_URLENCODED?(s(),x(e(M),{key:1,class:"go-mt-3",target:e(r)[e(g).BODY][e(a)],onUpdate:o},null,8,["target"])):e(a)===e(C).JSON?(s(),x(e(P),{key:2,modelValue:e(r)[e(g).BODY][e(a)],"onUpdate:modelValue":m[3]||(m[3]=u=>e(r)[e(g).BODY][e(a)]=u),height:"200px",language:"json"},null,8,["modelValue"])):e(a)===e(C).XML?(s(),x(e(P),{key:3,modelValue:e(r)[e(g).BODY][e(a)],"onUpdate:modelValue":m[4]||(m[4]=u=>e(r)[e(g).BODY][e(a)]=u),height:"200px",language:"html"},null,8,["modelValue"])):Q("",!0)]))])],512),[[N,e(c)===e(L).DEFAULT]]),$(O("div",null,[e(D)===e(ie).GET?(s(),y("span",Ae,"SQL 类型不支持 Get 请求，请使用其它方式")):(s(),y(T,{key:1},[t(b,{type:"warning"},{default:l(()=>[R("需要后台提供专门处理 sql 的接口")]),_:1}),t(e(B),{name:"键名"},{default:l(()=>[t(b,{type:"success",bordered:!1,style:{width:"40px","font-size":"16px"}},{default:l(()=>[R(" sql ")]),_:1})]),_:1}),t(e(B),{name:"键值",alone:""},{default:l(()=>[t(e(P),{modelValue:e(d).sql,"onUpdate:modelValue":m[5]||(m[5]=u=>e(d).sql=u),height:"200px",language:"sql"},null,8,["modelValue"])]),_:1})],64))],512),[[N,e(c)===e(L).SQL]])])}}});const Ne=z($e,[["__scopeId","data-v-b93316eb"]]),He=I({__name:"index",props:{targetDataRequest:Object},setup(f){const E=f,{chartEditStore:D}=Y(),{requestOriginUrl:c}=S(D.getRequestGlobalConfig),{requestInterval:d,requestIntervalUnit:r,requestHttpType:a,requestUrl:p}=S(E.targetDataRequest);return(i,o)=>{const n=ke,m=Ue,V=Ce,_=F,v=ee,q=te,w=le;return s(),y(T,null,[t(n),t(e(B),{itemRightStyle:{gridTemplateColumns:"6fr 2fr"},style:{"padding-right":"25px"}},{name:l(()=>[R(" 地址 ")]),default:l(()=>[t(e(H),{name:"请求方式 & URL 地址"},{default:l(()=>[t(_,{class:"input-with-select",modelValue:e(p),"onUpdate:modelValue":o[1]||(o[1]=b=>k(p)?p.value=b:null),modelModifiers:{trim:!0},min:1,placeholder:"请输入地址（去除前置URL）"},{prefix:l(()=>[O("span",null,W(e(c)),1),t(n,{direction:"vertical"})]),prepend:l(()=>[t(V,{modelValue:e(a),"onUpdate:modelValue":o[0]||(o[0]=b=>k(a)?a.value=b:null),class:"select-type-options"},{default:l(()=>[(s(!0),y(T,null,A(e(ge),(b,u)=>(s(),x(m,{key:u,label:b.label,value:b.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),t(e(H),{name:"更新间隔，为 0 只会初始化"},{default:l(()=>[t(w,null,{default:l(()=>[t(v,{modelValue:e(d),"onUpdate:modelValue":o[2]||(o[2]=b=>k(d)?d.value=b:null),class:"select-time-number",min:0,placeholder:"默认使用全局数据"},null,8,["modelValue"]),t(q,{class:"select-time-options",modelValue:e(r),"onUpdate:modelValue":o[3]||(o[3]=b=>k(r)?r.value=b:null),options:e(j)},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1}),t(e(B),{alone:"",name:"选择方式",class:"go-mt-0"},{default:l(()=>[t(e(Ne),{targetDataRequest:f.targetDataRequest},null,8,["targetDataRequest"])]),_:1})],64)}}});const Ot=z(He,[["__scopeId","data-v-82b7b2ac"]]);export{Ct as R,Ot as a};
