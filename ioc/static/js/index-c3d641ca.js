import{R as $,am as J}from"./index-4e626338.js";/* empty css                         *//* empty css                *//* empty css                     */import{_ as K}from"./hCode-f0cdea69.js";import"./el-tooltip-4ed993c7.js";/* empty css                  */import"./fileTypeEnum-eae25d97.js";/* empty css                    *//* empty css                  *//* empty css                *//* empty css                 */import{_ as W}from"./SettingItem-0e9c370f.js";/* empty css                 *//* empty css                 *//* empty css                    *//* empty css               *//* empty css                        */import{d as X,i as Y,a7 as Z,g as E,r as S,f as ee,al as te,o as m,s as g,w as t,y as w,a as e,u as l,c as C,l as oe,z as T,x,a0 as ae,a6 as I,G as le,H as ne,h as se}from"./vue-65382a1b.js";import{i as ie}from"./icon-24f36b03.js";import re from"./index-0fd217a4.js";import{T as b,D as c}from"./index.d-4993f78d.js";import{u as pe}from"./useFile.hooks-6b86f602.js";import{$ as me,_ as ue,a5 as ce,x as de,n as _e,w as fe,k as ve,ab as he,C as ge,i as be,p as ye,a4 as Ee}from"./elementPlus-07602b2b.js";import{_ as Se}from"./xgplayerVue-c27b6911.js";import"./vueRepl-a238c739.js";import"./lodash-f91682a1.js";import"./vuema-115cb50e.js";import"./highlight-87778b4e.js";/* empty css                                                                    */import"./Close-095524a6.js";import"./index-806da9dd.js";/* empty css                   *//* empty css                *//* empty css                    */import"./el-collapse-item-4ed993c7.js";/* empty css                   */import"./EditorWorker.vue_vue_type_script_setup_true_lang-44860150.js";import"./editorWorker-7e4b3ef6.js";import"./plugin-68db7aa1.js";import"./chartEditStore-8641b951.js";import"./index-55ccac47.js";import"./echarts-676dbcd6.js";const we=r=>(le("data-v-1a15608b"),r=r(),ne(),r),Ce={key:0},Te={key:1},xe=we(()=>se("p",null,"过滤器默认处理接口返回值的「data」字段",-1)),Ie=X({__name:"index",props:{show:{type:Boolean,required:!1},ajax:{type:Boolean,required:!0}},setup(r){const n=Y("targetData"),{DocumentAddIcon:B,DocumentDownloadIcon:D}=ie.carbon,{dimensions:N}=Z(n.value.dataset),d=E(()=>{var o,a;return((o=n.value)==null?void 0:o.data)||((a=n.value)==null?void 0:a.dataset)||"此组件无数据源"}),p=S(),_=S(!1),{uploadFileListRef:f,customRequest:k,beforeUpload:U,download:R}=pe(n),q=E(()=>n.value.request.requestDataType!==$.STATIC),z=o=>{let a=c.SUCCESS;for(let s=0;s<d.value.length;s++)if(d.value[s][o]===void 0)return a=c.FAILURE,a;return c.SUCCESS},A=()=>{try{return N.value.map((o,a)=>a===0?{field:"通用标识",mapping:o,result:c.NULL}:{field:`数据项-${a}`,mapping:o,result:z(o)})}catch(o){return[]}};return ee(()=>{var o;return(o=n.value)==null?void 0:o.data},o=>{o?p.value=A():o!=null?p.value=null:_.value=!0,J(o)&&(p.value=null)},{immediate:!0}),(o,a)=>{const s=me,V=ue,v=ce,F=de,L=W,u=_e,h=fe,y=ve,j=he,H=te("QuestionFilled"),M=ge,G=K,O=be,P=ye,Q=Ee;return m(),g(Q,{style:{"padding-left":"10px"}},{default:t(()=>[w(e(v,{color:"#2a2a2b",size:"large",hollow:!0,type:"info",timestamp:l(b).MAPPING,placement:"top"},{default:t(()=>[e(V,{border:"",striped:"",data:p.value},{default:t(()=>[e(s,{prop:"field",label:"字段"}),e(s,{prop:"mapping",label:"映射"}),e(s,{prop:"result",label:"状态"},{default:t(i=>[i.row.result===0?(m(),C("span",Ce," 无 ")):(m(),C("span",Te,"匹配"+oe(i.row.result===1?"成功":"失败"),1))]),_:1})]),_:1},8,["data"])]),_:1},8,["timestamp"]),[[T,p.value]]),w(e(v,{type:"warning",color:"#2a2a2b",size:"large",hollow:!0,timestamp:l(b).FILTER,placement:"top"},{default:t(()=>[l(n).filter?x("",!0):(m(),g(L,{key:0,name:"过滤节点(添加过滤器配置过滤节点失效)"},{default:t(()=>[e(F,{style:{width:"100%"},modelValue:l(n).filterNode,"onUpdate:modelValue":a[0]||(a[0]=i=>l(n).filterNode=i)},null,8,["modelValue"])]),_:1})),e(u,{direction:"vertical",alignment:"start"},{default:t(()=>[xe,e(l(re))]),_:1})]),_:1},8,["timestamp"]),[[T,q.value]]),e(v,{type:"success",color:"#2a2a2b",size:"large",hollow:!0,timestamp:l(b).CONTENT,placement:"top"},{default:t(()=>[e(u,{direction:"horizontal","fill-ratio":100,fill:"",style:{width:"100%"}},{default:t(()=>[e(u,null,{default:t(()=>[e(j,{"file-list":l(f),"onUpdate:fileList":a[1]||(a[1]=i=>ae(f)?f.value=i:null),"show-file-list":!1,"http-request":l(k),onBeforeUpload:l(U)},{default:t(()=>[e(u,null,{default:t(()=>[r.ajax?x("",!0):(m(),g(y,{key:0,class:"sourceBtn-item",disabled:_.value},{icon:t(()=>[e(h,{size:14},{default:t(()=>[e(l(B))]),_:1})]),default:t(()=>[I(" 导入（json / txt） ")]),_:1},8,["disabled"]))]),_:1})]),_:1},8,["file-list","http-request","onBeforeUpload"]),e(y,{class:"sourceBtn-item",disabled:_.value,onClick:l(R)},{icon:t(()=>[e(h,{size:14},{default:t(()=>[e(l(D))]),_:1})]),default:t(()=>[I(" 下载 ")]),_:1},8,["disabled","onClick"]),e(M,{content:"点击【下载】查看完整数据"},{default:t(()=>[e(h,{size:16},{default:t(()=>[e(H)]),_:1})]),_:1})]),_:1}),e(P,{shadow:"never",style:{padding:"0"}},{default:t(()=>[e(O,{height:"400px"},{default:t(()=>[e(G,{code:JSON.stringify(d.value,null,2),language:"json"},null,8,["code"])]),_:1})]),_:1})]),_:1})]),_:1},8,["timestamp"])]),_:1})}}});const ht=Se(Ie,[["__scopeId","data-v-1a15608b"]]);export{ht as default};
