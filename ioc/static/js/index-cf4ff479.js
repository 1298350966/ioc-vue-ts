var $=Object.defineProperty;var y=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var x=(o,e,s)=>e in o?$(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s,h=(o,e)=>{for(var s in e||(e={}))q.call(e,s)&&x(o,s,e[s]);if(y)for(var s of y(e))j.call(e,s)&&x(o,s,e[s]);return o};import{S as k}from"./index.esm.min-0a61ff36.js";import{a1 as w,ac as L,ad as A,p as O,ae as T,af as B}from"./index-55ccac47.js";import{d as G,an as I}from"./index-4e626338.js";import{u as R}from"./useChartDataFetch.hook-495a5af9.js";import{i as v}from"./axios-ba46900f.js";import{u as z,i as F,a as M,l as P,c as H,d as J,f as K,L as N}from"./echarts-676dbcd6.js";import"./lodash-f91682a1.js";import{u as Q}from"./useAddEvent.kooks-e46e3810.js";import{d as U,b as V,f as E,o as W,s as X,u as b}from"./vue-65382a1b.js";import"./vueRepl-a238c739.js";import"./elementPlus-07602b2b.js";import"./vuema-115cb50e.js";import"./xgplayerVue-c27b6911.js";import"./http-0d114cdb.js";import"./axios-e76ab20a.js";import"./useEvent.hook-afeb4a8c.js";const ge=U({__name:"index",props:{themeSetting:{type:Object,required:!0},themeColor:{type:Object,required:!0},chartConfig:{type:Object,required:!0}},setup(o){const e=o,{rootConfig:s,getEvents:Y}=Q(e.chartConfig,T);z([F,M,P,H,J,K]);const d=V({value:{}});function S(i,t){let{valueAxis:n,classAxis:u,colorAxis:l,typeList:_}=e.chartConfig.dataMapping,m=[],C=i.map(a=>a[u[0].column||l[0].column]);n.length>1?n.forEach((a,c,f)=>{let r=h({},g(t.series,c));r.name=a.name,r.data=i.map(p=>p[a.column]),m.push(r)}):n.length==1&&(u[0]&&l[0]?(_.forEach((a,c)=>{let f=h({},g(t.series,c));f.name=a.name,f.data=[],m.push(f)}),i.forEach((a,c,f)=>{if(u[0]&&l[0]){let r=m.find(p=>p.name==a[l[0].column]);r?r.data.push(a[n[0].column]):(r=h({},g(t.series,m.length)),r.name=a[l[0].column],r.data=[a[n[0].column]],m.push(r))}})):n.forEach((a,c,f)=>{let r=h({},g(t.series,c));r.name=a.name,r.data=i.map(p=>p[a.column]),m.push(r)})),t.yAxis.type=="category"?t.yAxis.data=C:t.xAxis.type=="category"&&(t.xAxis.data=C),t.series=m}function g(i,t){return i[t]?i[t]:L}E(()=>s.editCanvasConfig.chartThemeColor,i=>{if(!v()){const n=A[i]||A[O];e.chartConfig.option.series.forEach((u,l)=>{u.areaStyle.color=new N(0,0,0,1,[{offset:0,color:n[3]},{offset:1,color:"rgba(0,0,0, 0)"}])})}let t=G(e.chartConfig.option);S(I(e.chartConfig.data),t),d.value=w(t,e.themeSetting,B),e.chartConfig.option=d.value},{immediate:!0}),E(()=>e.chartConfig.option.dataset,()=>{d.value=e.chartConfig.option},{deep:!1});const{vChartRef:D}=R(e.chartConfig,s.requestGlobalConfig);return(i,t)=>(W(),X(b(k),{ref_key:"vChartRef",ref:D,theme:o.themeColor,option:d.value,"manual-update":b(v)(),autoresize:""},null,8,["theme","option","manual-update"]))}});export{ge as default};
