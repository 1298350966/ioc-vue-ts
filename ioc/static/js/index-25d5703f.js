var W=Object.defineProperty;var I=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;var $=(e,n,t)=>n in e?W(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,O=(e,n)=>{for(var t in n||(n={}))G.call(n,t)&&$(e,t,n[t]);if(I)for(var t of I(n))H.call(n,t)&&$(e,t,n[t]);return e};var B=(e,n,t)=>new Promise((l,i)=>{var b=a=>{try{y(t.next(a))}catch(r){i(r)}},m=a=>{try{y(t.throw(a))}catch(r){i(r)}},y=a=>a.done?l(a.value):Promise.resolve(a.value).then(b,m);y((t=t.apply(e,n)).next())});import{_ as Q}from"./index-806da9dd.js";import{B as v}from"./index-4e626338.js";/* empty css                 */import"./el-collapse-item-4ed993c7.js";/* empty css                *//* empty css                  */import{d as j,r as w,o as d,s as U,w as s,a as o,u as E,a0 as J,c as C,F as V,q as S,h as _,l as x,a6 as g,G as L,H as T,f as X,al as Y,y as Z,k as ee,z as te}from"./vue-65382a1b.js";import{E as M}from"./config-6d292a4b.js";import{_ as ae}from"./hCode-f0cdea69.js";/* empty css                *//* empty css                     *//* empty css                    *//* empty css                    */import{_ as oe}from"./EditorWorker.vue_vue_type_script_setup_true_lang-44860150.js";import{Q as se,P as ne,an as le,U as N,T as re,i as ce,ao as _e,al as ie,k as pe,p as ue,n as de}from"./elementPlus-07602b2b.js";import{_ as A}from"./xgplayerVue-c27b6911.js";/* empty css                   */import"./vueRepl-a238c739.js";import"./lodash-f91682a1.js";import"./vuema-115cb50e.js";import"./highlight-87778b4e.js";import"./editorWorker-7e4b3ef6.js";const R=e=>(L("data-v-e14f7671"),e=e(),T(),e),me={class:"go-pl-3"},fe=R(()=>_("span",{class:"func-keyword"},"async function  ",-1)),ve={class:"func-keyNameWord"},Ee=R(()=>_("p",{class:"go-pl-3 func-keyNameWord"},"}",-1)),ge=j({__name:"FunEditor",props:{baseEvent:{},targetData:{}},emits:["close"],setup(e,{expose:n,emit:t}){const l=e;let i=w(v.ON_CLICK);const b=w(!1),m=()=>{let a="",r="",h="";return b.value=Object.entries(l.baseEvent).every(([f,D])=>{try{const u=Object.getPrototypeOf(function(){return B(this,null,function*(){})}).constructor;return new u(D),!0}catch(u){return r=u.message,h=u.name,a=f,!1}}),{errorFn:a,message:r,name:h}};return n({saveEvents:()=>{if(m().errorFn){window.$message.error("事件函数错误，无法进行保存");return}Object.values(l.baseEvent).join("").trim()===""?(console.log(l.targetData),l.targetData.events.baseEvent={[v.ON_CLICK]:void 0,[v.ON_DBL_CLICK]:void 0,[v.ON_MOUSE_ENTER]:void 0,[v.ON_MOUSE_LEAVE]:void 0}):l.targetData.events.baseEvent=O({},l.baseEvent),t("close")}}),(a,r)=>{const h=oe,f=se,D=ne,u=le,k=N,F=re,p=ce,P=_e,q=ie;return d(),U(q,null,{default:s(()=>[o(u,{style:{padding:"0"}},{default:s(()=>[o(D,{modelValue:E(i),"onUpdate:modelValue":r[0]||(r[0]=c=>J(i)?i.value=c:i=c),type:"border-card",class:"demo-tabs"},{default:s(()=>[(d(!0),C(V,null,S(E(v),(c,ke)=>(d(),U(f,{label:`${E(M)[c]}-${c}`,name:c},{default:s(()=>[_("p",me,[fe,_("span",ve,x(c)+"(mouseEvent)  {",1)]),o(h,{modelValue:a.baseEvent[c],"onUpdate:modelValue":z=>a.baseEvent[c]=z,height:"480px",language:"javascript"},null,8,["modelValue","onUpdate:modelValue"]),Ee]),_:2},1032,["label","name"]))),256))]),_:1},8,["modelValue"])]),_:1}),o(P,{width:"240px;",style:{"padding-left":"15px"}},{default:s(()=>[o(p,null,{default:s(()=>[o(F,null,{default:s(()=>[(d(!0),C(V,null,S([m()],c=>(d(),C(V,{key:c},[o(k,{title:"错误函数",name:1},{default:s(()=>[g(x(c.errorFn||"暂无"),1)]),_:2},1024),o(k,{title:"错误信息",name:2},{default:s(()=>[g(x(c.name||"暂无"),1)]),_:2},1024),o(k,{title:"堆栈信息",name:3},{default:s(()=>[g(x(c.message||"暂无"),1)]),_:2},1024)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1})}}});const be=A(ge,[["__scopeId","data-v-e14f7671"]]),K=e=>(L("data-v-1e70b500"),e=e(),T(),e),ye={class:"func-annotate"},he=K(()=>_("br",null,null,-1)),we={class:"func-keyword"},xe={class:"go-ml-4"},Ce=K(()=>_("p",null,[g("}"),_("span",null,",")],-1)),De=j({__name:"index",props:{targetData:{type:Object,required:!0}},setup(e){const n=e,t=w(!0),l=w(!1);let i=w(O({},n.targetData.events.codeEvents.baseEvent));const b=()=>{l.value=!1},m=w(null),y=()=>{var a;(a=m.value)==null||a.saveEvents()};return X(()=>l.value,a=>{a&&(i.value=O({},n.targetData.events.codeEvents.baseEvent))}),(a,r)=>{const h=Y("Edit"),f=pe,D=ue,u=N,k=de,F=Q;return d(),C(V,null,[o(u,{title:"基础事件配置",name:"1"},{default:s(()=>[o(D,{class:"collapse-show-box",shadow:"never"},{default:s(()=>[Z(o(f,{class:"edit",text:"",circle:"",type:"primary",size:"small",onClick:r[0]||(r[0]=ee(p=>l.value=!0,["stop"]))},{default:s(()=>[o(h,{style:{width:"15px",height:"15px"}})]),_:1},512),[[te,t.value]]),(d(!0),C(V,null,S(E(v),p=>(d(),C("div",{key:p},[_("p",null,[_("span",ye,"// "+x(E(M)[p]),1),he,_("span",we,"async "+x(p),1),g(" (mouseEvent) { ")]),_("p",xe,[o(E(ae),{code:(e.targetData.events.codeEvents.baseEvent||{})[p]||"",language:"typescript"},null,8,["code"])]),Ce]))),128))]),_:1})]),_:1}),o(F,{"custom-class":"FunEditorDialog",modelValue:l.value,"onUpdate:modelValue":r[1]||(r[1]=p=>l.value=p),title:"基础事件编辑器"},{footer:s(()=>[o(k,null,{default:s(()=>[o(f,{onClick:b},{default:s(()=>[g("取消")]),_:1}),o(f,{type:"primary",onClick:y},{default:s(()=>[g("保存")]),_:1})]),_:1})]),default:s(()=>[o(be,{ref_key:"funEditorRef",ref:m,baseEvent:E(i),targetData:e.targetData,onClose:b},null,8,["baseEvent","targetData"])]),_:1},8,["modelValue"])],64)}}});const Je=A(De,[["__scopeId","data-v-1e70b500"]]);export{Je as default};
