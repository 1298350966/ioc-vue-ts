import"./index-4e626338.js";/* empty css                 *//* empty css                    *//* empty css               */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                     *//* empty css                  *//* empty css                 *//* empty css                        */import{$ as h,x as g,k as w,_ as V}from"./elementPlus-07602b2b.js";import{d as B,r as C,b as E,f as N,o as p,s as m,w as n,a as d,h as $,a6 as u}from"./vue-65382a1b.js";const R=B({name:"RequestHeaderTable",__name:"index",props:{target:{type:Object,required:!0,default:()=>{}},editDisabled:{type:Boolean,required:!1,default:!1}},emits:["update"],setup(r,{emit:b}){const y=r;C(!1);const _={key:"",value:"",error:!1},t=E({content:[]}),c=()=>{let l=0;if(t.content.forEach(e=>{e.key!==""&&e.value==""||e.key===""&&e.value!==""?e.error=!0:(l++,e.error=!1)}),l==t.content.length){const e={};t.content.forEach(o=>{o.key&&(e[o.key]=o.value)}),b("update",e)}},k=l=>{t.content.splice(l+1,0,{key:"",value:"",error:!1})},x=l=>{t.content.length!==1&&t.content.splice(l,1),c()};return N(()=>y.target,l=>{t.content=[];for(const e in l)t.content.push({key:e,value:l[e],error:!1});t.content.length||(t.content=[JSON.parse(JSON.stringify(_))])},{immediate:!0,deep:!0}),(l,e)=>{const o=h,f=g,i=w,v=V;return p(),m(v,{style:{width:"100%"},data:t.content,class:"go-request-header-table-box",border:""},{default:n(()=>[d(o,{type:"index",width:"50"}),d(o,{prop:"key",label:"Key"},{default:n(a=>[d(f,{modelValue:a.row.key,"onUpdate:modelValue":s=>a.row.key=s,disabled:r.editDisabled,type:"text",onBlur:c},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),d(o,{prop:"value",label:"Value"},{default:n(a=>[d(f,{modelValue:a.row.value,"onUpdate:modelValue":s=>a.row.value=s,disabled:r.editDisabled,type:"text",onBlur:c},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:1}),d(o,{prop:"date",label:"操作",width:"200px"},{default:n(a=>[$("div",null,[d(i,{class:"go-ml-2",type:"primary",disabled:r.editDisabled,onClick:s=>k(a.$index)},{default:n(()=>[u("+")]),_:2},1032,["disabled","onClick"]),d(i,{class:"go-ml-2",type:"danger",disabled:a.$index===0&&r.editDisabled,onClick:s=>x(a.$index)},{default:n(()=>[u(" - ")]),_:2},1032,["disabled","onClick"])])]),_:1}),d(o,{prop:"date",label:"结果",width:"200px"},{default:n(a=>[a.row.error?(p(),m(i,{key:0,class:"go-ml-2",text:"",type:"danger"},{default:n(()=>[u(" 格式错误 ")]),_:1})):(p(),m(i,{key:1,class:"go-ml-2",text:"",type:"primary"},{default:n(()=>[u(" 格式通过 ")]),_:1}))]),_:1})]),_:1},8,["data"])}}});export{R as _};
