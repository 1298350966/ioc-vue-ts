var F=(E,f,p)=>new Promise((d,v)=>{var h=i=>{try{m(p.next(i))}catch(_){v(_)}},n=i=>{try{m(p.throw(i))}catch(_){v(_)}},m=i=>i.done?d(i.value):Promise.resolve(i.value).then(h,n);m((p=p.apply(E,f)).next())});import{u as z,ao as G}from"./index-4e626338.js";import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                *//* empty css                  *//* empty css                 *//* empty css                */import{d as M,aI as V,i as T,a7 as j,r as x,g as P,e as A,$ as O,al as J,o as K,c as L,h as I,a as t,w as e,u as l,a6 as q,F as Q,ah as R}from"./vue-65382a1b.js";import{i as W}from"./icon-24f36b03.js";import{c as X}from"./http-0d114cdb.js";import"./el-collapse-item-4ed993c7.js";/* empty css                 *//* empty css                                                                    */import{_ as b}from"./SettingItemBox-ce5066ee.js";/* empty css                        *//* empty css               *//* empty css                     *//* empty css                        *//* empty css                     *//* empty css                        *//* empty css                  *//* empty css                   *//* empty css                                                                  *//* empty css                    *//* empty css                  *//* empty css                        */import{u as Y}from"./chartEditStore-8641b951.js";import"./vuedraggable-26823587.js";import Z from"./index-bc55acb4.js";import tt from"./index-9410fed1.js";import{w as ot,x as et,k as at,p as rt,C as nt}from"./elementPlus-07602b2b.js";import{_ as it}from"./xgplayerVue-c27b6911.js";import"./vueRepl-a238c739.js";import"./lodash-f91682a1.js";import"./vuema-115cb50e.js";import"./Close-095524a6.js";import"./axios-ba46900f.js";import"./axios-e76ab20a.js";import"./index-55ccac47.js";import"./echarts-676dbcd6.js";import"./plugin-68db7aa1.js";import"./index-806da9dd.js";/* empty css                   */import"./noData-2e4135e0.js";import"./index-f3f1aadf.js";/* empty css                         */import"./useTargetData.hook-7e83673b.js";/* empty css                */import"./el-collapse-transition-4ed993c7.js";import"./index.d-4993f78d.js";/* empty css                    *//* empty css                 *//* empty css                    *//* empty css                        */import"./index.vue_vue_type_style_index_0_lang-8b405cc0.js";import"./index-ce9a01bb.js";import"./SettingItem-0e9c370f.js";import"./index.vue_vue_type_script_setup_true_lang-bfe9d6df.js";/* empty css                  *//* empty css                 */import"./EditorWorker.vue_vue_type_script_setup_true_lang-44860150.js";import"./editorWorker-7e4b3ef6.js";import"./index-06e3ecff.js";import"./index-bf1882c4.js";import"./index-8b3ee968.js";/* empty css                                                              */import"./index-4a73a148.js";import"./hCode-f0cdea69.js";import"./highlight-87778b4e.js";import"./fileTypeEnum-eae25d97.js";/* empty css                    */import"./index-32f78d5d.js";import"./useFile.hooks-6b86f602.js";const lt={class:"chart-data-pond"},st={class:"kh-absolute-center"},pt=M({__name:"index",setup(E){V(a=>({ba5729c2:H.value}));const f=z(),{HelpOutlineIcon:p,FlashIcon:d,PulseIcon:v,FishIcon:h}=W.ionicons5,n=T("targetData"),m=Y(),{requestDataPond:i,requestInterval:_,requestIntervalUnit:mt}=j(m.getRequestGlobalConfig),c=x(!1),g=x(!1),S=x(!1);let k=0,w;const y=P(()=>{const a=n.value.request.requestDataPondId;return a?i.value.filter(r=>a===r.dataPondId)[0]:void 0}),H=P(()=>f.getAppTheme),B=()=>{g.value=!0},C=()=>F(this,null,function*(){var a;if(!((a=n.value)!=null&&a.request)){window.$message.warning("请选择一个公共接口！");return}c.value=!0;try{const o=yield X(R(n.value.request),R(m.getRequestGlobalConfig));if(c.value=!1,console.log(o),o){!(o!=null&&o.data)&&!n.value.filter&&window.$message.warning("您的数据不符合默认格式，请配置过滤器！");let{filter:r,filterNode:u}=n.value;!r&&u&&(r="return data."+u),n.value.data=G(o==null?void 0:o.data,o,r),S.value=!0;return}window.$message.warning("数据异常，请检查参数！")}catch(o){c.value=!1,window.$message.warning("数据异常，请检查参数！")}});return A(()=>{var o;const a=(o=n.value)==null?void 0:o.filter;w!==a&&k&&(w=a,C()),k++}),O(()=>{w=null}),(a,o)=>{const r=ot,u=et,D=at,N=rt,U=nt,$=J("go-skeleton");return K(),L(Q,null,[I("div",lt,[t(N,{class:"el-card-shallow"},{default:e(()=>[t(l(b),{name:"请求名称",alone:!0},{default:e(()=>{var s;return[t(u,{size:"small",placeholder:((s=y.value)==null?void 0:s.dataPondName)||"暂无",disabled:!0},{prefix:e(()=>[t(r,{component:l(h)},null,8,["component"])]),_:1},8,["placeholder"])]}),_:1}),t(l(b),{name:"接口地址",alone:!0},{default:e(()=>{var s;return[t(u,{size:"small",placeholder:((s=y.value)==null?void 0:s.dataPondRequestConfig.requestUrl)||"暂无",disabled:!0},{prefix:e(()=>[t(r,{component:l(d)},null,8,["component"])]),_:1},8,["placeholder"])]}),_:1}),I("div",{class:"edit-text",onClick:B},[I("div",st,[t(D,{type:"primary"},{default:e(()=>[q("编辑配置")]),_:1})])])]),_:1})]),t(l(b),{alone:!0},{name:e(()=>[q(" 测试 "),t(U,{trigger:"hover",content:"默认赋值给 dataset 字段"},{default:e(()=>[t(r,{size:"21",depth:3},{default:e(()=>[t(l(p))]),_:1})]),_:1})]),default:e(()=>[t(D,{type:"primary",ghost:"",onClick:C},{icon:e(()=>[t(r,null,{default:e(()=>[t(l(d))]),_:1})]),default:e(()=>[q(" 发送请求 ")]),_:1})]),_:1}),t(l(tt),{show:S.value&&!c.value,ajax:!0},null,8,["show"]),t($,{load:c.value,repeat:3},null,8,["load"]),t(l(Z),{modelShow:g.value,"onUpdate:modelShow":o[0]||(o[0]=s=>g.value=s),onSendHandle:C},null,8,["modelShow"])],64)}}});const Ro=it(pt,[["__scopeId","data-v-be755c99"]]);export{Ro as default};
