var T=(S,w,s)=>new Promise((q,a)=>{var _=l=>{try{m(s.next(l))}catch(u){a(u)}},x=l=>{try{m(s.throw(l))}catch(u){a(u)}},m=l=>l.done?q(l.value):Promise.resolve(l.value).then(_,x);m((s=s.apply(S,w)).next())});import{u as G,y as A,as as H,ao as M}from"./index-4e626338.js";import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                *//* empty css                  *//* empty css                *//* empty css                 *//* empty css               */import{d as O,aI as L,i as P,a7 as Q,r as b,g as J,e as K,$ as W,al as X,o as R,c as Y,a as e,w as o,u as t,a6 as p,l as I,h as U,s as Z,x as ee,ah as z}from"./vue-65382a1b.js";import{i as te}from"./icon-24f36b03.js";import"./el-collapse-item-4ed993c7.js";import{_ as g}from"./SettingItem-0e9c370f.js";import{_ as v}from"./SettingItemBox-ce5066ee.js";/* empty css                        *//* empty css                     *//* empty css                        *//* empty css                     *//* empty css                        *//* empty css                 *//* empty css                  *//* empty css                   *//* empty css                                                                  *//* empty css                    *//* empty css                  *//* empty css                        */import{u as oe}from"./chartEditStore-8641b951.js";import"./vuedraggable-26823587.js";import ae from"./index-3a8f60aa.js";/* empty css                   */import"./index-806da9dd.js";import"./el-collapse-transition-4ed993c7.js";import"./lodash-f91682a1.js";import"./index.d-4993f78d.js";/* empty css                    *//* empty css                 *//* empty css                    *//* empty css                        */import"./index.vue_vue_type_style_index_0_lang-4f4cbd7b.js";import"./index-36d69f8d.js";/* empty css                  *//* empty css                 */import"./EditorWorker.vue_vue_type_script_setup_true_lang-44860150.js";import"./index-0f6523f8.js";import"./index-bf1882c4.js";import"./index-f0ebc023.js";/* empty css                                                                  */import{c as re}from"./http-0d114cdb.js";import le from"./index-1e58a516.js";import{d as ne,x as se,w as ie,k as pe,p as me,C as ue}from"./elementPlus-07602b2b.js";import{_ as ce}from"./xgplayerVue-c27b6911.js";import"./vueRepl-a238c739.js";import"./vuema-115cb50e.js";import"./Close-095524a6.js";/* empty css                                                                    */import"./index-55ccac47.js";import"./echarts-676dbcd6.js";import"./plugin-68db7aa1.js";/* empty css                *//* empty css                                                              */import"./useTargetData.hook-7e83673b.js";import"./index.vue_vue_type_script_setup_true_lang-2f19740b.js";import"./editorWorker-7e4b3ef6.js";import"./axios-ba46900f.js";import"./axios-e76ab20a.js";/* empty css                         */import"./hCode-f0cdea69.js";import"./highlight-87778b4e.js";import"./fileTypeEnum-eae25d97.js";/* empty css                    */import"./index-0771e20d.js";import"./useFile.hooks-6b86f602.js";const de={class:"chart-configurations-data-ajax"},_e={class:"go-absolute-center"},fe=O({__name:"index",setup(S){L(i=>({"326184b0":B.value}));const{HelpOutlineIcon:w,FlashIcon:s,PulseIcon:q}=te.ionicons5,a=P("targetData"),_=oe(),{requestOriginUrl:x,requestInterval:m,requestIntervalUnit:l}=Q(_.getRequestGlobalConfig),u=G(),c=b(!1),f=b(!1),E=b(!1);let k=0,C;const $=()=>{f.value=!0},y=()=>T(this,null,function*(){var i;if((i=a.value)!=null&&i.request){c.value=!0;try{const r=yield re(z(a.value.request),z(_.getRequestGlobalConfig));if(c.value=!1,r){!(r!=null&&r.data)&&!a.value.filter&&window.$message.warning("您的数据不符合默认格式，请配置过滤器！");let{filter:d,filterNode:n}=a.value;!d&&n&&(d="return data."+n),a.value.data=M(r==null?void 0:r.data,r,d),E.value=!0;return}window.$message.warning("数据异常，请检查参数！")}catch(r){c.value=!1,window.$message.warning("数据异常，请检查参数！")}}}),B=J(()=>u.getAppTheme);return K(()=>{var r;const i=(r=a.value)==null?void 0:r.filter;C!==i&&k&&(C=i,y()),k++}),W(()=>{C=null}),(i,r)=>{const d=ne,n=se,h=ie,D=pe,N=me,F=ue,V=X("go-skeleton");return R(),Y("div",de,[e(N,{shadow:"never",class:"n-card-shallow",style:{padding:"0"}},{default:o(()=>[e(t(v),{name:"请求配置"},{default:o(()=>[e(t(g),{name:"类型"},{default:o(()=>[e(d,{style:{"border-radius":"5px"}},{default:o(()=>[p(I(t(a).request.requestContentType===t(A).DEFAULT?"普通请求":"SQL请求"),1)]),_:1})]),_:1}),e(t(g),{name:"方式"},{default:o(()=>[e(n,{size:"small",placeholder:t(a).request.requestHttpType||"暂无",disabled:!0},null,8,["placeholder"])]),_:1}),e(t(g),{name:"组件间隔"},{default:o(()=>[e(n,{size:"small",placeholder:`${t(a).request.requestInterval||"暂无"}`,disabled:!0},{suffix:o(()=>[p(I(t(H)[t(a).request.requestIntervalUnit]),1)]),_:1},8,["placeholder"])]),_:1}),e(t(g),{name:"全局间隔（默认）"},{default:o(()=>[e(n,{size:"small",placeholder:`${t(m)||"暂无"} `,disabled:!0},{suffix:o(()=>[p(I(t(H)[t(l)]),1)]),_:1},8,["placeholder"])]),_:1})]),_:1}),e(t(v),{name:"源地址",alone:!0},{default:o(()=>[e(n,{size:"small",placeholder:t(x)||"暂无",disabled:!0},{prefix:o(()=>[e(h,{component:t(q)},null,8,["component"])]),_:1},8,["placeholder"])]),_:1}),e(t(v),{name:"组件地址",alone:!0},{default:o(()=>[e(n,{size:"small",placeholder:t(a).request.requestUrl||"暂无",disabled:!0},{prefix:o(()=>[e(h,{component:t(s)},null,8,["component"])]),_:1},8,["placeholder"])]),_:1}),U("div",{class:"edit-text",onClick:$},[U("div",_e,[e(D,{type:"primary"},{default:o(()=>[p("编辑配置")]),_:1})])])]),_:1}),e(t(v),{alone:!0},{name:o(()=>[p(" 测试 "),e(F,{content:"默认赋值给 dataset 字段"},{default:o(()=>[e(h,{size:"21"},{default:o(()=>[e(t(w))]),_:1})]),_:1})]),default:o(()=>[e(D,{type:"primary",ghost:"",onClick:y},{icon:o(()=>[e(h,null,{default:o(()=>[e(t(s))]),_:1})]),default:o(()=>[p(" 发送请求 ")]),_:1})]),_:1}),e(t(le),{show:E.value&&!c.value,ajax:!0},null,8,["show"]),e(V,{load:c.value,repeat:3},null,8,["load"]),f.value?(R(),Z(t(ae),{key:0,modelShow:f.value,"onUpdate:modelShow":r[0]||(r[0]=j=>f.value=j),targetData:t(a),onSendHandle:y},null,8,["modelShow","targetData"])):ee("",!0)])}}});const zt=ce(fe,[["__scopeId","data-v-620595fa"]]);export{zt as default};
