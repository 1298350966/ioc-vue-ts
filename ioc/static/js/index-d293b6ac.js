var B=(l,i,n)=>new Promise((v,a)=>{var p=s=>{try{d(n.next(s))}catch(u){a(u)}},w=s=>{try{d(n.throw(s))}catch(u){a(u)}},d=s=>s.done?v(s.value):Promise.resolve(s.value).then(p,w);d((n=n.apply(l,i)).next())});import{y as U,u as J,as as z,ao as K}from"./index-4e626338.js";import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                *//* empty css                  *//* empty css                *//* empty css                 *//* empty css               */import{d as j,a7 as $,g as F,o as G,s as W,w as o,a as e,h as g,l as h,u as t,a6 as m,a0 as X,G as Y,H as Z,aI as ee,r as R,e as te,$ as oe,al as ae,c as ne,ah as V}from"./vue-65382a1b.js";import{i as se}from"./icon-24f36b03.js";import"./el-collapse-item-4ed993c7.js";import{_ as D}from"./SettingItem-0e9c370f.js";import{_ as E}from"./SettingItemBox-ce5066ee.js";/* empty css                        *//* empty css                     *//* empty css                        *//* empty css                     *//* empty css                        *//* empty css                 *//* empty css                  *//* empty css                   *//* empty css                                                                  *//* empty css                    *//* empty css                  *//* empty css                        */import"./chartEditStore-8641b951.js";import"./vuedraggable-26823587.js";import{_ as le}from"./index-806da9dd.js";/* empty css                */import{R as re,a as ie}from"./pondIndex.vue_vue_type_style_index_0_scoped_9baf3e9a_lang-63a29e5a.js";import{i as pe,al as ue,d as A,k as L,n as ce,x as me,w as de,p as _e,C as fe}from"./elementPlus-07602b2b.js";import{_ as N}from"./xgplayerVue-c27b6911.js";/* empty css                   */import"./el-collapse-transition-4ed993c7.js";import{u as ge}from"./useTargetData.hook-7e83673b.js";import"./index.d-4993f78d.js";/* empty css                    *//* empty css                 *//* empty css                    *//* empty css                        *//* empty css                  *//* empty css                 */import"./EditorWorker.vue_vue_type_script_setup_true_lang-44860150.js";import"./index-bf1882c4.js";import{c as he}from"./http-0d114cdb.js";import{C as ve}from"./index-4e612df5.js";import"./vueRepl-a238c739.js";import"./lodash-f91682a1.js";import"./vuema-115cb50e.js";import"./Close-095524a6.js";/* empty css                                                                    */import"./index-55ccac47.js";import"./echarts-676dbcd6.js";import"./plugin-68db7aa1.js";import"./editorWorker-7e4b3ef6.js";import"./axios-ba46900f.js";import"./axios-e76ab20a.js";/* empty css                         */import"./hCode-f0cdea69.js";import"./highlight-87778b4e.js";import"./fileTypeEnum-eae25d97.js";/* empty css                    */import"./useFile.hooks-6b86f602.js";const we=l=>(Y("data-v-94363042"),l=l(),Z(),l),qe={class:"go-pr-3"},Se=we(()=>g("span",null,"—— ",-1)),be=j({__name:"index",props:{modelShow:Boolean,targetData:Object,saveBtnText:String||null},emits:["update:modelShow","sendHandle"],setup(l,{emit:i}){const n=l,{chartConfig:v}=$(n.targetData),{requestContentType:a}=$(n.targetData.request),p=F({get(){return n.modelShow},set(u){i("update:modelShow",u)}}),w={[U.DEFAULT]:"普通请求",[U.SQL]:"SQL 请求"},d=()=>{i("update:modelShow",!1)},s=()=>{console.log(111),i("update:modelShow",!1),i("sendHandle")};return(u,c)=>{const q=pe,x=ue,C=A,S=L,H=ce,b=le;return G(),W(b,{modelValue:t(p),"onUpdate:modelValue":c[0]||(c[0]=f=>X(p)?p.value=f:null),title:"请求设置",onClose:d},{footer:o(()=>[e(H,{style:{width:"100%","justify-content":"space-between"}},{default:o(()=>[g("div",null,[g("span",null,"「 "+h(t(v).categoryName)+" 」",1),Se,e(C,{type:"success",style:{"border-radius":"5px"}},{default:o(()=>[m(h(w[t(a)]),1)]),_:1})]),e(S,{type:"primary",onClick:s},{default:o(()=>[m(h(l.saveBtnText||"保存 & 发送请求"),1)]),_:1})]),_:1})]),default:o(()=>[e(x,null,{default:o(()=>[e(q,{height:"70vh"},{default:o(()=>{var f;return[g("div",qe,[e(t(re)),e(t(ie),{"target-data-request":(f=l.targetData)==null?void 0:f.request},null,8,["target-data-request"])])]}),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),ye=N(be,[["__scopeId","data-v-94363042"]]),xe={class:"chart-configurations-data-ajax"},Ce={class:"go-absolute-center"},Ie=j({__name:"index",setup(l){ee(_=>({aa9644fe:f.value}));const{HelpOutlineIcon:i,FlashIcon:n,PulseIcon:v}=se.ionicons5,{targetData:a,chartEditStore:p}=ge(),{requestOriginUrl:w,requestInterval:d,requestIntervalUnit:s}=$(p.getRequestGlobalConfig),u=J(),c=R(!1),q=R(!1),x=R(!1);let C=0,S;const H=()=>{q.value=!0},b=()=>B(this,null,function*(){var _;if((_=a.value)!=null&&_.request){c.value=!0;try{const r=yield he(V(a.value.request),V(p.getRequestGlobalConfig));if(c.value=!1,r){const{data:I}=r;!I&&!a.value.filter&&window.$message.warning("您的数据不符合默认格式，请配置过滤器！"),a.value.data=K(I,r,a.value.filter),x.value=!0;return}window.$message.warning("数据异常，请检查参数！")}catch(r){c.value=!1,window.$message.warning("数据异常，请检查参数！")}}}),f=F(()=>u.getAppTheme);return te(()=>{var r;const _=(r=a.value)==null?void 0:r.filter;S!==_&&C&&(S=_,b()),C++}),oe(()=>{S=null}),(_,r)=>{const I=A,y=me,T=de,k=L,O=_e,M=fe,Q=ae("go-skeleton");return G(),ne("div",xe,[e(O,{shadow:"never",class:"n-card-shallow",style:{padding:"0"}},{default:o(()=>[e(t(E),{name:"请求配置"},{default:o(()=>[e(t(D),{name:"类型"},{default:o(()=>[e(I,{bordered:!1,type:"success",style:{"border-radius":"5px"}},{default:o(()=>[m(h(t(a).request.requestContentType===t(U).DEFAULT?"普通请求":"SQL请求"),1)]),_:1})]),_:1}),e(t(D),{name:"方式"},{default:o(()=>[e(y,{size:"small",placeholder:t(a).request.requestHttpType||"暂无",disabled:!0},null,8,["placeholder"])]),_:1}),e(t(D),{name:"组件间隔"},{default:o(()=>[e(y,{size:"small",placeholder:`${t(a).request.requestInterval||"暂无"}`,disabled:!0},{suffix:o(()=>[m(h(t(z)[t(a).request.requestIntervalUnit]),1)]),_:1},8,["placeholder"])]),_:1}),e(t(D),{name:"全局间隔（默认）"},{default:o(()=>[e(y,{size:"small",placeholder:`${t(d)||"暂无"} `,disabled:!0},{suffix:o(()=>[m(h(t(z)[t(s)]),1)]),_:1},8,["placeholder"])]),_:1})]),_:1}),e(t(E),{name:"源地址",alone:!0},{default:o(()=>[e(y,{size:"small",placeholder:t(w)||"暂无",disabled:!0},{prefix:o(()=>[e(T,{component:t(v)},null,8,["component"])]),_:1},8,["placeholder"])]),_:1}),e(t(E),{name:"组件地址",alone:!0},{default:o(()=>[e(y,{size:"small",placeholder:t(a).request.requestUrl||"暂无",disabled:!0},{prefix:o(()=>[e(T,{component:t(n)},null,8,["component"])]),_:1},8,["placeholder"])]),_:1}),g("div",{class:"edit-text",onClick:H},[g("div",Ce,[e(k,{type:"primary"},{default:o(()=>[m("编辑配置")]),_:1})])])]),_:1}),e(t(E),{alone:!0},{name:o(()=>[m(" 测试 "),e(M,{content:"默认赋值给 dataset 字段"},{default:o(()=>[e(T,{size:"21"},{default:o(()=>[e(t(i))]),_:1})]),_:1})]),default:o(()=>[e(k,{type:"primary",ghost:"",onClick:b},{icon:o(()=>[e(T,null,{default:o(()=>[e(t(n))]),_:1})]),default:o(()=>[m(" 发送请求 ")]),_:1})]),_:1}),e(t(ve),{show:x.value&&!c.value,ajax:!0},null,8,["show"]),e(Q,{load:c.value,repeat:3},null,8,["load"]),e(t(ye),{modelShow:q.value,"onUpdate:modelShow":r[0]||(r[0]=P=>q.value=P),targetData:t(a),onSendHandle:b},null,8,["modelShow","targetData"])])}}});const Vt=N(Ie,[["__scopeId","data-v-bbc25953"]]);export{Vt as default};
