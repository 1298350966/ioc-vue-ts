import{d as c,i as m,a7 as d,r as u,f as l,A as p,$ as g,o as w,c as _,u as h}from"./vue-65382a1b.js";const v=["src"],E=c({__name:"index",props:{chartConfig:{type:Object,required:!0}},setup(r){const n=r,o=m("rootIframeEmit"),{src:f,dataset:I}=d(n.chartConfig.option),a=u(null);function i(){a.value.contentWindow.postMessage(JSON.stringify(n.chartConfig.data),"*")}function s(e){if(a.value.contentWindow==e.source){let t=JSON.parse(e.data);console.log("window接受消息",t),t.eventName&&o&&o.emit(t.eventName,t.data)}}return l(()=>n.chartConfig.data,e=>{a.value.contentWindow.postMessage(JSON.stringify(e),"*")},{}),p(()=>{window.addEventListener("message",s,!1)}),g(()=>{window.removeEventListener("message",s,!1)}),(e,t)=>(w(),_("iframe",{ref_key:"IframeRefs",ref:a,frameborder:"0",class:"content",src:h(f),onLoad:i},null,40,v))}});export{E as default};
