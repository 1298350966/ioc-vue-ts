var V=(i,a,c)=>new Promise((s,n)=>{var f=o=>{try{v(c.next(o))}catch(u){n(u)}},g=o=>{try{v(c.throw(o))}catch(u){n(u)}},v=o=>o.done?s(o.value):Promise.resolve(o.value).then(f,g);v((c=c.apply(i,a)).next())});import{_ as G}from"./index-806da9dd.js";import{d as A,ar as C}from"./index-4e626338.js";/* empty css                *//* empty css                     *//* empty css                    */import"./el-collapse-item-4ed993c7.js";/* empty css                   *//* empty css               *//* empty css                *//* empty css                 *//* empty css                  */import{_ as H}from"./hCode-f0cdea69.js";import{_ as P}from"./EditorWorker.vue_vue_type_script_setup_true_lang-44860150.js";import{g as J}from"./plugin-68db7aa1.js";import{u as K}from"./chartEditStore-8641b951.js";import{k as L,n as O,p as Q,d as W,an as X,o as Y,U as Z,T as ee,i as te,ao as ae,al as oe}from"./elementPlus-07602b2b.js";import{d as le,i as ne,a7 as S,r as y,g as re,f as se,o as k,c as ie,u as h,s as b,w as t,h as m,a as e,a6 as r,F as ce,G as ue,H as de}from"./vue-65382a1b.js";import{_ as _e}from"./xgplayerVue-c27b6911.js";/* empty css                   */import"./vueRepl-a238c739.js";import"./lodash-f91682a1.js";import"./vuema-115cb50e.js";import"./highlight-87778b4e.js";import"./editorWorker-7e4b3ef6.js";import"./index-55ccac47.js";import"./echarts-676dbcd6.js";const x=i=>(ue("data-v-55ee57c9"),i=i(),de(),i),pe=x(()=>m("p",null,[m("span",{class:"func-keyword"},"function"),r("  filter(data, res)  { ")],-1)),me={class:"go-ml-4"},fe=x(()=>m("p",null,"}",-1)),ge=x(()=>m("span",{class:"func-keyword"},"function",-1)),ve=le({__name:"index",setup(i){const a=ne("targetData"),c=K();S(a.value.request),S(c.getRequestGlobalConfig);const s=y(!1),n=y(a.value.filter||"return data"),f=y(!1),g=y(""),v=()=>V(this,null,function*(){try{window.$message.warning("数据异常，请检查参数！")}catch(d){window.$message.warning("数据异常，请检查参数！")}}),o=re(()=>{try{const d=new Function("data","res",n.value),l=A(g.value),_=d(l==null?void 0:l.data,l);return f.value=!1,C(_)}catch(d){return f.value=!0,"过滤函数错误"}}),u=()=>{s.value=!0},j=()=>{J({message:"是否删除过滤器",onPositiveCallback:()=>{a.value.filter=void 0}})},D=()=>{s.value=!1},B=()=>{if(f.value){window.$message.error("过滤函数错误，无法进行保存");return}a.value.filter=n.value,D()};return se(()=>s.value,d=>{d&&(v(),n.value=a.value.filter||"return data")}),(d,l)=>{const _=H,w=L,I=O,z=Q,F=W,T=X,$=Y,E=Z,M=ee,N=te,R=ae,U=oe,q=G;return k(),ie(ce,null,[h(a).filter?(k(),b(z,{key:0,shadow:"never"},{default:t(()=>[pe,m("div",me,[e(_,{code:h(a).filter,language:"typescript"},null,8,["code"])]),fe,e(I,{alignment:"end"},{default:t(()=>[e(w,{type:"primary",tertiary:"",size:"small",onClick:u},{default:t(()=>[r(" 编辑 ")]),_:1}),e(w,{tertiary:"",size:"small",onClick:j},{default:t(()=>[r(" 删除 ")]),_:1})]),_:1})]),_:1})):(k(),b(w,{key:1,onClick:u},{default:t(()=>[r(" 新增过滤器 ")]),_:1})),e(q,{"custom-class":"FunEditorDialog",modelValue:s.value,"onUpdate:modelValue":l[1]||(l[1]=p=>s.value=p),title:"过滤器函数编辑器"},{footer:t(()=>[e(w,{onClick:D},{default:t(()=>[r("取消")]),_:1}),e(w,{type:"primary",onClick:B},{default:t(()=>[r("保存")]),_:1})]),default:t(()=>[e(U,null,{default:t(()=>[e(T,{style:{padding:"0"}},{default:t(()=>[m("div",null,[e(F,{size:"large",type:"info"},{default:t(()=>[ge,r("  filter(data, res)  { ")]),_:1}),e(h(P),{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=p=>n.value=p),height:"410px",language:"javascript"},null,8,["modelValue"]),e(F,{size:"large",type:"info"},{default:t(()=>[r("}")]),_:1})])]),_:1}),e($,{direction:"vertical",style:{height:"480px"}}),e(R,{width:"300px"},{default:t(()=>[e(N,{height:"480px"},{default:t(()=>[e(M,{"model-value":[1,2,3]},{default:t(()=>[e(E,{title:"默认过滤数据(data)",name:1},{default:t(()=>{var p;return[e(_,{code:h(C)((p=g.value)==null?void 0:p.data)||"暂无",language:"json","word-wrap":!0},null,8,["code"])]}),_:1}),e(E,{title:"接口返回数据(res)",name:2},{default:t(()=>[e(_,{code:h(C)(g.value)||"暂无",language:"json","word-wrap":!0},null,8,["code"])]),_:1}),e(E,{title:"过滤器结果",name:3},{default:t(()=>[e(_,{code:o.value||"暂无",language:"json","word-wrap":!0},null,8,["code"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});const Je=_e(ve,[["__scopeId","data-v-55ee57c9"]]);export{Je as default};
