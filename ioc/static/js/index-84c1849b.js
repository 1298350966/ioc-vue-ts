import{g as W}from"./index-4e626338.js";/* empty css                *//* empty css                 *//* empty css                  */import{d as z,r as I,g as D,aJ as T,A as M,o as c,c as h,h as v,a as i,u as r,s as $,a5 as X,x as B,G as N,H as P,w as g,a6 as S,F as A,q as L,m as Y,l as G,a0 as j,al as R,k as Z}from"./vue-65382a1b.js";import{l as q}from"./lodash-f91682a1.js";import{_ as ee}from"./index-806da9dd.js";/* empty css                *//* empty css                *//* empty css                 *//* empty css                     */import{u as H}from"./chartEditStore-8641b951.js";import{_ as O}from"./vueRepl-a238c739.js";/* empty css               *//* empty css                  *//* empty css                        *//* empty css                     */import{e as te,a as ne,b as oe}from"./config-1821c59e.js";import{u as le}from"./useTargetData.hook-7e83673b.js";import{ap as ie,i as se,ao as ae,x as re,w as J,p as ge,k as K,an as pe,al as ue,S as de}from"./elementPlus-07602b2b.js";import{_ as F}from"./xgplayerVue-c27b6911.js";import{C as ce}from"./config-d82a35a6.js";import{C as _e}from"./Close-095524a6.js";import"./vuema-115cb50e.js";/* empty css                   */import"./index-55ccac47.js";import"./echarts-676dbcd6.js";import"./plugin-68db7aa1.js";const Q=p=>(N("data-v-4582ebd1"),p=p(),P(),p),fe={class:"EventTrigger"},me={class:"grid grid-items-center grid-gap-15px grid-cols-2"},ve={class:"grid grid-gap-5px"},Ce=Q(()=>v("span",null,"类型",-1)),ye={class:"grid grid-gap-5px"},Ee=Q(()=>v("span",null,"目标",-1)),he=z({__name:"EventTrigger",props:{triggerConfig:{},eventDes:{}},setup(p){const s=p,{getStorageInfo:e}=H(),{targetData:d}=le(),n=I(null),C=I([]);function k(o){s.triggerConfig.targetId="",n.value=null,y(o)}function y(o){let a=[];o=="componentList"?e.componentList.forEach(l=>{a.push({label:`${l.chartConfig.title}(${l.id})`,value:l.id})}):o=="globalDialog"&&e.globalDialog.forEach(l=>{a.push({label:`${l.attrs.title}(${l.id})`,value:l.id})}),C.value=a}function V(){let{type:o,targetId:a}=s.triggerConfig;o=="componentList"?n.value=e.componentList.find(l=>a==l.id):o=="globalDialog"?n.value=e.globalDialog.find(l=>a==l.id):n.value=null}function t(){s.triggerConfig.updateValue=null,V()}const u=D(()=>s.triggerConfig.type=="componentList"?["MapAmap"].includes(n.value.key)?T(()=>O(()=>import("./index-8349abaf.js"),["static/js/index-8349abaf.js","static/js/vueRepl-a238c739.js","static/js/vue-65382a1b.js","static/js/lodash-f91682a1.js","static/js/index-4e626338.js","static/js/elementPlus-07602b2b.js","static/js/vuema-115cb50e.js","static/js/xgplayerVue-c27b6911.js","static/css/index-bc362552.css","static/js/config-1821c59e.js","static/css/el-tab-pane-eecd8b5a.css"])):T(()=>O(()=>import("./index-6585c5fc.js"),["static/js/index-6585c5fc.js","static/js/index-4e626338.js","static/js/vue-65382a1b.js","static/js/elementPlus-07602b2b.js","static/js/vuema-115cb50e.js","static/js/lodash-f91682a1.js","static/js/xgplayerVue-c27b6911.js","static/js/vueRepl-a238c739.js","static/css/index-bc362552.css","static/js/el-tooltip-4ed993c7.js","static/js/config-1821c59e.js","static/css/el-tab-pane-eecd8b5a.css","static/css/el-radio-62e14d58.css","static/css/el-button-46bfe638.css","static/css/el-table-5bb7fb37.css","static/css/el-checkbox-e117c7b0.css","static/css/el-tag-2fca7a82.css","static/css/el-popper-b17b6765.css","static/css/el-scrollbar-df5aa9a0.css","static/css/el-table-column-d409cc84.css","static/css/el-input-9bb615ea.css","static/css/el-virtual-list-54336272.css","static/css/el-select-v2-ed199d64.css"])):s.triggerConfig.type=="globalDialog"?T(()=>O(()=>import("./index-a4834c50.js"),["static/js/index-a4834c50.js","static/js/index-4e626338.js","static/js/vue-65382a1b.js","static/js/elementPlus-07602b2b.js","static/js/vuema-115cb50e.js","static/js/lodash-f91682a1.js","static/js/xgplayerVue-c27b6911.js","static/js/vueRepl-a238c739.js","static/css/index-bc362552.css","static/js/el-tooltip-4ed993c7.js","static/js/SettingItem-0e9c370f.js","static/css/el-space-417b6673.css","static/css/SettingItem-a3b6dbf3.css","static/js/config-1821c59e.js","static/css/el-tab-pane-eecd8b5a.css","static/css/el-table-5bb7fb37.css","static/css/el-checkbox-e117c7b0.css","static/css/el-tag-2fca7a82.css","static/css/el-popper-b17b6765.css","static/css/el-scrollbar-df5aa9a0.css","static/css/el-button-46bfe638.css","static/css/el-table-column-d409cc84.css","static/css/el-input-9bb615ea.css","static/css/el-virtual-list-54336272.css","static/css/el-select-v2-ed199d64.css","static/css/el-switch-4d96cdcc.css"])):null),_=D(()=>s.eventDes?(s.eventDes.setVars&&s.eventDes.setVars(d.value),s.eventDes.vars):[]);return M(()=>{y(s.triggerConfig.type),V()}),(o,a)=>{const l=ie;return c(),h("div",fe,[v("div",me,[v("div",ve,[Ce,i(l,{size:"small",modelValue:o.triggerConfig.type,"onUpdate:modelValue":a[0]||(a[0]=m=>o.triggerConfig.type=m),options:r(te),onChange:k},null,8,["modelValue","options"])]),v("div",ye,[Ee,i(l,{size:"small",modelValue:o.triggerConfig.targetId,"onUpdate:modelValue":a[1]||(a[1]=m=>o.triggerConfig.targetId=m),options:r(C),onChange:t,onVisibleChange:a[2]||(a[2]=m=>y(o.triggerConfig.type))},null,8,["modelValue","options"])])]),r(n)?(c(),$(X(r(u)),{key:0,triggerConfig:o.triggerConfig,targetConfig:r(n),mappingFieldOptions:r(_)},null,8,["triggerConfig","targetConfig","mappingFieldOptions"])):B("",!0)])}}});const Ve=F(he,[["__scopeId","data-v-4582ebd1"]]),De=p=>(N("data-v-c5a12f1d"),p=p(),P(),p),ke={class:"common-layout"},be=["onClick"],Ie={class:"grid grid-items-center grid-gap-5px mb-15px"},$e=De(()=>v("label",null,"事件名称",-1)),we=z({__name:"EventConfigDialog",props:{modelValue:{type:Boolean},eventConfig:{}},emits:["update:modelValue","save"],setup(p,{emit:s}){const e=p,d=D({get(){return e.modelValue},set(t){s("update:modelValue",t)}}),n=D(()=>ce),C=D(()=>n.value?Object.keys(n.value).map(t=>({label:n.value[t].name,value:t})):ne),k=D(()=>{if(!n.value)return null;const t=n.value[e.eventConfig.type];return t||null});function y(){e.eventConfig.trigger.push(q.cloneDeep(oe))}H(),I([]);function V(){s("save",e.eventConfig)}return M(()=>{e.eventConfig.type||(e.eventConfig.type=C.value[0].value||""),console.log("output->",e.eventConfig.type)}),(t,u)=>{const _=se,o=ae,a=re,l=J,m=ge,w=K,E=pe,b=ue,U=ee;return r(d)?(c(),$(U,{key:0,title:"事件配置",modelValue:r(d),"onUpdate:modelValue":u[1]||(u[1]=f=>j(d)?d.value=f:null)},{footer:g(()=>[i(w,{type:"primary",onClick:V},{default:g(()=>[S("保存")]),_:1})]),default:g(()=>[v("div",ke,[i(b,{class:"h-180"},{default:g(()=>[i(b,null,{default:g(()=>[i(o,{width:"260px",class:"aside"},{default:g(()=>[i(_,{"view-style":"padding: 10px 0;"},{default:g(()=>[(c(!0),h(A,null,L(r(C),f=>(c(),h("div",{class:Y([{select:f.value==t.eventConfig.type},"item-box"]),key:f.value,onClick:x=>t.eventConfig.type=f.value},G(f.label),11,be))),128))]),_:1})]),_:1}),i(E,null,{default:g(()=>[v("div",Ie,[$e,i(a,{placeholder:"请输入事件名称",modelValue:t.eventConfig.name,"onUpdate:modelValue":u[0]||(u[0]=f=>t.eventConfig.name=f)},null,8,["modelValue"])]),(c(!0),h(A,null,L(t.eventConfig.trigger,(f,x)=>(c(),$(m,{class:"mb-15px",key:x},{default:g(()=>[i(l,{size:"20px",class:"closeIcon",onClick:Le=>t.eventConfig.trigger.splice(x,1)},{default:g(()=>[i(r(_e))]),_:2},1032,["onClick"]),i(Ve,{triggerConfig:f,eventDes:r(k)},null,8,["triggerConfig","eventDes"])]),_:2},1024))),128)),i(w,{class:"w-100%",onClick:y},{default:g(()=>[S("添加触发动作")]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1},8,["modelValue"])):B("",!0)}}});const xe=F(we,[["__scopeId","data-v-c5a12f1d"]]),Te={class:"eChartEvent"},Oe=["onClick"],Se={class:"flex-1 kh-nowrap"},Ae=z({__name:"index",props:{eventsConfig:{}},setup(p){const s=p,e=I(!1),d=I({type:"",trigger:[],name:""});let n=null;function C(){n=null,d.value={type:"",trigger:[],name:W()},e.value=!0}function k(){s.eventsConfig.push(d.value),e.value=!1}function y(u,_){d.value=q.cloneDeep(u),n=_,e.value=!0}function V(){s.eventsConfig[n]=d.value,e.value=!1}function t(u){s.eventsConfig.splice(u,1)}return(u,_)=>{const o=K,a=de,l=R("DeleteFilled"),m=J,w=R("ArrowRight");return c(),h("div",Te,[i(o,{style:{width:"100%","margin-bottom":"10px"},type:"primary",onClick:C},{default:g(()=>[S("添加")]),_:1}),u.eventsConfig.length==0?(c(),$(a,{key:0,description:"无事件","image-size":100})):(c(!0),h(A,{key:1},L(u.eventsConfig,(E,b)=>(c(),h("div",{class:"kh-flex-between eventBox",key:b,onClick:U=>y(E,b)},[v("span",Se,G(E.name),1),i(m,{size:"18",onClick:Z(t,["stop"])},{default:g(()=>[i(l)]),_:1},8,["onClick"]),i(m,{size:"18"},{default:g(()=>[i(w)]),_:1})],8,Oe))),128)),r(e)?(c(),$(xe,{key:2,modelValue:r(e),"onUpdate:modelValue":_[0]||(_[0]=E=>j(e)?e.value=E:null),eventConfig:r(d),onSave:_[1]||(_[1]=E=>r(n)==null?k():V())},null,8,["modelValue","eventConfig"])):B("",!0)])}}});const gt=F(Ae,[["__scopeId","data-v-45ef8999"]]);export{gt as default};
