var O=Object.defineProperty;var m=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var d=(r,t,p)=>t in r?O(r,t,{enumerable:!0,configurable:!0,writable:!0,value:p}):r[t]=p,E=(r,t)=>{for(var p in t||(t={}))$.call(t,p)&&d(r,p,t[p]);if(m)for(var p of m(t))j.call(t,p)&&d(r,p,t[p]);return r};import{b as u,C as v}from"./config-502f40fc.js";import{a as C}from"./useAddEvent.kooks-e46e3810.js";import{g as P,h as b,i as D,j as w,k as x,l as G,m as I,n as N,o as k,p as S}from"./vue3BaiduMapGl-635dd965.js";import{d as q,i as F,g as B,f as H,N as J,o as h,c as y,F as M,q as z,s as A,a3 as T,ao as W,u as g,a5 as K,h as Q,j as R}from"./vue-65382a1b.js";function U(r){function t(n){let c={};return Object.keys(r.dataMapping).forEach(i=>{const{type:l,key:f}=r.dataMapping[i];try{if(l=="json|LngLat"){const{lng:s,lat:o}=r.dataMapping[i];let e=[];JSON.parse(n[f]).forEach(a=>{a[s]&&a[o]&&e.push({lng:a[s],lat:a[o]})}),c[i]=e}else if(l=="json|LngLatArray"){let s=JSON.parse(n[f]),o=[];s.forEach(e=>{e[0]&&e[1]&&o.push({lng:e[0],lat:e[1]})}),c[i]=o}else if(l=="array|LngLat"){const{lng:s,lat:o}=r.dataMapping[i];let e=[];n[f].forEach(a=>{a[s]&&a[o]&&e.push({lng:a[s],lat:a[o]})}),c[i]=e}else if(l=="array|LngLatArray")if(Array.isArray(n[f])){let s=[];n[f].forEach(o=>{s.push({lng:o[0],lat:o[1]})}),c[i]=s}else window.$message.error("数据映射格式不匹配,请检查数据映射配置");else if(l=="LngLat"){const{lng:s,lat:o}=r.dataMapping[i];n[s]&&n[o]&&(c[i]={lng:n[s],lat:n[o]})}else c[i]={lng:n[f][0],lat:n[f][1]}}catch(s){window.$message.error("数据映射格式不匹配,请检查数据映射配置"),console.error("数据映射格式不匹配"),console.error(s)}}),c}function p(n,c){let i=t(n);Object.keys(i).forEach(l=>{c.hasOwnProperty(l)&&(c[l]=i[l])})}return{getDataMapping:t,setDataMappingOptions:p}}const V={ref:"content"},ee=q({name:"coverGroup",components:{BCircle:P,BLabel:b,BMarker:D,BMarker3d:w,BPolygon:x,BPolyline:G,BBezierCurve:I,BInfoWindow:N,BPrism:k,BGroundOverlay:S},__name:"index",props:{config:{type:Object,required:!0}},setup(r){const t=r,p=F("mapIns"),n=B(()=>t.config.type||null),{rootConfig:c,getEvents:i}=C(t.config,v),{setDataMappingOptions:l}=U(t.config),f=B(()=>{let s=[];return t.config.data.forEach(o=>{let e=E({},t.config.options);Object.keys(t.config.options).forEach(a=>{Object.keys(o).includes(a)&&(e[a]=o[a])}),l(o,e),e.extData=o,[u.Marker].includes(t.config.type)?e.position&&s.push(e):t.config.type==u.Circle?e.center&&s.push(e):[u.Polyline,u.Polygon].includes(t.config.type)?e.path&&s.push(e):s.push(e)}),s});return H(f,s=>{J(()=>{let o=[];[u.Marker].includes(t.config.type)?s.forEach(e=>{e.position&&o.push(e.position)}):t.config.type==u.Circle?s.forEach(e=>{e.center&&o.push(e.center)}):[u.Polyline,u.Polygon].includes(t.config.type)&&s.forEach(e=>{e.path&&o.push(...e.path)}),p.setCoverGroupViewport(o)})}),(s,o)=>(h(),y(M,null,[(h(!0),y(M,null,z(g(f),(e,a)=>(h(),A(K(g(n)),T({key:a},e,W(g(i))),null,16))),128)),Q("div",V,[R(s.$slots,"default")],512)],64))}});export{ee as _};
