import{_ as G}from"./index-806da9dd.js";import{g as L}from"./index-4e626338.js";/* empty css                     *//* empty css                     *//* empty css                *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                  */import{u as M}from"./chartEditStore-8641b951.js";import{l as O}from"./lodash-f91682a1.js";import{x as j,k as A,z as H,a3 as J,a2 as K,p as P,y as Q,i as W}from"./elementPlus-07602b2b.js";import{d as X,r as v,b as Y,o as m,s as f,w as l,a as e,a6 as g,u as s,h as b,c as h,F as k,q as E,x as Z,a0 as ee}from"./vue-65382a1b.js";/* empty css                   */import"./xgplayerVue-c27b6911.js";import"./vueRepl-a238c739.js";import"./vuema-115cb50e.js";import"./index-55ccac47.js";import"./echarts-676dbcd6.js";import"./plugin-68db7aa1.js";const le={class:"kh-flex-between",style:{width:"100%"}},ae={class:"kh-flex-between",style:{width:"100%"}},we=X({__name:"addVar",props:{data:{}},emits:["modelValue:data"],setup(te,{expose:x,emit:oe}){const{addGlobalVar:U}=M(),y=()=>({key:"",name:"",type:"string",value:""}),u=v(),w=()=>({name:"",key:L(),entitys:[y()]}),n=v(!1);let o=Y(w());const C=[{label:"字符串",value:"string"},{label:"数字",value:"number"},{label:"数组",value:"array"},{label:"布尔值",value:"boolean"}],F=()=>{n.value=!0},V=()=>{n.value=!1},D=()=>{u.value.validate(d=>{if(d)console.log(o),U(O.cloneDeep(o)),V(),u.value&&u.value.resetFields();else return!1})},q=()=>{o.entitys.push(y())},B=d=>{o.entitys.splice(d,1)};return x({openDialog:F,closeDialog:V}),(d,i)=>{const c=j,_=A,p=H,I=J,$=K,N=P,S=Q,R=W,T=G;return m(),f(T,{"custom-class":"FunEditorDialog",modelValue:s(n),"onUpdate:modelValue":i[1]||(i[1]=a=>ee(n)?n.value=a:null),title:"添加变量"},{footer:l(()=>[e(_,{type:"primary",onClick:D},{default:l(()=>[g("添加")]),_:1})]),default:l(()=>[e(R,{height:"560px","wrap-style":"padding:20px;"},{default:l(()=>[s(o)?(m(),f(S,{key:0,model:s(o),ref_key:"ruleFormRef",ref:u,"label-width":"100px"},{default:l(()=>[e(p,{label:"数据名称",prop:"name",rules:[{required:!0,message:"请输入数据名称",trigger:"change"}]},{default:l(()=>[b("div",le,[e(c,{class:"flex-1",modelValue:s(o).name,"onUpdate:modelValue":i[0]||(i[0]=a=>s(o).name=a),placeholder:"请输入数据名称"},null,8,["modelValue"]),e(_,{style:{"margin-left":"10px"},onClick:q,type:"primary"},{default:l(()=>[g(" 添加 ")]),_:1})])]),_:1}),(m(!0),h(k,null,E(s(o).entitys,(a,r)=>(m(),f(N,{key:r,shadow:"never",style:{"margin-bottom":"15px"}},{default:l(()=>[e(p,{label:"对象名称",prop:`entitys.${r}.name`,rules:[{required:!0,message:"请输入实体名称",trigger:"change"}]},{default:l(()=>[b("div",ae,[e(c,{class:"flex-1",modelValue:a.name,"onUpdate:modelValue":t=>a.name=t,placeholder:"请输入实体名称"},null,8,["modelValue","onUpdate:modelValue"]),e(_,{style:{"margin-left":"10px"},onClick:t=>B(r),type:"danger"},{default:l(()=>[g(" 删除 ")]),_:2},1032,["onClick"])])]),_:2},1032,["prop"]),e(p,{label:"字段名称",prop:`entitys.${r}.key`,rules:[{required:!0,message:"请输入实体字段",trigger:"change"}]},{default:l(()=>[e(c,{modelValue:a.key,"onUpdate:modelValue":t=>a.key=t,placeholder:"请输入实体字段"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"]),e(p,{label:"字段类型",prop:`entitys.${r}.type`,rules:[{required:!0,message:"请输入字段类型",trigger:"change"}]},{default:l(()=>[e($,{modelValue:a.type,"onUpdate:modelValue":t=>a.type=t},{default:l(()=>[(m(),h(k,null,E(C,(t,z)=>e(I,{key:z,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"]),e(p,{label:"默认数据",prop:`entitys.${r}.value`},{default:l(()=>[e(c,{modelValue:a.value,"onUpdate:modelValue":t=>a.value=t,placeholder:"请输入默认数据"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024))),128))]),_:1},8,["model"])):Z("",!0)]),_:1})]),_:1},8,["modelValue"])}}});export{we as default};
