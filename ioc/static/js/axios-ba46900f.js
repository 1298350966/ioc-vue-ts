var i=(t,e,r)=>new Promise((o,a)=>{var h=n=>{try{u(r.next(n))}catch(f){a(f)}},l=n=>{try{u(r.throw(n))}catch(f){a(f)}},u=n=>n.done?o(n.value):Promise.resolve(n.value).then(h,l);u((r=r.apply(t,e)).next())});import{a as w}from"./axios-e76ab20a.js";import{ab as p,ac as c,ad as m}from"./index-4e626338.js";import{aH as P}from"./vue-65382a1b.js";const g=(t,e,r)=>{if(r){const o=v(t,"href");d(o);return}if(e){c.replace({name:t});return}c.push({name:t})},v=(t,e)=>{try{const r=c.resolve({name:t});return e?r[e]:r}catch(r){window.$message.warning("查询路由信息失败，请联系管理员！")}},b=(t,e,r,o)=>{let a="";if(e!=null&&e.length&&(a=`${t}/${e.join("/")}`),o)return d(a);if(r){c.replace({path:a});return}c.push({path:a})},R=t=>{if(!t)return!1;const e=p.get(t);if(!e)return!1;g(e)},d=t=>window.open(t,"_blank"),_=()=>document.location.hash.includes("preview"),j=()=>{try{return P().params}catch(t){window.$message.warning("查询路由信息失败，请联系管理员！")}},x=()=>{try{return document.location.hash.split("?")[0].split("/").pop()||""}catch(t){return window.$message.warning("查询路由信息失败，请联系管理员！"),""}},s=w.create({baseURL:{}.VITE_PRO_PATH,timeout:m.TIMEOUT});s.interceptors.request.use(t=>(t.headers["X-Requested-With"]="XMLHttpRequest",t),t=>{Promise.reject(t)});s.interceptors.response.use(t=>{let{status:e}=t;if(e===200||e===201){const{code:r,errorcode:o,redirect:a}=t.data;return r==null||r===m.DATA_SUCCESS?Promise.resolve(t.data):(p.get(r)&&R(r),o==="no login"&&(location.href=a),t.data)}},t=>{const{status:e,data:r}=t.response;return(e===401||e===404)&&r.errorcode==="no login"&&(location.href=r.redirect),Promise.reject(t)});function A(t,e=""){return i(this,null,function*(){return yield s.get(t,{params:e})})}function B(t,e=void 0){return i(this,null,function*(){return yield s.post(t,e)})}function C(t,e=void 0){return i(this,null,function*(){return yield s.post(t,e,{headers:{"Content-Type":"multipart/form-data"}})})}function D(t,e=void 0){return i(this,null,function*(){return yield s.patch(t,e)})}export{A as G,B as P,x as a,D as b,s as c,j as d,C as e,v as f,_ as i,b as r};
