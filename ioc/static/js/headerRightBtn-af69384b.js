var O=Object.defineProperty;var C=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable;var T=(o,t,e)=>t in o?O(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e,f=(o,t)=>{for(var e in t||(t={}))x.call(t,e)&&T(o,e,t[e]);if(C)for(var e of C(t))V.call(t,e)&&T(o,e,t[e]);return o};var v=(o,t,e)=>new Promise((w,d)=>{var m=n=>{try{l(e.next(n))}catch(_){d(_)}},I=n=>{try{l(e.throw(n))}catch(_){d(_)}},l=n=>n.done?w(n.value):Promise.resolve(n.value).then(m,I);l((e=e.apply(o,t)).next())});import{r as H,ay as k,e as D,a as g,s as R,az as L,aA as N}from"./index-4e626338.js";/* empty css                 */import{_ as P}from"./index-806da9dd.js";/* empty css                   *//* empty css                  */import{e as F,f as b,r as q}from"./axios-ba46900f.js";import{d as U,aG as j,aH as z,r as J,ay as M,o as S,s as y,w as h,c as W,F as $,q as K,u as A,a5 as Q,h as G,l as X,a as B,a0 as Y,G as Z,H as tt}from"./vue-65382a1b.js";import{u as et}from"./chartEditStore-8641b951.js";import{i as ot}from"./icon-24f36b03.js";import{u as at,b as st}from"./views-99f1c264.js";import{k as nt,r as rt,n as it}from"./elementPlus-07602b2b.js";import{_ as ct}from"./xgplayerVue-c27b6911.js";import"./vueRepl-a238c739.js";import"./lodash-f91682a1.js";import"./vuema-115cb50e.js";import"./axios-e76ab20a.js";import"./index-55ccac47.js";import"./echarts-676dbcd6.js";import"./plugin-68db7aa1.js";import"./Close-095524a6.js";const lt="/api/upload",pt=o=>v(void 0,null,function*(){let t=new FormData;return t.append("file",o),F(lt,t)}),dt=o=>(Z("data-v-0d829f66"),o=o(),tt(),o),mt=dt(()=>G("div",null,null,-1)),_t=U({__name:"headerRightBtn",setup(o){const t=j(),{BrowsersOutlineIcon:e,SendIcon:w}=ot.ionicons5,d=et(),m=z(),I=()=>{const u=b(k.CHART_PREVIEW_NAME,"href");if(!u)return;const{id:i}=m.params,r=typeof i=="string"?i:i[0],c=d.getStorageInfo,a=D(g.GO_CHART_STORAGE_LIST)||[];if(a!=null&&a.length){const p=a.findIndex(s=>s.id===r);p!==-1?(a.splice(p,1,f({id:r},c)),R(g.GO_CHART_STORAGE_LIST,a)):(a.push(f({id:r},c)),R(g.GO_CHART_STORAGE_LIST,a))}else R(g.GO_CHART_STORAGE_LIST,[f({id:r},c)]);q(u,[r],void 0,!0)},l=J(!1),n=()=>v(this,null,function*(){const{id:u}=m.params,{type:i}=m.query,r=document.querySelector(".go-edit-range"),c=JSON.stringify(d.getStorageInfo);console.log("config",c);const a=yield L(r);let p=yield pt(N(a)),s=p.data&&p.data.path,E={name:d.getEditCanvasConfig.projectName,imgSrc:s,config:c};i=="update"?yield at(u,E):yield st(E),window.$message.success("保存成功"),t.go(-1)}),_=M([{select:!0,title:"预览",icon:H(e),event:I},{select:!0,title:"发布",icon:H(w),event:n}]);return(u,i)=>{const r=nt,c=rt,a=P,p=it;return S(),y(p,{class:"go-mt-0"},{default:h(()=>[(S(!0),W($,null,K(A(_),s=>(S(),y(r,{key:s.title,ghost:"",onClick:s.event},{icon:h(()=>[(S(),y(Q(s.icon)))]),default:h(()=>[G("span",null,X(s.title),1)]),_:2},1032,["onClick"]))),128)),B(c),B(a,{modelValue:A(l),"onUpdate:modelValue":i[0]||(i[0]=s=>Y(l)?l.value=s:null),title:"发布",width:"500px"},{default:h(()=>[mt]),_:1},8,["modelValue"])]),_:1})}}});const Dt=ct(_t,[["__scopeId","data-v-0d829f66"]]);export{Dt as default};
