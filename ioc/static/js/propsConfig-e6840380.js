import{_ as oe}from"./index-806da9dd.js";import"./index-4e626338.js";/* empty css                     *//* empty css                    *//* empty css                */import{_ as M}from"./EditorWorker.vue_vue_type_script_setup_true_lang-44860150.js";/* empty css               *//* empty css                     *//* empty css                 *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                  *//* empty css                        *//* empty css                 *//* empty css                  *//* empty css                  *//* empty css                        */import{l as A}from"./lodash-f91682a1.js";import{E as ae,a as ne,_ as se}from"./EventTrigger-6c8c8146.js";/* empty css                */import{w as ue,p as D,k as R,Q as q,P as J,x as re,z as ie,$ as de,a3 as pe,a2 as me,N as ce,ae as _e,_ as fe,y as ge,d as be,i as ve}from"./elementPlus-07602b2b.js";import{d as $,r as C,al as ye,o as p,c as k,a as e,w as t,F as P,q as L,s as g,a6 as f,x as Q,u as i,a0 as F,A as Ve,f as Ce,g as B,h as z,l as he}from"./vue-65382a1b.js";import{_ as Ee}from"./xgplayerVue-c27b6911.js";/* empty css                   */import"./vueRepl-a238c739.js";import"./vuema-115cb50e.js";import"./editorWorker-7e4b3ef6.js";/* empty css                        *//* empty css                     */import"./type-ae7fe4c5.js";import"./chartEditStore-8641b951.js";import"./index-55ccac47.js";import"./echarts-676dbcd6.js";import"./plugin-68db7aa1.js";import"./useTargetData.hook-7e83673b.js";const ke={class:"fieldChangeMonitoringConfig"},Fe=$({__name:"fieldChangeMonitoringConfig",props:{eventConfig:{},propsFunConfig:{}},setup(v){const _=v,m=C("1");function d(){_.eventConfig.trigger.push(A.cloneDeep(ne))}return(s,u)=>{const a=ye("Close"),b=ue,y=D,U=R,h=q,x=se,N=J;return p(),k("div",ke,[e(N,{modelValue:i(m),"onUpdate:modelValue":u[0]||(u[0]=V=>F(m)?m.value=V:null),class:"demo-tabs"},{default:t(()=>[e(h,{label:"属性配置",name:"1"},{default:t(()=>[(p(!0),k(P,null,L(s.eventConfig.trigger,(V,o)=>(p(),g(y,{class:"mb-15px card-box",key:o},{default:t(()=>[e(b,{size:"20px",class:"closeIcon",onClick:r=>s.eventConfig.trigger.splice(o,1)},{default:t(()=>[e(a)]),_:2},1032,["onClick"]),e(ae,{triggerConfig:V,eventDes:s.propsFunConfig},null,8,["triggerConfig","eventDes"])]),_:2},1024))),128)),e(U,{class:"w-100%",onClick:d},{default:t(()=>[f("添加触发动作")]),_:1})]),_:1}),s.eventConfig.filters?(p(),g(h,{key:0,label:"过滤条件",name:"2"},{default:t(()=>[e(x,{filters:s.eventConfig.filters,mappingFieldOptions:s.propsFunConfig.vars},null,8,["filters","mappingFieldOptions"])]),_:1})):Q("",!0)]),_:1},8,["modelValue"])])}}});const Ue=Ee(Fe,[["__scopeId","data-v-05c6937b"]]),xe={class:"objectEditor"},Ne=$({__name:"objectEditor",props:{modelValue:{},type:{}},emits:["update:modelValue"],setup(v,{emit:_}){const m=v,d=C("");return Ve(()=>{try{d.value=JSON.stringify(m.modelValue)}catch(s){}}),Ce(d,s=>{try{let u=JSON.parse(s);if(m.type=="array"){if(!Array.isArray(u))return;_("update:modelValue",u)}else if(m.type=="object"){if(!A.isObject(u))return;_("update:modelValue",u)}}catch(u){}}),(s,u)=>{const a=M,b=D;return p(),k("div",xe,[e(b,{style:{width:"100%"},"body-style":"width: 100%; padding: 0; box-sizing: border-box;"},{default:t(()=>[e(a,{height:"100px",modelValue:i(d),"onUpdate:modelValue":u[0]||(u[0]=y=>F(d)?d.value=y:null),language:"json",editorOptions:{lineNumbers:"off",lineDecorationsWidth:-10,minimap:{enabled:!1}}},null,8,["modelValue"])]),_:1})])}}}),Te=z("span",{class:"func-keyword"},"function",-1),je=z("span",{class:"func-annotate"},null,-1),cl=$({__name:"propsConfig",props:{modelValue:{type:Boolean},data:{}},emits:["update:modelValue","save"],setup(v,{emit:_}){const m=v,d=B({get(){return m.modelValue},set(o){_("update:modelValue",o)}}),s=C("1"),u=C();let a=C(A.cloneDeep(m.data));const b=B(()=>{let o=[],r=a.value.eventArgs.map(c=>(o.push(c.field),{label:c.field,value:"${"+c.field+"}",type:c.type}));return o.push("rootConfig"),{key:"IframeEvent",name:"iframe触发事件",paramsName:o,vars:r}}),y=[{label:"字符串",value:"string"},{label:"数字",value:"number"},{label:"布尔值",value:"boolean"},{label:"数组",value:"array"},{label:"对象",value:"object"}];function U(o){const{type:r}=o;switch(r){case"string":o.default="";break;case"number":o.default=0;break;case"boolean":o.default=!1;break;case"array":o.default=[];break;case"object":o.default={};break}}function h(){a.value.eventArgs.push({field:"",type:"string",default:""})}function x(o){a.value.eventArgs.splice(o)}function N(){u.value.validate(o=>{if(o)V(),_("save",a.value),d.value=!1;else return!1})}function V(){a.value.eventArgs=a.value.eventArgs.filter(o=>!!o.field)}return(o,r)=>{const c=re,S=ie,E=de,W=pe,G=me,H=ce,K=_e,T=R,X=fe,Y=ge,j=q,I=be,Z=M,w=D,ee=J,le=ve,te=oe;return p(),g(te,{"custom-class":"FunEditorDialog",modelValue:i(d),"onUpdate:modelValue":r[3]||(r[3]=l=>F(d)?d.value=l:null),title:"传参配置"},{footer:t(()=>[e(T,{type:"primary",onClick:N},{default:t(()=>[f("保存")]),_:1})]),default:t(()=>[e(le,{height:"560px","wrap-style":"padding:20px;"},{default:t(()=>[e(ee,{modelValue:i(s),"onUpdate:modelValue":r[2]||(r[2]=l=>F(s)?s.value=l:null),lazy:""},{default:t(()=>[e(j,{label:"事件定义",name:"1"},{default:t(()=>[e(Y,{model:i(a),ref_key:"ruleFormRef",ref:u,"label-width":"80px"},{default:t(()=>[e(S,{label:"事件名:",prop:"eventName",rules:[{required:!0,message:"请输入字段",trigger:"change"}]},{default:t(()=>[e(c,{placeholder:"请输入默认值",modelValue:i(a).eventName,"onUpdate:modelValue":r[0]||(r[0]=l=>i(a).eventName=l)},null,8,["modelValue"])]),_:1}),e(S,{label:"事件参数:"},{default:t(()=>[e(X,{data:i(a).eventArgs,border:""},{default:t(()=>[e(E,{prop:"field",label:"字段"},{default:t(({row:l})=>[e(c,{placeholder:"请输入默认值",modelValue:l.field,"onUpdate:modelValue":n=>l.field=n},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(E,{label:"类型"},{default:t(({row:l})=>[e(G,{style:{width:"100%"},modelValue:l.type,"onUpdate:modelValue":n=>l.type=n,onChange:n=>U(l)},{default:t(()=>[(p(),k(P,null,L(y,(n,O)=>e(W,{key:O,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(E,{label:"默认值"},{default:t(({row:l})=>[l.type=="boolean"?(p(),g(H,{key:0,modelValue:l.default,"onUpdate:modelValue":n=>l.default=n},null,8,["modelValue","onUpdate:modelValue"])):l.type=="number"?(p(),g(K,{key:1,placeholder:"请输入默认值",modelValue:l.default,"onUpdate:modelValue":n=>l.default=n,modelModifiers:{number:!0}},null,8,["modelValue","onUpdate:modelValue"])):l.type=="string"?(p(),g(c,{key:2,placeholder:"请输入默认值",modelValue:l.default,"onUpdate:modelValue":n=>l.default=n},null,8,["modelValue","onUpdate:modelValue"])):["array","object"].includes(l.type)?(p(),g(Ne,{key:3,type:l.type,modelValue:l.default,"onUpdate:modelValue":n=>l.default=n},null,8,["type","modelValue","onUpdate:modelValue"])):Q("",!0)]),_:1}),e(E,{label:"操作",width:"100px"},{default:t(({row:l,$index:n})=>[e(T,{type:"danger",onClick:O=>x(n),link:""},{default:t(()=>[f("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(T,{class:"mt-4",style:{width:"100%"},onClick:h},{default:t(()=>[f("添加事件参数")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(j,{label:"字段变化监听配置",name:"2",lazy:""},{default:t(()=>[e(Ue,{eventConfig:i(a).configFun,propsFunConfig:i(b)},null,8,["eventConfig","propsFunConfig"])]),_:1}),e(j,{label:"字段变化监听方法",name:"3",lazy:""},{default:t(()=>[e(w,{style:{padding:"0",width:"100%"}},{default:t(()=>[z("div",null,[e(I,{size:"large",type:"info"},{default:t(()=>[Te,f("  "),je,f("("+he(i(b).paramsName.join(","))+"){ ",1)]),_:1}),e(Z,{modelValue:i(a).fun,"onUpdate:modelValue":r[1]||(r[1]=l=>i(a).fun=l),height:"390px",language:"javascript"},null,8,["modelValue"]),e(I,{size:"large",type:"info"},{default:t(()=>[f("}")]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])}}});export{cl as default};
