var U=Object.defineProperty,z=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var y=(a,e,o)=>e in a?U(a,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[e]=o,g=(a,e)=>{for(var o in e||(e={}))G.call(e,o)&&y(a,o,e[o]);if(q)for(var o of q(e))L.call(e,o)&&y(a,o,e[o]);return a},v=(a,e)=>z(a,F(e));import{g as M,R as C}from"./index-4e626338.js";/* empty css                *//* empty css               *//* empty css                 *//* empty css                  */import{u as O}from"./chartEditStore-8641b951.js";import{a as j}from"./index-383f02b3.js";/* empty css                   */import"./index-806da9dd.js";/* empty css                 *//* empty css                *//* empty css                     *//* empty css                */import"./el-tooltip-4ed993c7.js";/* empty css                  */import"./el-collapse-transition-4ed993c7.js";/* empty css                 *//* empty css                        *//* empty css                     *//* empty css                        */import"./el-collapse-item-4ed993c7.js";/* empty css                                                                    */import"./SettingItemBox-ce5066ee.js";/* empty css                        *//* empty css                  *//* empty css                   */import{g as A}from"./plugin-68db7aa1.js";/* empty css                                                                  *//* empty css                    *//* empty css                  *//* empty css                        */import"./vuedraggable-26823587.js";import{u as J}from"./useTargetData.hook-7e83673b.js";import"./index.d-4993f78d.js";/* empty css                    *//* empty css                 *//* empty css                    *//* empty css                        */import"./pondIndex.vue_vue_type_style_index_0_scoped_9baf3e9a_lang-63a29e5a.js";/* empty css                  *//* empty css                 */import"./EditorWorker.vue_vue_type_script_setup_true_lang-44860150.js";import"./index-bf1882c4.js";import{P as K}from"./pondIndex-4a14e692.js";import{l as Q}from"./lodash-f91682a1.js";import{t as W}from"./index-55ccac47.js";import{T as X}from"./icon-24f36b03.js";import{k as Y,S as Z,d as tt,w as et}from"./elementPlus-07602b2b.js";import{d as ot,a7 as at,r as P,o as l,s as h,w as c,a as u,u as i,c as k,F as st,q as rt,h as d,a6 as I,l as E,a0 as it,x as nt,ah as dt}from"./vue-65382a1b.js";import{_ as mt}from"./xgplayerVue-c27b6911.js";import"./vueRepl-a238c739.js";import"./vuema-115cb50e.js";import"./views-99f1c264.js";import"./axios-ba46900f.js";import"./axios-e76ab20a.js";import"./style-2d240cf8.js";import"./fileTypeEnum-eae25d97.js";/* empty css                    */import"./SettingItem-0e9c370f.js";import"./editorWorker-7e4b3ef6.js";import"./echarts-676dbcd6.js";import"./Close-095524a6.js";const pt={class:"item-content"},lt=["onClick"],ct={style:{"max-width":"180px"}},ut={style:{"max-width":"180px"}},_t=["onClick"],ft=ot({__name:"index",setup(a){const{getRequestGlobalConfig:e}=O(),{chartEditStore:o,targetData:gt}=J(),{requestDataPond:n}=at(e),m=P(!1),_=P(!1),f=P(),w=(t=!1)=>{_.value=!!t,m.value=!0},R=()=>{const t=M();f.value={dataPondId:t,dataPondName:t,dataPondRequestConfig:Q.cloneDeep(v(g({},W),{requestDataType:C.Pond}))},w()},D=t=>{f.value=t,w(!0)},S=t=>{A({message:"删除数据后，需手动处理使用改接口的组件，是否继续？",isMaskClosable:!0,transformOrigin:"center",onPositiveCallback:()=>{const s=n.value.findIndex(r=>r.dataPondId===t.dataPondId);s!==-1?(n.value.splice(s,1),window.$message.success("删除成功!")):window.$message.error("删除失败，请稍后重试！")}})},$=t=>{_.value?b(t):T(t),_.value=!1,m.value=!1},T=t=>{try{f.value?(n.value.unshift(t),window.$message.success("创建成功!")):window.$message.error("创建失败，请稍后重试!")}catch(s){window.$message.error("创建失败，请稍后重试!")}},b=t=>{try{const s=n.value.findIndex(r=>r.dataPondId===t.dataPondId);s!==-1?(n.value.splice(s,1,t),o.getComponentList.forEach(r=>{r.request.requestDataType===C.Pond&&r.request.requestDataPondId===t.dataPondId&&(r.request=v(g({},dt(t.dataPondRequestConfig)),{requestDataPondId:t.dataPondId}))}),window.$message.success("保存成功！")):window.$message.error("编辑失败，请稍后重试！")}catch(s){window.$message.error("编辑失败，请稍后重试！")}};return(t,s)=>{const r=Y,B=Z,x=tt,N=et;return l(),h(i(j),{class:"kh-GlobalVar",title:"公共请求"},{"top-right":c(()=>[u(r,{link:"",icon:"Plus",onClick:R})]),default:c(()=>[i(n).length===0?(l(),h(B,{key:0,class:"empty-box","image-size":100,description:"暂无数据"})):(l(!0),k(st,{key:1},rt(i(n),(p,V)=>(l(),k("div",{key:V},[d("div",pt,[d("div",{class:"item-content-body",onClick:H=>D(p)},[d("div",null,[u(x,{class:"go-mr-1",type:"warning"},{default:c(()=>[I(" 名称 ")]),_:1}),d("span",ct,E(p.dataPondName||"暂无"),1)]),d("div",null,[u(x,{class:"go-mr-1",type:"warning"},{default:c(()=>[I(" 地址 ")]),_:1}),d("span",ut,E(p.dataPondRequestConfig.requestUrl||"暂无"),1)])],8,lt),d("div",{class:"item-content-icon",onClick:H=>S(p)},[u(N,{size:"16px"},{default:c(()=>[u(i(X))]),_:1})],8,_t)])]))),128)),i(m)?(l(),h(i(K),{key:2,modelShow:i(m),"onUpdate:modelShow":s[0]||(s[0]=p=>it(m)?m.value=p:null),targetDataRequest:i(f),isEdit:i(_),onEditSaveHandle:$},null,8,["modelShow","targetDataRequest","isEdit"])):nt("",!0)]),_:1})}}});const Ie=mt(ft,[["__scopeId","data-v-7ada810c"]]);export{Ie as default};
