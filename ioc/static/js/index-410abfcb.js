var $=Object.defineProperty;var C=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;var x=(i,e,o)=>e in i?$(i,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):i[e]=o,f=(i,e)=>{for(var o in e||(e={}))q.call(e,o)&&x(i,o,e[o]);if(C)for(var o of C(e))v.call(e,o)&&x(i,o,e[o]);return i};import{S}from"./index.esm.min-0a61ff36.js";import{a1 as j,s as k,a2 as O,a3 as B}from"./index-55ccac47.js";import{an as I}from"./index-4e626338.js";import{u as M}from"./useChartDataFetch.hook-495a5af9.js";import{i as P}from"./axios-ba46900f.js";import{u as R,i as w,a as z,b as F,c as G,d as H,f as L}from"./echarts-676dbcd6.js";import{l as N}from"./lodash-f91682a1.js";import{u as T}from"./useAddEvent.kooks-e46e3810.js";import{d as V,r as J,g as K,o as Q,c as U,a as W,a3 as X,u as g,ao as Y}from"./vue-65382a1b.js";import"./vueRepl-a238c739.js";import"./elementPlus-07602b2b.js";import"./vuema-115cb50e.js";import"./xgplayerVue-c27b6911.js";import"./http-0d114cdb.js";import"./axios-e76ab20a.js";import"./useEvent.hook-afeb4a8c.js";const ge=V({__name:"index",props:{themeSetting:{type:Object,required:!0},themeColor:{type:Object,required:!0},chartConfig:{type:Object,required:!0}},setup(i){const e=i,{rootConfig:o,getEvents:A}=T(e.chartConfig,O);R([w,z,F,G,H,L]),J();const E=K(()=>{let r=N.cloneDeep(e.chartConfig.option);return b(I(e.chartConfig.data),r),j(r,e.themeSetting,B)});function b(r,s){let{valueAxis:m,classAxis:d,colorAxis:p,typeList:_}=e.chartConfig.dataMapping,n=[],y=r.map(t=>t[d[0].column||p[0].column]);m.length>1?m.forEach((t,l,c)=>{let a=f({},h(s.series,l));a.name=t.name,a.data=r.map(u=>u[t.column]),n.push(a)}):m.length==1&&(d[0]&&p[0]?(_.forEach((t,l)=>{let c=f({},h(s.series,l));c.name=t.name,c.data=[],n.push(c)}),r.forEach((t,l,c)=>{if(d[0]&&p[0]){let a=n.find(u=>u.name==t[p[0].column]);a?a.data.push(t[m[0].column]):(a=f({},h(s.series,n.length)),a.name=t[p[0].column],a.data=[t[m[0].column]],n.push(a))}})):m.forEach((t,l,c)=>{let a=f({},h(s.series,l));a.name=t.name,a.data=r.map(u=>u[t.column]),n.push(a)})),s.yAxis.type=="category"?s.yAxis.data=y:s.xAxis.type=="category"&&(s.xAxis.data=y),s.series=n}function h(r,s){return r[s]?r[s]:k}const{vChartRef:D}=M(e.chartConfig,o.requestGlobalConfig,r=>{console.log(r)});return(r,s)=>(Q(),U("div",null,[W(g(S),X(Y(g(A)),{ref_key:"vChartRef",ref:D,theme:i.themeColor,option:E.value,"manual-update":g(P)(),"update-options":{replaceMerge:["series"]},autoresize:""}),null,16,["theme","option","manual-update"])]))}});export{ge as default};
