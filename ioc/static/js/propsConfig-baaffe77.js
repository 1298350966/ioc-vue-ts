import{_ as Z}from"./index-806da9dd.js";import"./index-4e626338.js";/* empty css                  *//* empty css                     *//* empty css                    *//* empty css                */import{_ as D}from"./EditorWorker.vue_vue_type_script_setup_true_lang-44860150.js";/* empty css               *//* empty css                     *//* empty css                        *//* empty css                 *//* empty css                  *//* empty css                  *//* empty css                  */import{l as k}from"./lodash-f91682a1.js";import{p as S}from"./config-84ed6ba6.js";import{E as ee,a as le,_ as te}from"./EventTrigger-6c8c8146.js";/* empty css                */import{w as oe,p as F,k as T,Q as z,P as $,x as ae,z as ne,a3 as re,a2 as se,N as ue,ae as ie,y as de,d as pe,i as me}from"./elementPlus-07602b2b.js";import{d as j,r as g,al as fe,o as i,c as E,a as t,w as o,F as A,q as B,s as m,u as l,a6 as V,x as I,a0 as w,A as M,f as _e,g as ce,h as O,l as ge}from"./vue-65382a1b.js";import{_ as ve}from"./xgplayerVue-c27b6911.js";/* empty css                   */import"./vueRepl-a238c739.js";import"./vuema-115cb50e.js";import"./editorWorker-7e4b3ef6.js";/* empty css                        *//* empty css                     */import"./type-ae7fe4c5.js";import"./chartEditStore-8641b951.js";import"./index-55ccac47.js";import"./echarts-676dbcd6.js";import"./plugin-68db7aa1.js";import"./useTargetData.hook-7e83673b.js";const be={class:"fieldChangeMonitoringConfig"},ye=j({__name:"fieldChangeMonitoringConfig",props:{eventConfig:{}},setup(v){const f=v,d=g("1");function s(){f.eventConfig.trigger.push(k.cloneDeep(le))}return(u,r)=>{const e=fe("Close"),b=oe,_=F,h=T,c=z,x=te,p=$;return i(),E("div",be,[t(p,{modelValue:l(d),"onUpdate:modelValue":r[0]||(r[0]=a=>w(d)?d.value=a:null),class:"demo-tabs"},{default:o(()=>[t(c,{label:"属性配置",name:"1"},{default:o(()=>[(i(!0),E(A,null,B(u.eventConfig.trigger,(a,y)=>(i(),m(_,{class:"mb-15px card-box",key:y},{default:o(()=>[t(b,{size:"20px",class:"closeIcon",onClick:C=>u.eventConfig.trigger.splice(y,1)},{default:o(()=>[t(e)]),_:2},1032,["onClick"]),t(ee,{triggerConfig:a,eventDes:l(S)},null,8,["triggerConfig","eventDes"])]),_:2},1024))),128)),t(h,{class:"w-100%",onClick:s},{default:o(()=>[V("添加触发动作")]),_:1})]),_:1}),u.eventConfig.filters?(i(),m(c,{key:0,label:"过滤条件",name:"2"},{default:o(()=>[t(x,{filters:u.eventConfig.filters,mappingFieldOptions:l(S).vars},null,8,["filters","mappingFieldOptions"])]),_:1})):I("",!0)]),_:1},8,["modelValue"])])}}});const Ve=ve(ye,[["__scopeId","data-v-c67ae5a4"]]),Ce={class:"objectEditor"},ke=j({__name:"objectEditor",props:{modelValue:{},type:{}},emits:["update:modelValue"],setup(v,{emit:f}){const d=v,s=g("");return M(()=>{try{s.value=JSON.stringify(d.modelValue)}catch(u){}}),_e(s,u=>{try{let r=JSON.parse(u);if(d.type=="array"){if(!Array.isArray(r))return;f("update:modelValue",r)}else if(d.type=="object"){if(!k.isObject(r))return;f("update:modelValue",r)}}catch(r){}}),(u,r)=>{const e=D,b=F;return i(),E("div",Ce,[t(b,{style:{width:"100%"},"body-style":"width: 100%; padding: 0; box-sizing: border-box;"},{default:o(()=>[t(e,{height:"400px",modelValue:l(s),"onUpdate:modelValue":r[0]||(r[0]=_=>w(s)?s.value=_:null),language:"json",editorOptions:{lineNumbers:"off",lineDecorationsWidth:-10,minimap:{enabled:!1}}},null,8,["modelValue"])]),_:1})])}}}),Ee=O("span",{class:"func-keyword"},"function",-1),we=O("span",{class:"func-annotate"},null,-1),al=j({__name:"propsConfig",props:{modelValue:{type:Boolean},data:{}},emits:["update:modelValue","save"],setup(v,{emit:f}){const d=v,s=ce({get(){return d.modelValue},set(p){f("update:modelValue",p)}}),u=g("1"),r=g();let e=g(k.cloneDeep(d.data));const b=[{label:"字符串",value:"string"},{label:"数字",value:"number"},{label:"布尔值",value:"boolean"},{label:"数组",value:"array"},{label:"对象",value:"object"}],_=g(null);function h(p){switch(p){case"string":e.value.default="";break;case"number":e.value.default=0;break;case"boolean":e.value.default=!1;break;case"array":e.value.default=[],c();break;case"object":e.value.default={},c();break}}function c(){_.value=JSON.stringify(e.value.default,null,2)}function x(){r.value.validate(p=>{if(p){if(e.value.type=="array"&&(e.value.default=JSON.parse(_.value),!Array.isArray(e.value.default))){window.$message.warning("默认值格式错误，请输入数组");return}if(e.value.type=="object"&&(e.value.default=JSON.parse(_.value),!k.isObject(e.value.default))){window.$message.warning("默认值格式错误，请输入对象");return}f("save",e.value),s.value=!1}else return!1})}return M(()=>{c()}),(p,a)=>{const y=ae,C=ne,J=re,q=se,R=ue,P=ie,L=de,N=z,U=pe,Q=D,W=F,G=$,H=me,K=T,X=Z;return i(),m(X,{"custom-class":"FunEditorDialog",modelValue:l(s),"onUpdate:modelValue":a[8]||(a[8]=n=>w(s)?s.value=n:null),title:"传参配置"},{footer:o(()=>[t(K,{type:"primary",onClick:x},{default:o(()=>[V("保存")]),_:1})]),default:o(()=>[t(H,{height:"560px","wrap-style":"padding:20px;"},{default:o(()=>[t(G,{modelValue:l(u),"onUpdate:modelValue":a[7]||(a[7]=n=>w(u)?u.value=n:null),lazy:""},{default:o(()=>[t(N,{label:"字段定义",name:"1"},{default:o(()=>[t(L,{model:l(e),ref_key:"ruleFormRef",ref:r,"label-width":"80px"},{default:o(()=>[t(C,{label:"字段:",prop:"field",rules:[{required:!0,message:"请输入字段",trigger:"change"}]},{default:o(()=>[t(y,{placeholder:"请输入默认值",modelValue:l(e).field,"onUpdate:modelValue":a[0]||(a[0]=n=>l(e).field=n)},null,8,["modelValue"])]),_:1}),t(C,{label:"类型:",prop:"type",rules:[{required:!0,message:"请输入字段类型",trigger:"change"}]},{default:o(()=>[t(q,{style:{width:"100%"},modelValue:l(e).type,"onUpdate:modelValue":a[1]||(a[1]=n=>l(e).type=n),onChange:h},{default:o(()=>[(i(),E(A,null,B(b,(n,Y)=>t(J,{key:Y,label:n.label,value:n.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(e).type?(i(),m(C,{key:0,label:"默认值:",prop:"default"},{default:o(()=>[l(e).type=="boolean"?(i(),m(R,{key:0,modelValue:l(e).default,"onUpdate:modelValue":a[2]||(a[2]=n=>l(e).default=n)},null,8,["modelValue"])):l(e).type=="number"?(i(),m(P,{key:1,placeholder:"请输入默认值",modelValue:l(e).default,"onUpdate:modelValue":a[3]||(a[3]=n=>l(e).default=n),modelModifiers:{number:!0}},null,8,["modelValue"])):l(e).type=="string"?(i(),m(y,{key:2,placeholder:"请输入默认值",modelValue:l(e).default,"onUpdate:modelValue":a[4]||(a[4]=n=>l(e).default=n)},null,8,["modelValue"])):(i(),m(ke,{key:3,type:l(e).type,modelValue:l(e).default,"onUpdate:modelValue":a[5]||(a[5]=n=>l(e).default=n)},null,8,["type","modelValue"]))]),_:1})):I("",!0)]),_:1},8,["model"])]),_:1}),t(N,{label:"字段变化监听配置",name:"2",lazy:""},{default:o(()=>[t(Ve,{eventConfig:l(e).configFun},null,8,["eventConfig"])]),_:1}),t(N,{label:"字段变化监听方法",name:"3",lazy:""},{default:o(()=>[t(W,{style:{padding:"0",width:"100%"}},{default:o(()=>[O("div",null,[t(U,{size:"large",type:"info"},{default:o(()=>[Ee,V("  "),we,V("("+ge(l(S).paramsName.join(", "))+") => { ",1)]),_:1}),t(Q,{modelValue:l(e).fun,"onUpdate:modelValue":a[6]||(a[6]=n=>l(e).fun=n),height:"390px",language:"javascript"},null,8,["modelValue"]),t(U,{size:"large",type:"info"},{default:o(()=>[V("}")]),_:1})])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])}}});export{al as default};
