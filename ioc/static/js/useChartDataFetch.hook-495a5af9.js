var R=(t,i,r)=>new Promise((f,l)=>{var q=e=>{try{n(r.next(e))}catch(u){l(u)}},c=e=>{try{n(r.throw(e))}catch(u){l(u)}},n=e=>e.done?f(e.value):Promise.resolve(e.value).then(q,c);n((r=r.apply(t,i)).next())});import{c as D}from"./http-0d114cdb.js";import{R as H,ao as w,ap as P}from"./index-4e626338.js";import{i as g}from"./axios-ba46900f.js";import{r as x,a7 as y,ah as U,f as z}from"./vue-65382a1b.js";const b=(t,i,r)=>{const f=x(null);let l=0;const q=()=>{const{requestOriginUrl:c,requestIntervalUnit:n,requestInterval:e}=y(i),{requestDataType:u,requestUrl:v,requestIntervalUnit:F,requestInterval:o}=y(t.request);if(u.value!=H.STATIC)try{if(v!=null&&v.value){if(!(c&&c.value+v.value))return;clearInterval(l);const I=()=>R(void 0,null,function*(){const a=yield D(U(t.request),U(i));if(a)try{let{filter:s,filterNode:d}=t;!s&&d&&(s="return data."+d);const{data:p}=a;t.data=w(p,a,s),r&&r(w(p,a,s),a)}catch(s){console.error(s)}});console.log("request->",t.request),z(()=>t.request,a=>{console.log("output->",a),I()},{immediate:!0,deep:!0});const m=o&&o.value?o.value:e.value,T=o&&o.value?F.value:n.value;m&&(l=setInterval(I,P(m,T)))}}catch(h){console.log(h)}};return g()&&q(),{vChartRef:f}};export{b as u};
