var $=Object.defineProperty;var x=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var A=(s,e,o)=>e in s?$(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,h=(s,e)=>{for(var o in e||(e={}))j.call(e,o)&&A(s,o,e[o]);if(x)for(var o of x(e))k.call(e,o)&&A(s,o,e[o]);return s};import{S as q}from"./index.esm.min-0a61ff36.js";import{a1 as w,ai as O,ad as E,p as T,aj as B,ak as I}from"./index-55ccac47.js";import{d as R,an as z}from"./index-4e626338.js";import{u as F}from"./useChartDataFetch.hook-495a5af9.js";import{i as v}from"./axios-ba46900f.js";import{u as G,i as L,a as M,l as P,c as H,d as J,f as K}from"./echarts-676dbcd6.js";import"./lodash-f91682a1.js";import{u as N}from"./useAddEvent.kooks-e46e3810.js";import{d as Q,b as U,f as S,o as V,s as W,u as b}from"./vue-65382a1b.js";import"./vueRepl-a238c739.js";import"./elementPlus-07602b2b.js";import"./vuema-115cb50e.js";import"./xgplayerVue-c27b6911.js";import"./http-0d114cdb.js";import"./axios-e76ab20a.js";import"./useEvent.hook-afeb4a8c.js";const de=Q({__name:"index",props:{themeSetting:{type:Object,required:!0},themeColor:{type:Object,required:!0},chartConfig:{type:Object,required:!0}},setup(s){const e=s,{rootConfig:o,getEvents:X}=N(e.chartConfig,B);G([L,M,P,H,J,K]);const d=U({value:{}});function D(i,t){let{valueAxis:n,classAxis:c,colorAxis:l,typeList:C}=e.chartConfig.dataMapping,m=[],y=i.map(a=>a[c[0].column||l[0].column]);n.length>1?n.forEach((a,f,p)=>{let r=h({},g(t.series,f));r.name=a.name,r.data=i.map(u=>u[a.column]),m.push(r)}):n.length==1&&(c[0]&&l[0]?(C.forEach((a,f)=>{let p=h({},g(t.series,f));p.name=a.name,p.data=[],m.push(p)}),i.forEach((a,f,p)=>{if(c[0]&&l[0]){let r=m.find(u=>u.name==a[l[0].column]);r?r.data.push(a[n[0].column]):(r=h({},g(t.series,m.length)),r.name=a[l[0].column],r.data=[a[n[0].column]],m.push(r))}})):n.forEach((a,f,p)=>{let r=h({},g(t.series,f));r.name=a.name,r.data=i.map(u=>u[a.column]),m.push(r)})),t.yAxis.type=="category"?t.yAxis.data=y:t.xAxis.type=="category"&&(t.xAxis.data=y),t.series=m}function g(i,t){return i[t]?i[t]:O}S(()=>o.editCanvasConfig.chartThemeColor,i=>{if(!v()){const n=E[i]||E[T];e.chartConfig.option.series.forEach(c=>{c.lineStyle.shadowColor=n[2],c.lineStyle.color.colorStops.forEach((l,C)=>{l.color=n[C]})})}let t=R(e.chartConfig.option);D(z(e.chartConfig.data),t),d.value=w(t,e.themeSetting,I),e.chartConfig.option=d.value},{immediate:!0}),S(()=>e.chartConfig.option.dataset,()=>{d.value=e.chartConfig.option},{deep:!1});const{vChartRef:_}=F(e.chartConfig,o.requestGlobalConfig);return(i,t)=>(V(),W(b(q),{ref_key:"vChartRef",ref:_,theme:s.themeColor,option:d.value,"manual-update":b(v)(),autoresize:""},null,8,["theme","option","manual-update"]))}});export{de as default};
