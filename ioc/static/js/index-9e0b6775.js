var $=Object.defineProperty;var y=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var x=(o,e,s)=>e in o?$(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s,h=(o,e)=>{for(var s in e||(e={}))q.call(e,s)&&x(o,s,e[s]);if(y)for(var s of y(e))j.call(e,s)&&x(o,s,e[s]);return o};import{S as k}from"./index.esm.min-0a61ff36.js";import{a1 as w,i as L,ad as A,p as O,ag as T,ah as B}from"./index-55ccac47.js";import{d as G,an as I}from"./index-4e626338.js";import{u as M}from"./useChartDataFetch.hook-495a5af9.js";import{i as v}from"./axios-ba46900f.js";import{u as R,i as F,a as P,l as z,c as H,d as J,f as K,L as N}from"./echarts-676dbcd6.js";import"./lodash-f91682a1.js";import{u as Q}from"./useAddEvent.kooks-e46e3810.js";import{d as U,b as V,f as E,o as W,s as X,u as b}from"./vue-65382a1b.js";import"./vueRepl-a238c739.js";import"./elementPlus-07602b2b.js";import"./vuema-115cb50e.js";import"./xgplayerVue-c27b6911.js";import"./http-0d114cdb.js";import"./axios-e76ab20a.js";import"./useEvent.hook-afeb4a8c.js";const de=U({__name:"index",props:{themeSetting:{type:Object,required:!0},themeColor:{type:Object,required:!0},chartConfig:{type:Object,required:!0}},setup(o){const e=o,{rootConfig:s,getEvents:Y}=Q(e.chartConfig,T);R([F,P,z,H,J,K]);const g=V({value:{}});function S(i,t){let{valueAxis:n,classAxis:p,colorAxis:m,typeList:_}=e.chartConfig.dataMapping,l=[],C=i.map(a=>a[p[0].column||m[0].column]);n.length>1?n.forEach((a,c,f)=>{let r=h({},d(t.series,c));r.name=a.name,r.data=i.map(u=>u[a.column]),l.push(r)}):n.length==1&&(p[0]&&m[0]?(_.forEach((a,c)=>{let f=h({},d(t.series,c));f.name=a.name,f.data=[],l.push(f)}),i.forEach((a,c,f)=>{if(p[0]&&m[0]){let r=l.find(u=>u.name==a[m[0].column]);r?r.data.push(a[n[0].column]):(r=h({},d(t.series,l.length)),r.name=a[m[0].column],r.data=[a[n[0].column]],l.push(r))}})):n.forEach((a,c,f)=>{let r=h({},d(t.series,c));r.name=a.name,r.data=i.map(u=>u[a.column]),l.push(r)})),t.yAxis.type=="category"?t.yAxis.data=C:t.xAxis.type=="category"&&(t.xAxis.data=C),t.series=l}function d(i,t){return i[t]?i[t]:L}E(()=>s.editCanvasConfig.chartThemeColor,i=>{if(!v()){const n=A[i]||A[O];e.chartConfig.option.series.forEach((p,m)=>{p.areaStyle.color=new N(0,0,0,1,[{offset:0,color:n[3+m]},{offset:1,color:"rgba(0,0,0, 0)"}])})}let t=G(e.chartConfig.option);S(I(e.chartConfig.data),t),g.value=w(t,e.themeSetting,B),e.chartConfig.option=g.value},{immediate:!0}),E(()=>e.chartConfig.option.dataset,()=>{g.value=e.chartConfig.option});const{vChartRef:D}=M(e.chartConfig,s.requestGlobalConfig);return(i,t)=>(W(),X(b(k),{ref_key:"vChartRef",ref:D,theme:o.themeColor,option:g.value,"manual-update":b(v)(),"update-options":{replaceMerge:["series"]}},null,8,["theme","option","manual-update"]))}});export{de as default};
