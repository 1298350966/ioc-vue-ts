var T=(S,w,i)=>new Promise((q,a)=>{var _=n=>{try{m(i.next(n))}catch(u){a(u)}},y=n=>{try{m(i.throw(n))}catch(u){a(u)}},m=n=>n.done?q(n.value):Promise.resolve(n.value).then(_,y);m((i=i.apply(S,w)).next())});import{u as V,y as G,as as H,ao as O}from"./index-4e626338.js";import"./el-tooltip-4ed993c7.js";/* empty css                  *//* empty css                *//* empty css                  *//* empty css                *//* empty css                 *//* empty css               */import{d as K,aI as M,i as P,a7 as Q,r as b,g as J,e as W,$ as X,al as Y,o as R,c as Z,a as e,w as o,u as t,a6 as p,l as I,h as U,s as ee,x as te,ah as z}from"./vue-65382a1b.js";import{i as oe}from"./icon-24f36b03.js";import"./el-collapse-item-4ed993c7.js";import{_ as v}from"./SettingItem-0e9c370f.js";import{_ as g}from"./SettingItemBox-ce5066ee.js";/* empty css                        *//* empty css                     *//* empty css                        *//* empty css                     *//* empty css                        *//* empty css                 *//* empty css                  *//* empty css                   *//* empty css                                                                  *//* empty css                    *//* empty css                  *//* empty css                        */import{u as ae}from"./chartEditStore-8641b951.js";import"./vuedraggable-26823587.js";import re from"./index-21557794.js";/* empty css                   */import"./index-806da9dd.js";import"./el-collapse-transition-4ed993c7.js";import"./lodash-f91682a1.js";import"./index.d-4993f78d.js";/* empty css                    *//* empty css                 *//* empty css                    *//* empty css                        */import"./index.vue_vue_type_style_index_0_lang-bfc00404.js";import"./index-4b49ec82.js";/* empty css                  *//* empty css                 */import"./EditorWorker.vue_vue_type_script_setup_true_lang-44860150.js";import"./index-bea6e953.js";import"./index-bf1882c4.js";import"./index-7fe425bd.js";/* empty css                                                                  */import{c as le}from"./http-0d114cdb.js";import ne from"./index-e62ff3d0.js";import{d as se,x as ie,w as pe,k as me,p as ue,C as ce}from"./elementPlus-07602b2b.js";import{_ as de}from"./xgplayerVue-c27b6911.js";import"./vueRepl-a238c739.js";import"./vuema-115cb50e.js";import"./Close-095524a6.js";/* empty css                                                                    */import"./index-55ccac47.js";import"./echarts-676dbcd6.js";import"./plugin-68db7aa1.js";/* empty css                *//* empty css                                                              */import"./useTargetData.hook-7e83673b.js";import"./index.vue_vue_type_script_setup_true_lang-56c8ff75.js";import"./editorWorker-7e4b3ef6.js";import"./axios-ba46900f.js";import"./axios-e76ab20a.js";/* empty css                         */import"./hCode-f0cdea69.js";import"./highlight-87778b4e.js";import"./fileTypeEnum-eae25d97.js";/* empty css                    */import"./index-1b5afad1.js";import"./useFile.hooks-6b86f602.js";const _e={class:"chart-configurations-data-ajax"},fe={class:"go-absolute-center"},he=K({__name:"index",setup(S){M(l=>({"5dac8613":N.value}));const{HelpOutlineIcon:w,FlashIcon:i,PulseIcon:q}=oe.ionicons5,a=P("targetData"),_=ae(),{requestOriginUrl:y,requestInterval:m,requestIntervalUnit:n}=Q(_.getRequestGlobalConfig),u=V(),c=b(!1),f=b(!1),E=b(!1);let D=0,x;const $=()=>{f.value=!0},C=()=>T(this,null,function*(){var l;if((l=a.value)!=null&&l.request){c.value=!0;try{const r=yield le(z(a.value.request),z(_.getRequestGlobalConfig));if(c.value=!1,r){!(r!=null&&r.data)&&!a.value.filter&&window.$message.warning("您的数据不符合默认格式，请配置过滤器！");let{filter:d,filterNode:s}=a.value;!d&&s&&(d="return data."+s),a.value.data=O(r==null?void 0:r.data,r,d),B(a.value.data),E.value=!0;return}window.$message.warning("数据异常，请检查参数！")}catch(r){c.value=!1,window.$message.warning("数据异常，请检查参数！")}}});function B(l){Array.isArray(l)&&l[0]&&(a.value.dataKeyList=Object.keys(l[0]).map(r=>({key:r,type:typeof l[0][r]})),console.log("output->",a.value.dataKeyList))}const N=J(()=>u.getAppTheme);return W(()=>{var r;const l=(r=a.value)==null?void 0:r.filter;x!==l&&D&&(x=l,C()),D++}),X(()=>{x=null}),(l,r)=>{const d=se,s=ie,h=pe,k=me,j=ue,A=ce,F=Y("go-skeleton");return R(),Z("div",_e,[e(j,{shadow:"never",class:"n-card-shallow",style:{padding:"0"}},{default:o(()=>[e(t(g),{name:"请求配置"},{default:o(()=>[e(t(v),{name:"类型"},{default:o(()=>[e(d,{style:{"border-radius":"5px"}},{default:o(()=>[p(I(t(a).request.requestContentType===t(G).DEFAULT?"普通请求":"SQL请求"),1)]),_:1})]),_:1}),e(t(v),{name:"方式"},{default:o(()=>[e(s,{size:"small",placeholder:t(a).request.requestHttpType||"暂无",disabled:!0},null,8,["placeholder"])]),_:1}),e(t(v),{name:"组件间隔"},{default:o(()=>[e(s,{size:"small",placeholder:`${t(a).request.requestInterval||"暂无"}`,disabled:!0},{suffix:o(()=>[p(I(t(H)[t(a).request.requestIntervalUnit]),1)]),_:1},8,["placeholder"])]),_:1}),e(t(v),{name:"全局间隔（默认）"},{default:o(()=>[e(s,{size:"small",placeholder:`${t(m)||"暂无"} `,disabled:!0},{suffix:o(()=>[p(I(t(H)[t(n)]),1)]),_:1},8,["placeholder"])]),_:1})]),_:1}),e(t(g),{name:"源地址",alone:!0},{default:o(()=>[e(s,{size:"small",placeholder:t(y)||"暂无",disabled:!0},{prefix:o(()=>[e(h,{component:t(q)},null,8,["component"])]),_:1},8,["placeholder"])]),_:1}),e(t(g),{name:"组件地址",alone:!0},{default:o(()=>[e(s,{size:"small",placeholder:t(a).request.requestUrl||"暂无",disabled:!0},{prefix:o(()=>[e(h,{component:t(i)},null,8,["component"])]),_:1},8,["placeholder"])]),_:1}),U("div",{class:"edit-text",onClick:$},[U("div",fe,[e(k,{type:"primary"},{default:o(()=>[p("编辑配置")]),_:1})])])]),_:1}),e(t(g),{alone:!0},{name:o(()=>[p(" 测试 "),e(A,{content:"默认赋值给 dataset 字段"},{default:o(()=>[e(h,{size:"21"},{default:o(()=>[e(t(w))]),_:1})]),_:1})]),default:o(()=>[e(k,{type:"primary",ghost:"",onClick:C},{icon:o(()=>[e(h,null,{default:o(()=>[e(t(i))]),_:1})]),default:o(()=>[p(" 发送请求 ")]),_:1})]),_:1}),e(t(ne),{show:E.value&&!c.value,ajax:!0},null,8,["show"]),e(F,{load:c.value,repeat:3},null,8,["load"]),f.value?(R(),ee(t(re),{key:0,modelShow:f.value,"onUpdate:modelShow":r[0]||(r[0]=L=>f.value=L),targetData:t(a),onSendHandle:C},null,8,["modelShow","targetData"])):te("",!0)])}}});const $t=de(he,[["__scopeId","data-v-033ae5df"]]);export{$t as default};
