import{g as W}from"./index-4e626338.js";/* empty css                *//* empty css                 *//* empty css                  */import{d as L,r as I,g as V,aJ as F,A as N,o as c,c as E,h as v,a as l,u as r,s as $,a5 as X,x as z,G as M,H as P,w as g,a6 as S,F as T,q as O,m as Y,l as G,a0 as j,al as U,k as Z}from"./vue-65382a1b.js";import{l as q}from"./lodash-f91682a1.js";import{_ as ee}from"./index-806da9dd.js";/* empty css                *//* empty css                *//* empty css                 *//* empty css                     */import{u as H}from"./chartEditStore-8641b951.js";import{_ as R}from"./vueRepl-a238c739.js";/* empty css               *//* empty css                  *//* empty css                        *//* empty css                     */import{e as te,a as ne,b as oe}from"./config-122b28f2.js";import{u as le}from"./useTargetData.hook-7e83673b.js";import{ap as ie,i as se,ao as ae,x as re,w as J,p as ge,k as K,an as pe,al as ue,S as de}from"./elementPlus-07602b2b.js";import{_ as A}from"./xgplayerVue-c27b6911.js";import{C as ce}from"./config-d82a35a6.js";import{C as fe}from"./Close-095524a6.js";import"./vuema-115cb50e.js";/* empty css                   */import"./index-55ccac47.js";import"./echarts-676dbcd6.js";import"./plugin-68db7aa1.js";const Q=p=>(M("data-v-9ba907fd"),p=p(),P(),p),_e={class:"EventTrigger"},me={class:"grid grid-items-center grid-gap-15px grid-cols-2"},ve={class:"grid grid-gap-5px"},Ce=Q(()=>v("span",null,"类型",-1)),ye={class:"grid grid-gap-5px"},he=Q(()=>v("span",null,"目标",-1)),Ee=L({__name:"EventTrigger",props:{triggerConfig:{},eventDes:{}},setup(p){const i=p,{getStorageInfo:e}=H(),{targetData:d}=le(),s=I(null),C=I([]);function D(n){i.triggerConfig.targetId="",s.value=null,y(n)}function y(n){let a=[];n=="componentList"?e.componentList.forEach(o=>{a.push({label:`${o.chartConfig.title}(${o.id})`,value:o.id})}):n=="globalDialog"&&e.globalDialog.forEach(o=>{a.push({label:`${o.attrs.title}(${o.id})`,value:o.id})}),C.value=a}function b(){let{type:n,targetId:a}=i.triggerConfig;n=="componentList"?s.value=e.componentList.find(o=>a==o.id):n=="globalDialog"?s.value=e.globalDialog.find(o=>a==o.id):s.value=null}function t(){i.triggerConfig.updateValue=null,b()}const u=V(()=>i.triggerConfig.type=="componentList"?F(()=>R(()=>import("./index-681444c1.js"),["static/js/index-681444c1.js","static/js/index-4e626338.js","static/js/vue-65382a1b.js","static/js/elementPlus-07602b2b.js","static/js/vuema-115cb50e.js","static/js/lodash-f91682a1.js","static/js/xgplayerVue-c27b6911.js","static/js/vueRepl-a238c739.js","static/css/index-bc362552.css","static/js/el-tooltip-4ed993c7.js","static/js/config-122b28f2.js","static/css/el-tab-pane-eecd8b5a.css","static/css/el-radio-62e14d58.css","static/css/el-button-46bfe638.css","static/css/el-table-5bb7fb37.css","static/css/el-checkbox-e117c7b0.css","static/css/el-tag-2fca7a82.css","static/css/el-popper-b17b6765.css","static/css/el-scrollbar-df5aa9a0.css","static/css/el-table-column-d409cc84.css","static/css/el-input-9bb615ea.css","static/css/el-virtual-list-54336272.css","static/css/el-select-v2-ed199d64.css"])):i.triggerConfig.type=="globalDialog"?F(()=>R(()=>import("./index-cfe6e4cd.js"),["static/js/index-cfe6e4cd.js","static/js/index-4e626338.js","static/js/vue-65382a1b.js","static/js/elementPlus-07602b2b.js","static/js/vuema-115cb50e.js","static/js/lodash-f91682a1.js","static/js/xgplayerVue-c27b6911.js","static/js/vueRepl-a238c739.js","static/css/index-bc362552.css","static/js/el-tooltip-4ed993c7.js","static/js/SettingItem-0e9c370f.js","static/css/el-space-417b6673.css","static/css/SettingItem-a3b6dbf3.css","static/js/config-122b28f2.js","static/css/el-tab-pane-eecd8b5a.css","static/css/el-table-5bb7fb37.css","static/css/el-checkbox-e117c7b0.css","static/css/el-tag-2fca7a82.css","static/css/el-popper-b17b6765.css","static/css/el-scrollbar-df5aa9a0.css","static/css/el-button-46bfe638.css","static/css/el-table-column-d409cc84.css","static/css/el-input-9bb615ea.css","static/css/el-virtual-list-54336272.css","static/css/el-select-v2-ed199d64.css","static/css/el-switch-4d96cdcc.css"])):null),f=V(()=>i.eventDes?(i.eventDes.setVars&&i.eventDes.setVars(d.value),i.eventDes.vars):[]);return N(()=>{y(i.triggerConfig.type),b()}),(n,a)=>{const o=ie;return c(),E("div",_e,[v("div",me,[v("div",ve,[Ce,l(o,{size:"small",modelValue:n.triggerConfig.type,"onUpdate:modelValue":a[0]||(a[0]=m=>n.triggerConfig.type=m),options:r(te),onChange:D},null,8,["modelValue","options"])]),v("div",ye,[he,l(o,{size:"small",modelValue:n.triggerConfig.targetId,"onUpdate:modelValue":a[1]||(a[1]=m=>n.triggerConfig.targetId=m),options:r(C),onChange:t,onVisibleChange:a[2]||(a[2]=m=>y(n.triggerConfig.type))},null,8,["modelValue","options"])])]),r(s)?(c(),$(X(r(u)),{key:0,triggerConfig:n.triggerConfig,targetConfig:r(s),mappingFieldOptions:r(f)},null,8,["triggerConfig","targetConfig","mappingFieldOptions"])):z("",!0)])}}});const be=A(Ee,[["__scopeId","data-v-9ba907fd"]]),Ve=p=>(M("data-v-bcef3978"),p=p(),P(),p),De={class:"common-layout"},ke=["onClick"],Ie={class:"grid grid-items-center grid-gap-5px mb-15px"},$e=Ve(()=>v("label",null,"事件名称",-1)),we=L({__name:"EventConfigDialog",props:{modelValue:{type:Boolean},eventConfig:{}},emits:["update:modelValue","save"],setup(p,{emit:i}){const e=p,d=V({get(){return e.modelValue},set(t){i("update:modelValue",t)}}),s=V(()=>ce),C=V(()=>s.value?Object.keys(s.value).map(t=>({label:s.value[t].name,value:t})):ne),D=V(()=>{if(!s.value)return null;const t=s.value[e.eventConfig.type];return t||null});function y(){e.eventConfig.trigger.push(q.cloneDeep(oe))}H(),I([]);function b(){i("save",e.eventConfig)}return N(()=>{e.eventConfig.type||(e.eventConfig.type=C.value[0].value||""),console.log("output->",e.eventConfig.type)}),(t,u)=>{const f=se,n=ae,a=re,o=J,m=ge,w=K,h=pe,k=ue,B=ee;return r(d)?(c(),$(B,{key:0,title:"事件配置",modelValue:r(d),"onUpdate:modelValue":u[1]||(u[1]=_=>j(d)?d.value=_:null)},{footer:g(()=>[l(w,{type:"primary",onClick:b},{default:g(()=>[S("保存")]),_:1})]),default:g(()=>[v("div",De,[l(k,{class:"h-180"},{default:g(()=>[l(k,null,{default:g(()=>[l(n,{width:"260px",class:"aside"},{default:g(()=>[l(f,{"view-style":"padding: 10px 0;"},{default:g(()=>[(c(!0),E(T,null,O(r(C),_=>(c(),E("div",{class:Y([{select:_.value==t.eventConfig.type},"item-box"]),key:_.value,onClick:x=>t.eventConfig.type=_.value},G(_.label),11,ke))),128))]),_:1})]),_:1}),l(h,null,{default:g(()=>[v("div",Ie,[$e,l(a,{placeholder:"请输入事件名称",modelValue:t.eventConfig.name,"onUpdate:modelValue":u[0]||(u[0]=_=>t.eventConfig.name=_)},null,8,["modelValue"])]),(c(!0),E(T,null,O(t.eventConfig.trigger,(_,x)=>(c(),$(m,{class:"mb-15px",key:x},{default:g(()=>[l(o,{size:"20px",class:"closeIcon",onClick:ze=>t.eventConfig.trigger.splice(x,1)},{default:g(()=>[l(r(fe))]),_:2},1032,["onClick"]),l(be,{triggerConfig:_,eventDes:r(D)},null,8,["triggerConfig","eventDes"])]),_:2},1024))),128)),l(w,{class:"w-100%",onClick:y},{default:g(()=>[S("添加触发动作")]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1},8,["modelValue"])):z("",!0)}}});const xe=A(we,[["__scopeId","data-v-bcef3978"]]),Se={class:"eChartEvent"},Te=["onClick"],Oe={class:"flex-1 kh-nowrap"},Le=L({__name:"index",props:{eventsConfig:{}},setup(p){const i=p,e=I(!1),d=I({type:"",trigger:[],name:""});let s=null;function C(){s=null,d.value={type:"",trigger:[],name:W()},e.value=!0}function D(){i.eventsConfig.push(d.value),e.value=!1}function y(u,f){d.value=q.cloneDeep(u),s=f,e.value=!0}function b(){i.eventsConfig[s]=d.value,e.value=!1}function t(u){i.eventsConfig.splice(u,1)}return(u,f)=>{const n=K,a=de,o=U("DeleteFilled"),m=J,w=U("ArrowRight");return c(),E("div",Se,[l(n,{style:{width:"100%","margin-bottom":"10px"},type:"primary",onClick:C},{default:g(()=>[S("添加")]),_:1}),u.eventsConfig.length==0?(c(),$(a,{key:0,description:"无事件","image-size":100})):(c(!0),E(T,{key:1},O(u.eventsConfig,(h,k)=>(c(),E("div",{class:"kh-flex-between eventBox",key:k,onClick:B=>y(h,k)},[v("span",Oe,G(h.name),1),l(m,{size:"18",onClick:Z(t,["stop"])},{default:g(()=>[l(o)]),_:1},8,["onClick"]),l(m,{size:"18"},{default:g(()=>[l(w)]),_:1})],8,Te))),128)),r(e)?(c(),$(xe,{key:2,modelValue:r(e),"onUpdate:modelValue":f[0]||(f[0]=h=>j(e)?e.value=h:null),eventConfig:r(d),onSave:f[1]||(f[1]=h=>r(s)==null?D():b())},null,8,["modelValue","eventConfig"])):z("",!0)])}}});const gt=A(Le,[["__scopeId","data-v-3f5440bf"]]);export{gt as default};
