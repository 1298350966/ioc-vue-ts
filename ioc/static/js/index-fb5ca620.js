var Oe=Object.defineProperty;var _e=Object.getOwnPropertySymbols;var ke=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var ie=(o,a,n)=>a in o?Oe(o,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[a]=n,B=(o,a)=>{for(var n in a||(a={}))ke.call(a,n)&&ie(o,n,a[n]);if(_e)for(var n of _e(a))xe.call(a,n)&&ie(o,n,a[n]);return o};var X=(o,a,n)=>new Promise((u,c)=>{var E=_=>{try{b(n.next(_))}catch(i){c(i)}},g=_=>{try{b(n.throw(_))}catch(i){c(i)}},b=_=>_.done?u(_.value):Promise.resolve(_.value).then(E,g);b((n=n.apply(o,a)).next())});import{B as N,E as w,g as $e}from"./index-4e626338.js";/* empty css                    *//* empty css                    */import{_ as Z}from"./index-806da9dd.js";/* empty css                 */import"./el-collapse-item-4ed993c7.js";/* empty css                *//* empty css                  */import{d as S,r as h,o as r,s as U,w as t,a as e,u as s,a0 as L,c as C,F as k,q as I,h as m,l as O,a6 as D,G as j,H as z,f as ue,al as P,k as ee,y as we,z as Fe,g as A,A as Ne,m as Ue,x as Y,a5 as Ie}from"./vue-65382a1b.js";import{u as W}from"./useTargetData.hook-7e83673b.js";import{_ as re}from"./hCode-f0cdea69.js";/* empty css                *//* empty css                     */import{_ as pe}from"./EditorWorker.vue_vue_type_script_setup_true_lang-44860150.js";import{Q as q,P as G,an as te,U as H,T as ne,i as oe,ao as ae,al as se,k as Q,p as le,n as me,x as Me,w as ve,S as Se}from"./elementPlus-07602b2b.js";import{_ as T}from"./xgplayerVue-c27b6911.js";import{bo as Te,bp as Be}from"./index-55ccac47.js";/* empty css                *//* empty css                 */import{l as fe}from"./lodash-f91682a1.js";import{e as Ae,E as Le,a as Re,_ as je}from"./EventTrigger-6c8c8146.js";/* empty css                 */import{u as ze}from"./chartEditStore-8641b951.js";import{C as He}from"./Close-095524a6.js";import{F as de}from"./type-ae7fe4c5.js";import"./vueRepl-a238c739.js";import"./vuema-115cb50e.js";/* empty css                   */import"./highlight-87778b4e.js";import"./editorWorker-7e4b3ef6.js";import"./echarts-676dbcd6.js";/* empty css               *//* empty css                  *//* empty css                        *//* empty css                     */import"./plugin-68db7aa1.js";const ge={[N.ON_CLICK]:"单击",[N.ON_DBL_CLICK]:"双击",[N.ON_MOUSE_ENTER]:"鼠标进入",[N.ON_MOUSE_LEAVE]:"鼠标移出"},Ke={[w.VNODE_BEFORE_MOUNT]:"渲染之前",[w.VNODE_MOUNTED]:"渲染之后"};w.VNODE_BEFORE_MOUNT+"",w.VNODE_MOUNTED+"";const Ee=o=>(j("data-v-318cf82b"),o=o(),z(),o),Pe={class:"go-pl-3"},We=Ee(()=>m("span",{class:"func-keyword"},"async function  ",-1)),qe={class:"func-keyNameWord"},Ge=Ee(()=>m("p",{class:"go-pl-3 func-keyNameWord"},"}",-1)),Qe=S({__name:"FunEditor",props:{advancedEvents:{},targetData:{}},emits:["close"],setup(o,{expose:a,emit:n}){const u=o;let c=h(w.VNODE_MOUNTED);const E=h(!1),g=()=>{let _="",i="",p="";return E.value=Object.entries(u.advancedEvents).every(([y,l])=>{try{const f=Object.getPrototypeOf(function(){return X(this,null,function*(){})}).constructor;return new f(l),!0}catch(f){return i=f.message,p=f.name,_=y,!1}}),{errorFn:_,message:i,name:p}};return a({saveEvents:()=>{if(g().errorFn){window.$message.error("事件函数错误，无法进行保存");return}Object.values(u.advancedEvents).join("").trim()===""?u.targetData.events.advancedEvents={vnodeBeforeMount:void 0,vnodeMounted:void 0}:u.targetData.events.advancedEvents=B({},u.advancedEvents),n("close")}}),(_,i)=>{const p=pe,y=q,l=G,f=te,V=H,x=ne,F=oe,v=ae,M=se;return r(),U(M,null,{default:t(()=>[e(f,{style:{padding:"0"}},{default:t(()=>[e(l,{modelValue:s(c),"onUpdate:modelValue":i[0]||(i[0]=d=>L(c)?c.value=d:c=d),type:"border-card",class:"demo-tabs"},{default:t(()=>[(r(!0),C(k,null,I(s(w),(d,K)=>(r(),U(y,{label:`${s(Ke)[d]}-${d}`,name:d},{default:t(()=>[m("p",Pe,[We,m("span",qe,O(d)+"(mouseEvent)  {",1)]),e(p,{modelValue:_.advancedEvents[d],"onUpdate:modelValue":R=>_.advancedEvents[d]=R,height:"480px",language:"javascript"},null,8,["modelValue","onUpdate:modelValue"]),Ge]),_:2},1032,["label","name"]))),256))]),_:1},8,["modelValue"])]),_:1}),e(v,{width:"240px;",style:{"padding-left":"15px"}},{default:t(()=>[e(F,null,{default:t(()=>[e(x,{modelValue:[1,2,3]},{default:t(()=>[(r(!0),C(k,null,I([g()],d=>(r(),C(k,{key:d},[e(V,{title:"错误函数",name:1},{default:t(()=>[D(O(d.errorFn||"暂无"),1)]),_:2},1024),e(V,{title:"错误信息",name:2},{default:t(()=>[D(O(d.name||"暂无"),1)]),_:2},1024),e(V,{title:"堆栈信息",name:3},{default:t(()=>[D(O(d.message||"暂无"),1)]),_:2},1024)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1})}}});const Je=T(Qe,[["__scopeId","data-v-318cf82b"]]),ye=o=>(j("data-v-820dfdeb"),o=o(),z(),o),Xe={class:"func-annotate"},Ye=ye(()=>m("br",null,null,-1)),Ze={class:"func-keyword"},et={class:"go-ml-4"},tt=ye(()=>m("p",null,[D("}"),m("span",null,",")],-1)),nt=S({name:"ChartEventAdvancedHandle",__name:"index",setup(o){const{targetData:a,chartEditStore:n}=W(),u={[w.VNODE_BEFORE_MOUNT]:"渲染之前",[w.VNODE_MOUNTED]:"渲染之后"};w.VNODE_BEFORE_MOUNT+"",w.VNODE_MOUNTED+"";const c=h(!1);h(w.VNODE_MOUNTED);let E=h(B({},a.value.events.advancedEvents));h(!1);const g=()=>{c.value=!1},b=h(null),_=()=>{var i;(i=b.value)==null||i.saveEvents()};return ue(()=>c.value,i=>{i&&(E.value=B({},a.value.events.advancedEvents))}),(i,p)=>{const y=P("Edit"),l=Q,f=le,V=H,x=me,F=Z;return r(),C(k,null,[e(V,{title:"高级事件配置",name:"2"},{default:t(()=>[e(f,{class:"collapse-show-box",shadow:"never"},{default:t(()=>[e(l,{class:"edit",text:"",circle:"",type:"primary",size:"small",onClick:p[0]||(p[0]=ee(v=>c.value=!0,["stop"]))},{default:t(()=>[e(y,{style:{width:"15px",height:"15px"}})]),_:1}),(r(!0),C(k,null,I(s(w),v=>(r(),C("div",{key:v},[m("p",null,[m("span",Xe,"// "+O(u[v]),1),Ye,m("span",Ze,"async "+O(v),1),D(" (e, components, echarts, node_modules) { ")]),m("p",et,[e(s(re),{code:(s(a).events.advancedEvents||{})[v]||"",language:"typescript"},null,8,["code"])]),tt]))),128))]),_:1})]),_:1}),e(F,{"custom-class":"FunEditorDialog",modelValue:c.value,"onUpdate:modelValue":p[1]||(p[1]=v=>c.value=v),title:"高级事件配置"},{footer:t(()=>[e(x,null,{default:t(()=>[e(l,{onClick:g},{default:t(()=>[D("取消")]),_:1}),e(l,{type:"primary",onClick:_},{default:t(()=>[D("保存")]),_:1})]),_:1})]),default:t(()=>[e(Je,{ref_key:"funEditorRef",ref:b,"advanced-events":s(E),"target-data":s(a),onClose:g},null,8,["advanced-events","target-data"])]),_:1},8,["modelValue"])],64)}}});const ot=T(nt,[["__scopeId","data-v-820dfdeb"]]),Ce=o=>(j("data-v-aed2a472"),o=o(),z(),o),at={class:"go-pl-3"},st=Ce(()=>m("span",{class:"func-keyword"},"async function  ",-1)),lt={class:"func-keyNameWord"},ct=Ce(()=>m("p",{class:"go-pl-3 func-keyNameWord"},"}",-1)),_t=S({__name:"FunEditor",props:{baseEvent:{},targetData:{}},emits:["close"],setup(o,{expose:a,emit:n}){const u=o;let c=h(N.ON_CLICK);const E=h(!1),g=()=>{let _="",i="",p="";return E.value=Object.entries(u.baseEvent).every(([y,l])=>{try{const f=Object.getPrototypeOf(function(){return X(this,null,function*(){})}).constructor;return new f(l),!0}catch(f){return i=f.message,p=f.name,_=y,!1}}),{errorFn:_,message:i,name:p}};return a({saveEvents:()=>{if(g().errorFn){window.$message.error("事件函数错误，无法进行保存");return}Object.values(u.baseEvent).join("").trim()===""?(console.log(u.targetData),u.targetData.events.baseEvent={[N.ON_CLICK]:void 0,[N.ON_DBL_CLICK]:void 0,[N.ON_MOUSE_ENTER]:void 0,[N.ON_MOUSE_LEAVE]:void 0}):u.targetData.events.baseEvent=B({},u.baseEvent),n("close")}}),(_,i)=>{const p=pe,y=q,l=G,f=te,V=H,x=ne,F=oe,v=ae,M=se;return r(),U(M,null,{default:t(()=>[e(f,{style:{padding:"0"}},{default:t(()=>[e(l,{modelValue:s(c),"onUpdate:modelValue":i[0]||(i[0]=d=>L(c)?c.value=d:c=d),type:"border-card",class:"demo-tabs"},{default:t(()=>[(r(!0),C(k,null,I(s(N),(d,K)=>(r(),U(y,{label:`${s(ge)[d]}-${d}`,name:d},{default:t(()=>[m("p",at,[st,m("span",lt,O(d)+"(mouseEvent)  {",1)]),e(p,{modelValue:_.baseEvent[d],"onUpdate:modelValue":R=>_.baseEvent[d]=R,height:"480px",language:"javascript"},null,8,["modelValue","onUpdate:modelValue"]),ct]),_:2},1032,["label","name"]))),256))]),_:1},8,["modelValue"])]),_:1}),e(v,{width:"240px;",style:{"padding-left":"15px"}},{default:t(()=>[e(F,null,{default:t(()=>[e(x,null,{default:t(()=>[(r(!0),C(k,null,I([g()],d=>(r(),C(k,{key:d},[e(V,{title:"错误函数",name:1},{default:t(()=>[D(O(d.errorFn||"暂无"),1)]),_:2},1024),e(V,{title:"错误信息",name:2},{default:t(()=>[D(O(d.name||"暂无"),1)]),_:2},1024),e(V,{title:"堆栈信息",name:3},{default:t(()=>[D(O(d.message||"暂无"),1)]),_:2},1024)],64))),128))]),_:1})]),_:1})]),_:1})]),_:1})}}});const it=T(_t,[["__scopeId","data-v-aed2a472"]]),be=o=>(j("data-v-4ea8c82b"),o=o(),z(),o),dt={class:"func-annotate"},ut=be(()=>m("br",null,null,-1)),rt={class:"func-keyword"},pt={class:"go-ml-4"},mt=be(()=>m("p",null,[D("}"),m("span",null,",")],-1)),vt=S({__name:"index",setup(o){const{targetData:a,chartEditStore:n}=W(),u=h(!0),c=h(!1);let E=h(B({},a.value.events.baseEvent));const g=()=>{c.value=!1},b=h(null),_=()=>{var i;(i=b.value)==null||i.saveEvents()};return ue(()=>c.value,i=>{i&&(E.value=B({},a.value.events.baseEvent))}),(i,p)=>{const y=P("Edit"),l=Q,f=le,V=H,x=me,F=Z;return r(),C(k,null,[e(V,{title:"基础事件配置",name:"1"},{default:t(()=>[e(f,{class:"collapse-show-box",shadow:"never"},{default:t(()=>[we(e(l,{class:"edit",text:"",circle:"",type:"primary",size:"small",onClick:p[0]||(p[0]=ee(v=>c.value=!0,["stop"]))},{default:t(()=>[e(y,{style:{width:"15px",height:"15px"}})]),_:1},512),[[Fe,u.value]]),(r(!0),C(k,null,I(s(N),v=>(r(),C("div",{key:v},[m("p",null,[m("span",dt,"// "+O(s(ge)[v]),1),ut,m("span",rt,"async "+O(v),1),D(" (mouseEvent) { ")]),m("p",pt,[e(s(re),{code:(s(a).events.baseEvent||{})[v]||"",language:"typescript"},null,8,["code"])]),mt]))),128))]),_:1})]),_:1}),e(F,{"custom-class":"FunEditorDialog",modelValue:c.value,"onUpdate:modelValue":p[1]||(p[1]=v=>c.value=v),title:"基础事件编辑器"},{footer:t(()=>[e(x,null,{default:t(()=>[e(l,{onClick:g},{default:t(()=>[D("取消")]),_:1}),e(l,{type:"primary",onClick:_},{default:t(()=>[D("保存")]),_:1})]),_:1})]),default:t(()=>[e(it,{ref_key:"funEditorRef",ref:b,baseEvent:s(E),targetData:s(a),onClose:g},null,8,["baseEvent","targetData"])]),_:1},8,["modelValue"])],64)}}});const ft=T(vt,[["__scopeId","data-v-4ea8c82b"]]),gt=o=>(j("data-v-ecc0cf9e"),o=o(),z(),o),Et={class:"common-layout"},yt=["onClick"],Ct={class:"grid grid-items-center grid-gap-5px mb-15px"},bt=gt(()=>m("label",null,"事件名称",-1)),ht=S({__name:"EventConfigDialog",props:{modelValue:{type:Boolean},eventConfig:{}},emits:["update:modelValue","save"],setup(o,{emit:a}){const n=o,u=h("1"),{targetData:c}=W(),E=A({get(){return n.modelValue},set(l){a("update:modelValue",l)}}),g=A(()=>Te(c.value.key)),b=A(()=>g.value?Object.keys(g.value).map(l=>({label:g.value[l].name,value:l})):Ae),_=A(()=>{if(!g.value)return null;const l=g.value[n.eventConfig.type];return l||null});function i(){n.eventConfig.trigger.push(fe.cloneDeep(Re))}ze(),h([]);function p(){a("save",n.eventConfig)}Ne(()=>{n.eventConfig.type||(n.eventConfig.type=b.value[0].value||""),console.log("output->",n.eventConfig.type)});const y=A(()=>_.value?(_.value.setVars&&_.value.setVars(c.value),_.value.vars):[]);return(l,f)=>{const V=oe,x=ae,F=Me,v=ve,M=le,d=Q,K=q,R=je,he=G,De=te,ce=se,Ve=Z;return s(E)?(r(),U(Ve,{key:0,title:"事件配置",modelValue:s(E),"onUpdate:modelValue":f[2]||(f[2]=$=>L(E)?E.value=$:null)},{footer:t(()=>[e(d,{type:"primary",onClick:p},{default:t(()=>[D("保存")]),_:1})]),default:t(()=>[m("div",Et,[e(ce,{class:"h-180"},{default:t(()=>[e(ce,null,{default:t(()=>[e(x,{width:"260px",class:"aside"},{default:t(()=>[e(V,{"view-style":"padding: 10px 0;"},{default:t(()=>[(r(!0),C(k,null,I(s(b),$=>(r(),C("div",{class:Ue([{select:$.value==l.eventConfig.type},"item-box"]),key:$.value,onClick:J=>l.eventConfig.type=$.value},O($.label),11,yt))),128))]),_:1})]),_:1}),e(De,null,{default:t(()=>[m("div",Ct,[bt,e(F,{placeholder:"请输入事件名称",modelValue:l.eventConfig.name,"onUpdate:modelValue":f[0]||(f[0]=$=>l.eventConfig.name=$)},null,8,["modelValue"])]),e(he,{modelValue:s(u),"onUpdate:modelValue":f[1]||(f[1]=$=>L(u)?u.value=$:null),class:"demo-tabs"},{default:t(()=>[e(K,{label:"属性配置",name:"1"},{default:t(()=>[(r(!0),C(k,null,I(l.eventConfig.trigger,($,J)=>(r(),U(M,{class:"mb-15px",key:J},{default:t(()=>[e(v,{size:"20px",class:"closeIcon",onClick:St=>l.eventConfig.trigger.splice(J,1)},{default:t(()=>[e(s(He))]),_:2},1032,["onClick"]),e(Le,{triggerConfig:$,eventDes:s(_)},null,8,["triggerConfig","eventDes"])]),_:2},1024))),128)),e(d,{class:"w-100%",onClick:i},{default:t(()=>[D("添加触发动作")]),_:1})]),_:1}),l.eventConfig.filters?(r(),U(K,{key:0,label:"过滤条件",name:"2"},{default:t(()=>[e(R,{filters:l.eventConfig.filters,mappingFieldOptions:s(y)},null,8,["filters","mappingFieldOptions"])]),_:1})):Y("",!0)]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})])]),_:1},8,["modelValue"])):Y("",!0)}}});const Dt=T(ht,[["__scopeId","data-v-ecc0cf9e"]]),Vt={class:"eChartEvent"},Ot=["onClick"],kt={class:"flex-1 kh-nowrap"},xt=S({__name:"index",props:{eventsConfig:{}},setup(o){const a=o,n=h(!1),u=h({type:"",trigger:[],name:"",filters:{enable:!1,type:de.AND,conditions:[]}});let c=null;function E(){c=null,u.value={type:"",trigger:[],name:$e(),filters:{enable:!1,type:de.AND,conditions:[]}},n.value=!0}function g(){a.eventsConfig.push(u.value),n.value=!1}function b(p,y){u.value=fe.cloneDeep(p),c=y,n.value=!0}function _(){a.eventsConfig[c]=u.value,n.value=!1}function i(p){a.eventsConfig.splice(p,1)}return(p,y)=>{const l=Q,f=Se,V=P("DeleteFilled"),x=ve,F=P("ArrowRight");return r(),C("div",Vt,[e(l,{style:{width:"100%","margin-bottom":"10px"},type:"primary",onClick:E},{default:t(()=>[D("添加")]),_:1}),p.eventsConfig.length==0?(r(),U(f,{key:0,description:"无事件","image-size":100})):(r(!0),C(k,{key:1},I(p.eventsConfig,(v,M)=>(r(),C("div",{class:"kh-flex-between eventBox",key:M,onClick:d=>b(v,M)},[m("span",kt,O(v.name),1),e(x,{size:"18",onClick:ee(i,["stop"])},{default:t(()=>[e(V)]),_:1},8,["onClick"]),e(x,{size:"18"},{default:t(()=>[e(F)]),_:1})],8,Ot))),128)),s(n)?(r(),U(Dt,{key:2,modelValue:s(n),"onUpdate:modelValue":y[0]||(y[0]=v=>L(n)?n.value=v:null),eventConfig:s(u),onSave:y[1]||(y[1]=v=>s(c)==null?g():_())},null,8,["modelValue","eventConfig"])):Y("",!0)])}}});const $t=T(xt,[["__scopeId","data-v-5e7cfb10"]]),wt={class:"ConfigEventHandle"},Ft=S({__name:"index",props:{configEvents:{}},setup(o){return(a,n)=>{const u=H;return r(),C("div",wt,[e(u,{title:"组件事件配置",name:"4"},{default:t(()=>[e($t,{eventsConfig:a.configEvents.componentEvents},null,8,["eventsConfig"])]),_:1})])}}});const Nt=T(Ft,[["__scopeId","data-v-0d02d51e"]]),Ut={class:"ChartEvent"},It={class:"title"},Mt=S({name:"ChartEvent",__name:"index",setup(o){const{targetData:a}=W(),n=h("1"),u=A(()=>Be(a.value.chartConfig.key));return(c,E)=>{const g=ne,b=q,_=G;return r(),C("div",Ut,[e(_,{modelValue:s(n),"onUpdate:modelValue":E[0]||(E[0]=i=>L(n)?n.value=i:null),class:"demo-tabs"},{default:t(()=>[e(b,{label:"简单模式",name:"1"},{default:t(()=>[e(g,null,{default:t(()=>[e(s(Nt),{configEvents:s(a).events.configEvents},null,8,["configEvents"])]),_:1})]),_:1}),e(b,{label:"复杂模式",name:"2"},{default:t(()=>[m("div",It,[m("span",null," 组件 id："+O(s(a).id),1)]),e(g,null,{default:t(()=>[(r(),U(Ie(s(u)),{optionData:s(a).option,componentEvents:s(a).events.componentEvents},null,8,["optionData","componentEvents"])),e(s(ft)),e(s(ot))]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});const Cn=T(Mt,[["__scopeId","data-v-c480c929"]]);export{Cn as default};
