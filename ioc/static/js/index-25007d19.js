import{S as Ct}from"./index.esm.min-0a61ff36.js";import"./echarts-4dc1ebe1.js";import{p as It,q as kt,S as bt,v as Et,Z as Ft,z as nt,y as At,V as Ot,W as Rt,X as Pt,Y as dt,_ as Wt,$ as zt,a0 as Dt,u as Lt,a as Bt,c as Xt,d as Yt}from"./echarts-676dbcd6.js";import{includes as _t}from"./config-6df45096.js";import{a1 as qt}from"./index-55ccac47.js";import"./index-4e626338.js";import{u as Gt}from"./useChartDataFetch.hook-495a5af9.js";import{i as ct}from"./axios-ba46900f.js";import"./lodash-f91682a1.js";import{d as Ht,i as Zt,r as jt,g as Nt,f as Vt,o as $t,s as Ut,u as gt}from"./vue-65382a1b.js";import"./vueRepl-a238c739.js";import"./elementPlus-07602b2b.js";import"./vuema-115cb50e.js";import"./xgplayerVue-c27b6911.js";import"./http-0d114cdb.js";import"./axios-e76ab20a.js";It({type:"series.wordCloud",visualStyleAccessPath:"textStyle",visualStyleMapper:function(f){return{fill:f.get("color")}},visualDrawType:"fill",optionUpdated:function(){var f=this.option;f.gridSize=Math.max(Math.floor(f.gridSize),4)},getInitialData:function(f,i){var a=kt(f.data,{coordDimensions:["value"]}),l=new bt(a,this);return l.initData(f.data),l},defaultOption:{maskImage:null,shape:"circle",keepAspect:!1,left:"center",top:"center",width:"70%",height:"80%",sizeRange:[12,60],rotationRange:[-90,90],rotationStep:45,gridSize:8,drawOutOfBound:!1,shrinkToFit:!1,textStyle:{fontWeight:"normal"}}});Et({type:"wordCloud",render:function(f,i,a){var l=this.group;l.removeAll();var t=f.getData(),p=f.get("gridSize");f.layoutInstance.ondraw=function(u,r,S,O){var D=t.getItemModel(S),Y=D.getModel("textStyle"),C=new Ft({style:nt(Y),scaleX:1/O.info.mu,scaleY:1/O.info.mu,x:(O.gx+O.info.gw/2)*p,y:(O.gy+O.info.gh/2)*p,rotation:O.rot});C.setStyle({x:O.info.fillTextOffsetX,y:O.info.fillTextOffsetY+r*.5,text:u,verticalAlign:"middle",fill:t.getItemVisual(S,"style").fill,fontSize:r}),l.add(C),t.setItemGraphicEl(S,C),C.ensureState("emphasis").style=nt(D.getModel(["emphasis","textStyle"]),{state:"emphasis"}),C.ensureState("blur").style=nt(D.getModel(["blur","textStyle"]),{state:"blur"}),At(C,D.get(["emphasis","focus"]),D.get(["emphasis","blurScope"])),C.stateTransition={duration:f.get("animation")?f.get(["stateAnimation","duration"]):0,easing:f.get(["stateAnimation","easing"])},C.__highDownDispatcher=!0},this._model=f},remove:function(){this.group.removeAll(),this._model.layoutInstance.dispose()},dispose:function(){this._model.layoutInstance.dispose()}});/*!
 * wordcloud2.js
 * http://timdream.org/wordcloud2.js/
 *
 * Copyright 2011 - 2019 Tim Guan-tin Chien and contributors.
 * Released under the MIT license
 */window.setImmediate||(window.setImmediate=function(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||!window.addEventListener)return null;var a=[void 0],l="zero-timeout-message",t=function(u){var r=a.length;return a.push(u),window.postMessage(l+r.toString(36),"*"),r};return window.addEventListener("message",function(u){if(!(typeof u.data!="string"||u.data.substr(0,l.length)!==l)){u.stopImmediatePropagation();var r=parseInt(u.data.substr(l.length),36);a[r]&&(a[r](),a[r]=void 0)}},!0),window.clearImmediate=function(u){a[u]&&(a[u]=void 0)},t}()||function(a){window.setTimeout(a,0)}}());window.clearImmediate||(window.clearImmediate=function(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(a){window.clearTimeout(a)}}());var lt=function(){var i=document.createElement("canvas");if(!i||!i.getContext)return!1;var a=i.getContext("2d");return!(!a||!a.getImageData||!a.fillText||!Array.prototype.some||!Array.prototype.push)}(),ot=function(){if(lt){for(var i=document.createElement("canvas").getContext("2d"),a=20,l,t;a;){if(i.font=a.toString(10)+"px sans-serif",i.measureText("Ｗ").width===l&&i.measureText("m").width===t)return a+1;l=i.measureText("Ｗ").width,t=i.measureText("m").width,a--}return 0}}(),Jt=function(f){if(Array.isArray(f)){var i=f.slice();return i.splice(0,2),i}else return[]},Kt=function(i){for(var a,l,t=i.length;t;)a=Math.floor(Math.random()*t),l=i[--t],i[t]=i[a],i[a]=l;return i},H={},$=function(i,a){if(!lt)return;var l=Math.floor(Math.random()*Date.now());Array.isArray(i)||(i=[i]),i.forEach(function(c,e){if(typeof c=="string"){if(i[e]=document.getElementById(c),!i[e])throw new Error("The element id specified is not found.")}else if(!c.tagName&&!c.appendChild)throw new Error("You must pass valid HTML elements, or ID of the element.")});var t={list:[],fontFamily:'"Trebuchet MS", "Heiti TC", "微軟正黑體", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minSize:0,weightFactor:1,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,shrinkToFit:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,layoutAnimation:!0,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationStep:.1,shuffle:!0,rotateRatio:.1,shape:"circle",ellipticity:.65,classes:null,hover:null,click:null};if(a)for(var p in a)p in t&&(t[p]=a[p]);if(typeof t.weightFactor!="function"){var u=t.weightFactor;t.weightFactor=function(e){return e*u}}if(typeof t.shape!="function")switch(t.shape){case"circle":default:t.shape="circle";break;case"cardioid":t.shape=function(e){return 1-Math.sin(e)};break;case"diamond":t.shape=function(e){var n=e%(2*Math.PI/4);return 1/(Math.cos(n)+Math.sin(n))};break;case"square":t.shape=function(e){return Math.min(1/Math.abs(Math.cos(e)),1/Math.abs(Math.sin(e)))};break;case"triangle-forward":t.shape=function(e){var n=e%(2*Math.PI/3);return 1/(Math.cos(n)+Math.sqrt(3)*Math.sin(n))};break;case"triangle":case"triangle-upright":t.shape=function(e){var n=(e+Math.PI*3/2)%(2*Math.PI/3);return 1/(Math.cos(n)+Math.sqrt(3)*Math.sin(n))};break;case"pentagon":t.shape=function(e){var n=(e+.955)%(2*Math.PI/5);return 1/(Math.cos(n)+.726543*Math.sin(n))};break;case"star":t.shape=function(e){var n=(e+.955)%(2*Math.PI/10);return(e+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-n)+3.07768*Math.sin(2*Math.PI/10-n)):1/(Math.cos(n)+3.07768*Math.sin(n))};break}t.gridSize=Math.max(Math.floor(t.gridSize),4);var r=t.gridSize,S=r-t.maskGapWidth,O=Math.abs(t.maxRotation-t.minRotation),D=Math.min(t.maxRotation,t.minRotation),Y=t.rotationStep,C,I,E,B,F,W,_;function st(c,e){return"hsl("+(Math.random()*360).toFixed()+","+(Math.random()*30+70).toFixed()+"%,"+(Math.random()*(e-c)+c).toFixed()+"%)"}switch(t.color){case"random-dark":_=function(){return st(10,50)};break;case"random-light":_=function(){return st(50,90)};break;default:typeof t.color=="function"&&(_=t.color);break}var Z;typeof t.fontWeight=="function"&&(Z=t.fontWeight);var U=null;typeof t.classes=="function"&&(U=t.classes);var J=!1,N=[],K,ft=function(e){var n=e.currentTarget,o=n.getBoundingClientRect(),h,s;e.touches?(h=e.touches[0].clientX,s=e.touches[0].clientY):(h=e.clientX,s=e.clientY);var d=h-o.left,T=s-o.top,v=Math.floor(d*(n.width/o.width||1)/r),m=Math.floor(T*(n.height/o.height||1)/r);return N[v]?N[v][m]:null},ut=function(e){var n=ft(e);if(K!==n){if(K=n,!n){t.hover(void 0,void 0,e);return}t.hover(n.item,n.dimension,e)}},Q=function(e){var n=ft(e);n&&(t.click(n.item,n.dimension,e),e.preventDefault())},tt=[],vt=function(e){if(tt[e])return tt[e];var n=e*8,o=n,h=[];for(e===0&&h.push([B[0],B[1],0]);o--;){var s=1;t.shape!=="circle"&&(s=t.shape(o/n*2*Math.PI)),h.push([B[0]+e*s*Math.cos(-o/n*2*Math.PI),B[1]+e*s*Math.sin(-o/n*2*Math.PI)*t.ellipticity,o/n*2*Math.PI])}return tt[e]=h,h},et=function(){return t.abortThreshold>0&&new Date().getTime()-W>t.abortThreshold},mt=function(){return t.rotateRatio===0||Math.random()>t.rotateRatio?0:O===0?D:D+Math.round(Math.random()*O/Y)*Y},pt=function(e,n,o,h){var s=t.weightFactor(n);if(s<=t.minSize)return!1;var d=1;s<ot&&(d=function(){for(var it=2;it*s<ot;)it+=2;return it}());var T;Z?T=Z(e,n,s,h):T=t.fontWeight;var v=document.createElement("canvas"),m=v.getContext("2d",{willReadFrequently:!0});m.font=T+" "+(s*d).toString(10)+"px "+t.fontFamily;var A=m.measureText(e).width/d,w=Math.max(s*d,m.measureText("m").width,m.measureText("Ｗ").width)/d,y=A+w*2,k=w*3,R=Math.ceil(y/r),P=Math.ceil(k/r);y=R*r,k=P*r;var M=-A/2,g=-w*.4,x=Math.ceil((y*Math.abs(Math.sin(o))+k*Math.abs(Math.cos(o)))/r),b=Math.ceil((y*Math.abs(Math.cos(o))+k*Math.abs(Math.sin(o)))/r),z=b*r,G=x*r;v.setAttribute("width",z),v.setAttribute("height",G),m.scale(1/d,1/d),m.translate(z*d/2,G*d/2),m.rotate(-o),m.font=T+" "+(s*d).toString(10)+"px "+t.fontFamily,m.fillStyle="#000",m.textBaseline="middle",m.fillText(e,M*d,(g+s*.5)*d);var V=m.getImageData(0,0,z,G).data;if(et())return!1;for(var ht=[],q=b,X,at,rt,L=[x/2,b/2,x/2,b/2];q--;)for(X=x;X--;){rt=r;t:for(;rt--;)for(at=r;at--;)if(V[((X*r+rt)*z+(q*r+at))*4+3]){ht.push([q,X]),q<L[3]&&(L[3]=q),q>L[1]&&(L[1]=q),X<L[0]&&(L[0]=X),X>L[2]&&(L[2]=X);break t}}return{mu:d,occupied:ht,bounds:L,gw:b,gh:x,fillTextOffsetX:M,fillTextOffsetY:g,fillTextWidth:A,fillTextHeight:w,fontSize:s}},wt=function(e,n,o,h,s){for(var d=s.length;d--;){var T=e+s[d][0],v=n+s[d][1];if(T>=I||v>=E||T<0||v<0){if(!t.drawOutOfBound)return!1;continue}if(!C[T][v])return!1}return!0},yt=function(e,n,o,h,s,d,T,v,m,A){var w=o.fontSize,y;_?y=_(h,s,w,d,T,A):y=t.color;var k;Z?k=Z(h,s,w,A):k=t.fontWeight;var R;U?R=U(h,s,w,A):R=t.classes,i.forEach(function(P){if(P.getContext){var M=P.getContext("2d"),g=o.mu;M.save(),M.scale(1/g,1/g),M.font=k+" "+(w*g).toString(10)+"px "+t.fontFamily,M.fillStyle=y,M.translate((e+o.gw/2)*r*g,(n+o.gh/2)*r*g),v!==0&&M.rotate(-v),M.textBaseline="middle",M.fillText(h,o.fillTextOffsetX*g,(o.fillTextOffsetY+w*.5)*g),M.restore()}else{var x=document.createElement("span"),b="";b="rotate("+-v/Math.PI*180+"deg) ",o.mu!==1&&(b+="translateX(-"+o.fillTextWidth/4+"px) scale("+1/o.mu+")");var z={position:"absolute",display:"block",font:k+" "+w*o.mu+"px "+t.fontFamily,left:(e+o.gw/2)*r+o.fillTextOffsetX+"px",top:(n+o.gh/2)*r+o.fillTextOffsetY+"px",width:o.fillTextWidth+"px",height:o.fillTextHeight+"px",lineHeight:w+"px",whiteSpace:"nowrap",transform:b,webkitTransform:b,msTransform:b,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};y&&(z.color=y),x.textContent=h;for(var G in z)x.style[G]=z[G];if(m)for(var V in m)x.setAttribute(V,m[V]);R&&(x.className+=R),P.appendChild(x)}})},xt=function(e,n,o,h,s){if(!(e>=I||n>=E||e<0||n<0)){if(C[e][n]=!1,o){var d=i[0].getContext("2d");d.fillRect(e*r,n*r,S,S)}J&&(N[e][n]={item:s,dimension:h})}},St=function(e,n,o,h,s,d){var T=s.occupied,v=t.drawMask,m;v&&(m=i[0].getContext("2d"),m.save(),m.fillStyle=t.maskColor);var A;if(J){var w=s.bounds;A={x:(e+w[3])*r,y:(n+w[0])*r,w:(w[1]-w[3]+1)*r,h:(w[2]-w[0]+1)*r}}for(var y=T.length;y--;){var k=e+T[y][0],R=n+T[y][1];k>=I||R>=E||k<0||R<0||xt(k,R,v,A,d)}v&&m.restore()},Tt=function c(e,n){if(n>20)return null;var o,h,s;Array.isArray(e)?(o=e[0],h=e[1]):(o=e.word,h=e.weight,s=e.attributes);var d=mt(),T=Jt(e),v=pt(o,h,d,T);if(!v||et())return!1;if(!t.drawOutOfBound&&!t.shrinkToFit){var m=v.bounds;if(m[1]-m[3]+1>I||m[2]-m[0]+1>E)return!1}for(var A=F+1,w=function(P){var M=Math.floor(P[0]-v.gw/2),g=Math.floor(P[1]-v.gh/2),x=v.gw,b=v.gh;return wt(M,g,x,b,v.occupied)?(yt(M,g,v,o,h,F-A,P[2],d,s,T),St(M,g,x,b,v,e),{gx:M,gy:g,rot:d,info:v}):!1};A--;){var y=vt(F-A);t.shuffle&&(y=[].concat(y),Kt(y));for(var k=0;k<y.length;k++){var R=w(y[k]);if(R)return R}}return t.shrinkToFit?(Array.isArray(e)?e[1]=e[1]*3/4:e.weight=e.weight*3/4,c(e,n+1)):null},j=function(e,n,o){if(n)return!i.some(function(h){var s=new CustomEvent(e,{detail:o||{}});return!h.dispatchEvent(s)},this);i.forEach(function(h){var s=new CustomEvent(e,{detail:o||{}});h.dispatchEvent(s)},this)},Mt=function(){var e=i[0];if(e.getContext)I=Math.ceil(e.width/r),E=Math.ceil(e.height/r);else{var n=e.getBoundingClientRect();I=Math.ceil(n.width/r),E=Math.ceil(n.height/r)}if(j("wordcloudstart",!0)){B=t.origin?[t.origin[0]/r,t.origin[1]/r]:[I/2,E/2],F=Math.floor(Math.sqrt(I*I+E*E)),C=[];var o,h,s;if(!e.getContext||t.clearCanvas)for(i.forEach(function(g){if(g.getContext){var x=g.getContext("2d");x.fillStyle=t.backgroundColor,x.clearRect(0,0,I*(r+1),E*(r+1)),x.fillRect(0,0,I*(r+1),E*(r+1))}else g.textContent="",g.style.backgroundColor=t.backgroundColor,g.style.position="relative"}),o=I;o--;)for(C[o]=[],h=E;h--;)C[o][h]=!0;else{var d=document.createElement("canvas").getContext("2d");d.fillStyle=t.backgroundColor,d.fillRect(0,0,1,1);var T=d.getImageData(0,0,1,1).data,v=e.getContext("2d").getImageData(0,0,I*r,E*r).data;o=I;for(var m,A;o--;)for(C[o]=[],h=E;h--;){A=r;t:for(;A--;)for(m=r;m--;)for(s=4;s--;)if(v[((h*r+A)*I*r+(o*r+m))*4+s]!==T[s]){C[o][h]=!1;break t}C[o][h]!==!1&&(C[o][h]=!0)}v=d=T=void 0}if(t.hover||t.click){for(J=!0,o=I+1;o--;)N[o]=[];t.hover&&e.addEventListener("mousemove",ut),t.click&&(e.addEventListener("click",Q),e.addEventListener("touchstart",Q),e.addEventListener("touchend",function(g){g.preventDefault()}),e.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)"),e.addEventListener("wordcloudstart",function g(){e.removeEventListener("wordcloudstart",g),e.removeEventListener("mousemove",ut),e.removeEventListener("click",Q),K=void 0})}s=0;var w,y,k=!0;t.layoutAnimation?t.wait!==0?(w=window.setTimeout,y=window.clearTimeout):(w=window.setImmediate,y=window.clearImmediate):(w=function(g){g()},y=function(){k=!1});var R=function(x,b){i.forEach(function(z){z.addEventListener(x,b)},this)},P=function(x,b){i.forEach(function(z){z.removeEventListener(x,b)},this)},M=function g(){P("wordcloudstart",g),y(H[l])};R("wordcloudstart",M),H[l]=(t.layoutAnimation?w:setTimeout)(function g(){if(k){if(s>=t.list.length){y(H[l]),j("wordcloudstop",!1),P("wordcloudstart",M),delete H[l];return}W=new Date().getTime();var x=Tt(t.list[s],0),b=!j("wordclouddrawn",!0,{item:t.list[s],drawn:x});if(et()||b){y(H[l]),t.abort(),j("wordcloudabort",!1),j("wordcloudstop",!1),P("wordcloudstart",M);return}s++,H[l]=w(g,t.wait)}},t.wait)}};Mt()};$.isSupported=lt;$.minFontSize=ot;if(!$.isSupported)throw new Error("Sorry your browser not support wordCloud");function Qt(f){for(var i=f.getContext("2d"),a=i.getImageData(0,0,f.width,f.height),l=i.createImageData(a),t=0,p=0,u=0;u<a.data.length;u+=4){var r=a.data[u+3];if(r>128){var S=a.data[u]+a.data[u+1]+a.data[u+2];t+=S,++p}}for(var O=t/p,u=0;u<a.data.length;u+=4){var S=a.data[u]+a.data[u+1]+a.data[u+2],r=a.data[u+3];r<128||S>O?(l.data[u]=0,l.data[u+1]=0,l.data[u+2]=0,l.data[u+3]=0):(l.data[u]=255,l.data[u+1]=255,l.data[u+2]=255,l.data[u+3]=255)}i.putImageData(l,0,0)}Ot(function(f,i){f.eachSeriesByType("wordCloud",function(a){var l=zt(a.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()}),t=a.get("keepAspect"),p=a.get("maskImage"),u=p?p.width/p.height:1;t&&te(l,u);var r=a.getData(),S=document.createElement("canvas");S.width=l.width,S.height=l.height;var O=S.getContext("2d");if(p)try{O.drawImage(p,0,0,S.width,S.height),Qt(S)}catch(F){console.error("Invalid mask image"),console.error(F.toString())}var D=a.get("sizeRange"),Y=a.get("rotationRange"),C=r.getDataExtent("value"),I=Math.PI/180,E=a.get("gridSize");$(S,{list:r.mapArray("value",function(F,W){var _=r.getItemModel(W);return[r.getName(W),_.get("textStyle.fontSize",!0)||Dt(F,C,D),W]}).sort(function(F,W){return W[1]-F[1]}),fontFamily:a.get("textStyle.fontFamily")||a.get("emphasis.textStyle.fontFamily")||f.get("textStyle.fontFamily"),fontWeight:a.get("textStyle.fontWeight")||a.get("emphasis.textStyle.fontWeight")||f.get("textStyle.fontWeight"),gridSize:E,ellipticity:l.height/l.width,minRotation:Y[0]*I,maxRotation:Y[1]*I,clearCanvas:!p,rotateRatio:1,rotationStep:a.get("rotationStep")*I,drawOutOfBound:a.get("drawOutOfBound"),shrinkToFit:a.get("shrinkToFit"),layoutAnimation:a.get("layoutAnimation"),shuffle:!1,shape:a.get("shape")});function B(F){var W=F.detail.item;F.detail.drawn&&a.layoutInstance.ondraw&&(F.detail.drawn.gx+=l.x/E,F.detail.drawn.gy+=l.y/E,a.layoutInstance.ondraw(W[0],W[1],W[2],F.detail.drawn))}S.addEventListener("wordclouddrawn",B),a.layoutInstance&&a.layoutInstance.dispose(),a.layoutInstance={ondraw:null,dispose:function(){S.removeEventListener("wordclouddrawn",B),S.addEventListener("wordclouddrawn",function(F){F.preventDefault()})}}})});Rt(function(f){var i=(f||{}).series;!Pt(i)&&(i=i?[i]:[]);var a=["shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];dt(i,function(t){if(t&&t.type==="wordCloud"){var p=t.textStyle||{};l(p.normal),l(p.emphasis)}});function l(t){t&&dt(a,function(p){t.hasOwnProperty(p)&&(t["text"+Wt(p)]=t[p])})}});function te(f,i){var a=f.width,l=f.height;a>l*i?(f.x+=(a-l*i)/2,f.width=l*i):(f.y+=(l-a/i)/2,f.height=a/i)}const we=Ht({__name:"index",props:{themeSetting:{type:Object,required:!0},themeColor:{type:Object,required:!0},chartConfig:{type:Object,required:!0}},setup(f){const i=f,a=Zt("rootConfig");Lt([Bt,Xt,Yt]);const l=jt(),t=Nt(()=>qt(i.chartConfig.option,i.themeSetting,_t)),p=r=>{r&&(i.chartConfig.option.series[0].data=r),u.value&&ct()&&u.value.setOption(i.chartConfig.option)};Vt(()=>i.chartConfig.option.dataset,r=>{p(r)},{deep:!1});const{vChartRef:u}=Gt(i.chartConfig,a.requestGlobalConfig,r=>{p(r)});return(r,S)=>($t(),Ut(gt(Ct),{ref_key:"vChartRef",ref:u,theme:f.themeColor,option:t.value,"manual-update":gt(ct)(),"update-options":{replaceMerge:l.value},autoresize:""},null,8,["theme","option","manual-update","update-options"]))}});export{we as default};
